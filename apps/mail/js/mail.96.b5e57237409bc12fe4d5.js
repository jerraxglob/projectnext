/*! For license information please see mail.96.b5e57237409bc12fe4d5.js.LICENSE.txt */
(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[96],{76580:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,'.loading{position:absolute;left:50%;top:50%}.emptycontent{margin-top:24px;margin-bottom:10px;position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.container{position:relative;width:100%;height:100%}.folders .ui-droppable-active{background-color:#f0f0f0}.folder.no-select{cursor:not-allowed}#account-form{z-index:1001;width:250px;top:15%;padding-bottom:50px;margin:0 auto;padding-top:30px}#mail-settings #account-form{margin:0;padding-top:0}@media only screen and (max-height: 400px){#account-form #emptycontent{margin-top:0px}}@media only screen and (min-height: 401px)and (max-height: 600px){#account-form #emptycontent{margin-top:2vh}}@media only screen and (min-height: 601px){#account-form #emptycontent{margin-top:10vh}}#account-form h2{text-align:center;position:relative;width:300%;left:-100%;margin-bottom:20px}#account-form input{width:100%;box-sizing:border-box}#account-form .toggle-manual-mode{background-position:right;padding-right:16px;margin-left:6px;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";opacity:.3}#setup-imap-ssl-mode,#setup-smtp-ssl-mode{position:absolute;top:0;right:0;margin:0;background-color:rgba(0,0,0,0);border:none;z-index:100}#connect-loading{position:absolute;top:206px;left:0;right:0;margin-left:auto;margin-right:auto;height:30px}.app-navigation .empty{display:none}.app-navigation .navigation-account:not(:first-child){margin-top:22px}.app-navigation .special-inbox .collapse,.app-navigation .special-drafts .collapse,.app-navigation .special-sent .collapse,.app-navigation .special-trash .collapse{display:none !important}.app-navigation .special-inbox:hover .collapse,.app-navigation .special-inbox:focus .collapse,.app-navigation .special-drafts:hover .collapse,.app-navigation .special-drafts:focus .collapse,.app-navigation .special-sent:hover .collapse,.app-navigation .special-sent:focus .collapse,.app-navigation .special-trash:hover .collapse,.app-navigation .special-trash:focus .collapse{display:inline-block !important}#accounts-list li.collapse-folders a{color:var(--color-text-maxcontrast)}#emptycontent,#mail-messages #emptycontent.emptycontent-search{position:static}#mail-messages #emptycontent.emptycontent-search h2{line-height:150%}#mail-messages #emptycontent{position:absolute}.mail-account-email{display:inline-block;opacity:.5;padding:20px 0 10px 25px;width:calc(100% - 50px);margin:initial;font-size:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mail-account-email:first-child{display:none}.account-toggle-collapse{opacity:.5}.mailaccount-list li{padding:10px 0}.mailaccount-list .mail-account-name{display:inline-block;width:90%;overflow:hidden;text-overflow:ellipsis}.mailaccount-list .actions{display:inline-flex;position:absolute;right:0;min-height:16px;min-width:16px;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.25}.mailaccount-list .actions:hover,.mailaccount-list .actions:focus{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.5}#mail-messages{position:relative;width:30%;height:100%;overflow-x:hidden;overflow-y:auto;border-right:1px solid var(--color-border)}#mail-message-list-loading{position:sticky;height:40px;z-index:1;background:-moz-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255, 255, 255, 0) 70%);background:-webkit-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255, 255, 255, 0) 70%);background:radial-gradient(ellipse at top, var(--color-main-background), rgba(255, 255, 255, 0) 70%)}.app-navigation .msg.success{color:#fff;background-color:var(--color-success);padding:3px}.app-navigation .msg.error{color:#fff;background-color:var(--color-error);padding:3px}.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete{margin:0px;font-weight:normal !important;display:flex;align-content:center;align-items:center;border:none}.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete span{margin-left:10px}.ui-autocomplete{padding-left:16px !important;border-radius:0 !important;border-left:none;border-right:none;z-index:1000}.icon-starred[data-starred=false]:hover{background-image:var(--icon-star-dark-fc0) !important}.icon-starred[data-starred=false]:not(:hover){background-image:var(--icon-star-000) !important}.unread{font-weight:bold}.unread ul{font-weight:normal}.star{padding:20px;background-size:16px;display:inline-block;position:absolute;left:16px;top:28px;z-index:10}.star.icon-star{display:none;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.3}.star.icon-star:hover,.star.icon-star:focus{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";opacity:1}.icon-add{display:inline-block;vertical-align:text-top}.transparency{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";opacity:.6}.compose{width:60%;margin:0 auto}.mailaccount-list .mail-account-name{display:inline-block;width:90%;overflow:hidden;text-overflow:ellipsis}.mailaccount-list .actions{opacity:.5}.app-navigation>ul>.navigation-account>li,.app-navigation>ul>.navigation-account>.folders>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li{display:inline-flex;flex-wrap:wrap;order:1;flex-shrink:0}.app-navigation>ul>.navigation-account>li.pinned,.app-navigation>ul>.navigation-account>.folders>li.pinned,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.pinned{order:2}.app-navigation>ul>.navigation-account>li.pinned.first-pinned,.app-navigation>ul>.navigation-account>.folders>li.pinned.first-pinned,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.pinned.first-pinned{margin-top:auto !important}.app-navigation>ul>.navigation-account>li>a,.app-navigation>ul>.navigation-account>li>.app-navigation-entry-deleted,.app-navigation>ul>.navigation-account>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-deleted,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-deleted{padding-left:44px !important}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-edit,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-edit,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-edit{padding-left:38px !important}.app-navigation>ul>.navigation-account>li:focus,.app-navigation>ul>.navigation-account>li:focus>a,.app-navigation>ul>.navigation-account>li:hover,.app-navigation>ul>.navigation-account>li:hover>a,.app-navigation>ul>.navigation-account>li.active,.app-navigation>ul>.navigation-account>li.active>a,.app-navigation>ul>.navigation-account>li a.selected,.app-navigation>ul>.navigation-account>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li:focus,.app-navigation>ul>.navigation-account>.folders>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li:hover,.app-navigation>ul>.navigation-account>.folders>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li.active,.app-navigation>ul>.navigation-account>.folders>li.active>a,.app-navigation>ul>.navigation-account>.folders>li a.selected,.app-navigation>ul>.navigation-account>.folders>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:focus,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:hover,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.active,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li a.selected>a{opacity:1;box-shadow:inset 2px 0 var(--color-primary)}.app-navigation>ul>.navigation-account>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small:after{left:22px;top:22px}.app-navigation>ul>.navigation-account>li.deleted>ul,.app-navigation>ul>.navigation-account>li.deleted>.folders,.app-navigation>ul>.navigation-account>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>li.collapsible:not(.open)>.folders,.app-navigation>ul>.navigation-account>.folders>li.deleted>ul,.app-navigation>ul>.navigation-account>.folders>li.deleted>.folders,.app-navigation>ul>.navigation-account>.folders>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>.folders>li.collapsible:not(.open)>.folders,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.deleted>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.deleted>.folders,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.collapsible:not(.open)>.folders{opacity:0;max-height:0;transition:max-height 1000ms cubic-bezier(0, 1, 0, 1),opacity 250ms ease-in-out}.app-navigation>ul>.navigation-account>li>ul,.app-navigation>ul>.navigation-account>.folders>li>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul{flex:1 0 100%;padding-left:62px;width:inherit;transition:max-height 2000ms ease-in-out,opacity 250ms ease-in-out;max-height:9999px;opacity:1}.app-navigation>ul>.navigation-account>li>ul>li,.app-navigation>ul>.navigation-account>.folders>li>ul>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li{display:inline-flex;flex-wrap:wrap}.app-navigation>ul>.navigation-account>li>ul>li:focus,.app-navigation>ul>.navigation-account>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>li>ul>li:hover,.app-navigation>ul>.navigation-account>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>li>ul>li.active,.app-navigation>ul>.navigation-account>li>ul>li.active>a,.app-navigation>ul>.navigation-account>li>ul>li a.selected,.app-navigation>ul>.navigation-account>li>ul>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li:focus,.app-navigation>ul>.navigation-account>.folders>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li:hover,.app-navigation>ul>.navigation-account>.folders>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li.active,.app-navigation>ul>.navigation-account>.folders>li>ul>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>ul>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:focus,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:hover,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.active,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li a.selected>a{opacity:1}.app-navigation>ul>.navigation-account>li>ul>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>ul>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.icon-loading-small:after{left:-10px}.app-navigation>ul>.navigation-account>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>li>ul>li .app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>.folders>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>.folders>li>ul>li .app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li .app-navigation-entry-bullet{margin-left:-32px}.app-navigation>ul>.navigation-account>li>ul>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>ul>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>.app-navigation-entry-bullet{left:-32px}.app-navigation>ul>.navigation-account>li,.app-navigation>ul>.navigation-account>.folders>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li{position:relative;width:100%;box-sizing:border-box}.app-navigation>ul>.navigation-account>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>li.icon-loading-small>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small>.app-navigation-entry-bullet{background:none !important}.app-navigation>ul>.navigation-account>li>a,.app-navigation>ul>.navigation-account>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a{background-size:16px 16px;background-position:14px center;background-repeat:no-repeat;display:block;justify-content:space-between;line-height:44px;min-height:44px;padding:0 12px;overflow:hidden;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;color:var(--color-main-text);opacity:.57;flex:1 1 0;z-index:100}.app-navigation>ul>.navigation-account>li>a:first-child img,.app-navigation>ul>.navigation-account>.folders>li>a:first-child img,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a:first-child img{margin-right:11px;width:16px;margin-left:-30px}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-bullet{position:absolute;display:block;margin:16px;width:12px;height:12px;border:none;border-radius:50%;cursor:pointer}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-menu,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-menu,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-menu{top:44px}.app-navigation .collapsible>.collapse{z-index:500}',"",{version:3,sources:["webpack://./css/mail.scss"],names:[],mappings:"AAAA,SACC,iBAAA,CACA,QAAA,CACA,OAAA,CAGD,cACC,eAAA,CACA,kBAAA,CACA,iBAAA,CACA,KAAA,CACA,QAAA,CACA,MAAA,CACA,OAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CAGD,WACC,iBAAA,CACA,UAAA,CACA,WAAA,CAGD,8BACC,wBAAA,CAGD,kBACC,kBAAA,CAID,cACC,YAAA,CACA,WAAA,CACA,OAAA,CACA,mBAAA,CACA,aAAA,CACA,gBAAA,CAGA,6BACC,QAAA,CACA,aAAA,CAGF,2CACC,4BACC,cAAA,CAAA,CAGF,kEACC,4BACC,cAAA,CAAA,CAGF,2CACC,4BACC,eAAA,CAAA,CAGF,iBACC,iBAAA,CACA,iBAAA,CACA,UAAA,CACA,UAAA,CACA,kBAAA,CAED,oBACC,UAAA,CACA,qBAAA,CAGD,kCACC,yBAAA,CACA,kBAAA,CACA,eAAA,CACA,gEAAA,CACA,UAAA,CAGD,0CAEC,iBAAA,CACA,KAAA,CACA,OAAA,CACA,QAAA,CACA,8BAAA,CACA,WAAA,CACA,WAAA,CAGD,iBACC,iBAAA,CACA,SAAA,CACA,MAAA,CACA,OAAA,CACA,gBAAA,CACA,iBAAA,CACA,WAAA,CAMD,uBACC,YAAA,CAGD,sDACI,eAAA,CAKJ,oKAIC,uBAAA,CAED,wXAQC,+BAAA,CAGD,qCACC,mCAAA,CAGD,+DAEC,eAAA,CAED,oDACC,gBAAA,CAED,6BACC,iBAAA,CAGD,oBACC,oBAAA,CACA,UAAA,CACA,wBAAA,CACA,uBAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAED,gCACC,YAAA,CAGD,yBACC,UAAA,CAMD,qBACC,cAAA,CAED,qCACC,oBAAA,CACA,SAAA,CACA,eAAA,CACA,sBAAA,CAED,2BACC,mBAAA,CACA,iBAAA,CACA,OAAA,CACA,eAAA,CACA,cAAA,CACA,gEAAA,CACA,WAAA,CAED,kEAEC,gEAAA,CACA,UAAA,CAMD,eACC,iBAAA,CACA,SAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CACA,0CAAA,CAED,2BACC,eAAA,CACA,WAAA,CACA,SAAA,CACA,6GAAA,CACA,gHAAA,CACA,oGAAA,CAGD,6BACC,UAAA,CACA,qCAAA,CACA,WAAA,CAED,2BACC,UAAA,CACA,mCAAA,CACA,WAAA,CAID,6DACC,UAAA,CACA,6BAAA,CACA,YAAA,CACA,oBAAA,CACA,kBAAA,CACA,WAAA,CAED,kEACC,gBAAA,CAED,iBACC,4BAAA,CACA,0BAAA,CACA,gBAAA,CACA,iBAAA,CACA,YAAA,CAGD,wCACC,qDAAA,CAED,8CACC,gDAAA,CAGD,QACC,gBAAA,CAGD,WACC,kBAAA,CAGD,MACC,YAAA,CACA,oBAAA,CACA,oBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,gBACC,YAAA,CACA,gEAAA,CACA,UAAA,CAED,4CAEC,iEAAA,CACA,SAAA,CAGD,UACC,oBAAA,CACA,uBAAA,CAGD,cACC,gEAAA,CACA,UAAA,CAMD,SACC,SAAA,CACA,aAAA,CAID,qCACC,oBAAA,CACA,SAAA,CACA,eAAA,CACA,sBAAA,CAED,2BACC,UAAA,CAOC,qKAGC,mBAAA,CACA,cAAA,CACA,OAAA,CACA,aAAA,CAGA,0LACC,OAAA,CACA,iOACC,0BAAA,CAIF,0aAGC,4BAAA,CAED,sPAIC,4BAAA,CAOA,o/CAEC,SAAA,CACA,2CAAA,CAKF,gPACC,SAAA,CACA,QAAA,CAMA,s5BAEC,SAAA,CACA,YAAA,CAEA,+EAAA,CAMF,8KACC,aAAA,CACA,iBAAA,CACA,aAAA,CACA,kEAAA,CAEA,iBAAA,CACA,SAAA,CACA,uLACC,mBAAA,CACA,cAAA,CAKC,ooDAEC,SAAA,CAKF,kQACC,UAAA,CAID,6vBAGC,iBAAA,CAID,8QACC,UAAA,CAMJ,qKAGC,iBAAA,CACA,UAAA,CACA,qBAAA,CAGC,yhBAEC,0BAAA,CAIF,2KACC,yBAAA,CACA,+BAAA,CACA,2BAAA,CACA,aAAA,CACA,6BAAA,CACA,gBAAA,CACA,eAAA,CACA,cAAA,CACA,eAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,4BAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,2NACI,iBAAA,CACA,UAAA,CACA,iBAAA,CAKL,4PACC,iBAAA,CACA,aAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CACA,cAAA,CAID,sPACC,QAAA,CAIH,uCACC,WAAA",sourcesContent:['.loading {\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n}\n\n.emptycontent {\n\tmargin-top: 24px;\n\tmargin-bottom: 10px;\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.container {\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.folders .ui-droppable-active {\n\tbackground-color: rgb(240, 240, 240);\n}\n\n.folder.no-select {\n\tcursor: not-allowed;\n}\n\n/* ACCOUNT FORM */\n#account-form {\n\tz-index: 1001;\n\twidth: 250px;\n\ttop: 15%;\n\tpadding-bottom: 50px;\n\tmargin: 0 auto;\n\tpadding-top: 30px;\n}\n#mail-settings {\n\t#account-form {\n\t\tmargin: 0;\n\t\tpadding-top: 0;\n\t}\n}\n@media only screen and (max-height: 400px) {\n\t#account-form #emptycontent {\n\t\tmargin-top: 0px;\n\t}\n}\n@media only screen and (min-height: 401px) and (max-height: 600px) {\n\t#account-form #emptycontent {\n\t\tmargin-top: 2vh;\n\t}\n}\n@media only screen and (min-height: 601px) {\n\t#account-form #emptycontent {\n\t\tmargin-top: 10vh;\n\t}\n}\n#account-form h2 {\n\ttext-align: center;\n\tposition: relative;\n\twidth: 300%;\n\tleft: -100%;\n\tmargin-bottom: 20px;\n}\n#account-form input {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n\n#account-form .toggle-manual-mode {\n\tbackground-position: right;\n\tpadding-right: 16px;\n\tmargin-left: 6px;\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";\n\topacity: .3;\n}\n\n#setup-imap-ssl-mode,\n#setup-smtp-ssl-mode {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tmargin: 0;\n\tbackground-color: transparent;\n\tborder: none;\n\tz-index: 100;\n}\n\n#connect-loading {\n\tposition: absolute;\n\ttop: 206px;\n\tleft: 0;\n\tright: 0;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\theight: 30px;\n}\n\n/* app navigation */\n\n/* do not display empty folders in the sidebar */\n.app-navigation .empty {\n\tdisplay: none;\n}\n\n.app-navigation .navigation-account:not(:first-child) {\n    margin-top: 22px;\n}\n\n\n/* do not overlap collapse icon with special use icon */\n.app-navigation .special-inbox .collapse,\n.app-navigation .special-drafts .collapse,\n.app-navigation .special-sent .collapse,\n.app-navigation .special-trash .collapse {\n\tdisplay: none !important;\n}\n.app-navigation .special-inbox:hover .collapse,\n.app-navigation .special-inbox:focus .collapse,\n.app-navigation .special-drafts:hover .collapse,\n.app-navigation .special-drafts:focus .collapse,\n.app-navigation .special-sent:hover .collapse,\n.app-navigation .special-sent:focus .collapse,\n.app-navigation .special-trash:hover .collapse,\n.app-navigation .special-trash:focus .collapse {\n\tdisplay: inline-block !important;\n}\n\n#accounts-list li.collapse-folders a {\n\tcolor: var(--color-text-maxcontrast);\n}\n\n#emptycontent,\n#mail-messages #emptycontent.emptycontent-search {\n\tposition: static;\n}\n#mail-messages #emptycontent.emptycontent-search h2 {\n\tline-height: 150%;\n}\n#mail-messages #emptycontent {\n\tposition: absolute;\n}\n\n.mail-account-email {\n\tdisplay: inline-block;\n\topacity: .5;\n\tpadding: 20px 0 10px 25px;\n\twidth: calc(100% - 50px);\n\tmargin: initial;\n\tfont-size: 100%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n.mail-account-email:first-child {\n\tdisplay: none;\n}\n\n.account-toggle-collapse {\n\topacity: .5;\n}\n\n\n/* settings */\n\n.mailaccount-list li {\n\tpadding: 10px 0;\n}\n.mailaccount-list .mail-account-name {\n\tdisplay: inline-block;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.mailaccount-list .actions {\n\tdisplay: inline-flex;\n\tposition: absolute;\n\tright: 0;\n\tmin-height: 16px;\n\tmin-width: 16px;\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";\n\topacity: .25;\n}\n.mailaccount-list .actions:hover,\n.mailaccount-list .actions:focus {\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n\topacity: .5;\n}\n\n\n/* app content*/\n\n#mail-messages {\n\tposition: relative;\n\twidth: 30%;\n\theight: 100%;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tborder-right: 1px solid var(--color-border);\n}\n#mail-message-list-loading {\n\tposition: sticky;\n\theight: 40px;\n\tz-index: 1;\n\tbackground: -moz-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255,255,255,0) 70%);\n\tbackground: -webkit-radial-gradient(top, ellipse cover, var(--color-main-background),rgba(255,255,255,0) 70%);\n\tbackground: radial-gradient(ellipse at top, var(--color-main-background),rgba(255,255,255,0) 70%);\n}\n\n.app-navigation .msg.success {\n\tcolor: #fff;\n\tbackground-color: var(--color-success);\n\tpadding: 3px;\n}\n.app-navigation .msg.error {\n\tcolor: #fff;\n\tbackground-color: var(--color-error);\n\tpadding: 3px;\n}\n\n/* autocomplete list */\n.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete {\n\tmargin: 0px;\n\tfont-weight: normal !important;\n\tdisplay: flex;\n\talign-content: center;\n\talign-items: center;\n\tborder: none;\n}\n.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete span {\n\tmargin-left: 10px;\n}\n.ui-autocomplete {\n\tpadding-left: 16px !important;\n\tborder-radius: 0 !important;\n\tborder-left: none;\n\tborder-right: none;\n\tz-index: 1000;\n}\n\n.icon-starred[data-starred="false"]:hover {\n\tbackground-image: var(--icon-star-dark-fc0) !important;\n}\n.icon-starred[data-starred="false"]:not(:hover) {\n\tbackground-image: var(--icon-star-000) !important;\n}\n\n.unread {\n\tfont-weight: bold;\n}\n/* make sure subfolders of unread folders are not bolded as well */\n.unread ul {\n\tfont-weight: normal;\n}\n\n.star {\n\tpadding: 20px;\n\tbackground-size: 16px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tleft: 16px;\n\ttop: 28px;\n\tz-index: 10;\n}\n/* only show star on hover of row */\n.star.icon-star {\n\tdisplay: none;\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n\topacity: .3;\n}\n.star.icon-star:hover,\n.star.icon-star:focus {\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\n\topacity: 1;\n}\n\n.icon-add {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.transparency {\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";\n\topacity: .6;\n}\n\n\n/* compose (handling mailto links) */\n\n.compose {\n\twidth: 60%;\n\tmargin: 0 auto;\n}\n\n/* settings */\n.mailaccount-list .mail-account-name {\n\tdisplay: inline-block;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.mailaccount-list .actions {\n\topacity: .5;\n}\n\n// FIXES for core apps.scss\n\n.app-navigation {\n\t> ul {\n\t\t> .navigation-account > li,\n\t\t> .navigation-account > .folders > li,\n\t\t> .navigation-account > .folders > li > .folders > .folders > li {\n\t\t\tdisplay: inline-flex;\n\t\t\tflex-wrap: wrap;\n\t\t\torder: 1;\n\t\t\tflex-shrink: 0;\n\n\t\t\t/* Pinned-to-bottom entries */\n\t\t\t&.pinned {\n\t\t\t\torder: 2;\n\t\t\t\t&.first-pinned {\n\t\t\t\t\tmargin-top: auto !important;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t> a,\n\t\t\t> .app-navigation-entry-deleted {\n\t\t\t\t/* Ugly hack for overriding the main entry link */\n\t\t\t\tpadding-left: 44px !important;\n\t\t\t}\n\t\t\t> .app-navigation-entry-edit {\n\t\t\t\t/* Ugly hack for overriding the main entry link */\n\t\t\t\t/* align the input correctly with the link text\n\t\t\t\t   44px-6px padding for the input */\n\t\t\t\tpadding-left: 38px !important;\n\t\t\t}\n\n\t\t\t&:focus,\n\t\t\t&:hover,\n\t\t\t&.active,\n\t\t\ta.selected {\n\t\t\t\t&,\n\t\t\t\t> a {\n\t\t\t\t\topacity: 1;\n\t\t\t\t\tbox-shadow: inset 2px 0 var(--color-primary);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* align loader */\n\t\t\t&.icon-loading-small:after {\n\t\t\t\tleft: 22px;\n\t\t\t\ttop: 22px;\n\t\t\t}\n\n\t\t\t/* hide and animate deletion/collapse of subitems */\n\t\t\t&.deleted,\n\t\t\t&.collapsible:not(.open) {\n\t\t\t\t> ul,\n\t\t\t\t> .folders {\n\t\t\t\t\topacity: 0;\n\t\t\t\t\tmax-height: 0;\n\t\t\t\t\t/* bezier override the hide/slow effect due to the 2000 max-height */\n\t\t\t\t\ttransition: max-height 1000ms cubic-bezier(0, 1, 0, 1),\n\t\t\t\t\t\t\t\topacity 250ms ease-in-out;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Second level nesting for lists */\n\t\t\t> ul {\n\t\t\t\tflex: 1 0 100%;\n\t\t\t\tpadding-left: 62px;\n\t\t\t\twidth: inherit;\n\t\t\t\ttransition: max-height 2000ms ease-in-out,\n\t\t\t\t\t\t\topacity 250ms ease-in-out;\n\t\t\t\tmax-height: 9999px;\n\t\t\t\topacity: 1;\n\t\t\t\t> li {\n\t\t\t\t\tdisplay: inline-flex;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\t&:focus,\n\t\t\t\t\t&:hover,\n\t\t\t\t\t&.active,\n\t\t\t\t\ta.selected {\n\t\t\t\t\t\t&,\n\t\t\t\t\t\t> a {\n\t\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/* align loader */\n\t\t\t\t\t&.icon-loading-small:after {\n\t\t\t\t\t\tleft: -10px;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Submenu fix for icon */\n\t\t\t\t\t> a[class*=\'icon-\'],\n\t\t\t\t\t> a[style*=\'background-image\'],\n\t\t\t\t\t.app-navigation-entry-bullet {\n\t\t\t\t\t\tmargin-left: -32px; /* 44px padding - 12px padding */\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Submenu fix for bullet */\n\t\t\t\t\t> .app-navigation-entry-bullet {\n\t\t\t\t\t\tleft: -32px;/* 44px padding - 12px padding */\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/* Menu and submenu */\n\t\t> .navigation-account > li,\n\t\t> .navigation-account > .folders > li,\n\t\t> .navigation-account > .folders > li > .folders > .folders > li {\n\t\t\tposition: relative;\n\t\t\twidth: 100%;\n\t\t\tbox-sizing: border-box;\n\t\t\t/* hide icons if loading */\n\t\t\t&.icon-loading-small {\n\t\t\t\t> a,\n\t\t\t\t> .app-navigation-entry-bullet {\n\t\t\t\t\tbackground: none !important;\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* Main entry link */\n\t\t\t> a {\n\t\t\t\tbackground-size: 16px 16px;\n\t\t\t\tbackground-position: 14px center;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tdisplay: block;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tline-height: 44px;\n\t\t\t\tmin-height: 44px;\n\t\t\t\tpadding: 0 12px;\n\t\t\t\toverflow: hidden;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\tcolor: var(--color-main-text);\n\t\t\t\topacity: .57;\n\t\t\t\tflex: 1 1 0;\n\t\t\t\tz-index: 100; /* above the bullet */\n\t\t\t\t/* TODO: forbid using img as icon in menu? */\n\t\t\t\t&:first-child img {\n\t\t\t\t    margin-right: 11px;\n\t\t\t\t    width: 16px;\n\t\t\t\t    margin-left: -30px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Bullet icon */\n\t\t\t> .app-navigation-entry-bullet {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin: 16px;\n\t\t\t\twidth: 12px;\n\t\t\t\theight: 12px;\n\t\t\t\tborder: none;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\n\t\t\t/* popover fix the flex positionning of the li parent */\n\t\t\t> .app-navigation-entry-menu {\n\t\t\t\ttop: 44px;\n\t\t\t}\n\t\t}\n\t}\n\t.collapsible > .collapse {\n\t\tz-index: 500;\n\t}\n}\n'],sourceRoot:""}]),e.Z=i},11460:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,'@media only screen and (max-width: var(--breakpoint-mobile)){.app-content-list{max-width:100vw}#mail-messages{width:100%}#mail-message-list-loading{width:100%}#mail-message{z-index:100;background:var(--color-main-background);width:100%;left:0;top:0}#mail-message-close{display:block;position:fixed;right:0;top:45px;width:44px;height:44px;background-size:24px;z-index:101;cursor:pointer;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)";opacity:.4}#mail-message-close:hover,#mail-message-close:focus{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";opacity:.6}.hidden-mobile{display:none}textarea.message-body{padding-right:12px}#mail-thread-header .mail-message-actions{margin-right:5px}}',"",{version:3,sources:["webpack://./css/mobile.scss"],names:[],mappings:"AAAA,6DACC,kBACC,eAAA,CAID,eACC,UAAA,CAID,2BACC,UAAA,CAID,cACC,WAAA,CACA,uCAAA,CACA,UAAA,CACA,MAAA,CACA,KAAA,CAGD,oBACC,aAAA,CACA,cAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,oBAAA,CACA,WAAA,CACA,cAAA,CACA,gEAAA,CACA,UAAA,CAED,oDAEC,gEAAA,CACA,UAAA,CAGD,eACC,YAAA,CAGD,sBACC,kBAAA,CAID,0CACC,gBAAA,CAAA",sourcesContent:["@media only screen and (max-width: var(--breakpoint-mobile)) {\n\t.app-content-list {\n\t\tmax-width: 100vw;\n\t}\n\n\t/* full width for message list on mobile */\n\t#mail-messages {\n\t\twidth: 100%;\n\t}\n\n\t/* correctly center loading icon on mobile */\n\t#mail-message-list-loading {\n\t\twidth: 100%;\n\t}\n\n\t/* overlay message detail on top of message list */\n\t#mail-message {\n\t\tz-index: 100;\n\t\tbackground: var(--color-main-background);\n\t\twidth: 100%;\n\t\tleft: 0;\n\t\ttop: 0;\n\t}\n\n\t#mail-message-close {\n\t\tdisplay: block;\n\t\tposition: fixed;\n\t\tright: 0;\n\t\ttop: 45px;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tbackground-size: 24px;\n\t\tz-index: 101;\n\t\tcursor: pointer;\n\t\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=40)';\n\t\topacity: 0.4;\n\t}\n\t#mail-message-close:hover,\n\t#mail-message-close:focus {\n\t\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=60)';\n\t\topacity: 0.6;\n\t}\n\n\t.hidden-mobile {\n\t\tdisplay: none;\n\t}\n\n\ttextarea.message-body {\n\t\tpadding-right: 12px;\n\t}\n\n\t/* reply-forward actions align to the far right */\n\t#mail-thread-header .mail-message-actions {\n\t\tmargin-right: 5px;\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},73289:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".calendar-picker-option[data-v-9bd234a6]{width:100%;display:flex;align-items:center}.calendar-picker-option__color-indicator[data-v-9bd234a6]{width:12px;height:12px;border-radius:50%;border:none;margin-right:8px;flex-basis:12px;flex-shrink:0}.calendar-picker-option__label[data-v-9bd234a6]{overflow:hidden;text-overflow:ellipsis;flex-grow:1;max-width:80px}","",{version:3,sources:["webpack://./src/components/CalendarPickerOption.vue"],names:[],mappings:"AACA,yCACC,UAAA,CACA,YAAA,CACA,kBAAA,CAEA,0DACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CAGD,gDACC,eAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA",sourcesContent:["\n.calendar-picker-option {\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\n\t&__color-indicator {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tmargin-right: 8px;\n\t\tflex-basis: 12px;\n\t\tflex-shrink: 0;\n\t}\n\n\t&__label {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tflex-grow: 1;\n\t\tmax-width: 80px;\n\t}\n}\n\n"],sourceRoot:""}]),e.Z=i},79396:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,'.message-composer[data-v-73987fda]{margin:0;z-index:100;display:flex;flex-direction:column;height:100%;max-height:100%}.composer-actions[data-v-73987fda]{position:sticky;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-fields[data-v-73987fda]{display:flex;border-top:1px solid var(--color-border);align-items:flex-start}.composer-fields label[data-v-73987fda]{padding:11px 20px 11px 0}.composer-fields[data-v-73987fda] .multiselect--multiple .multiselect__tags{display:grid;grid-template-columns:calc(100% - 18px) 18px 100%}.composer-fields[data-v-73987fda] .multiselect--multiple .multiselect__tags .multiselect__limit{margin-right:0;margin-left:8px}.composer-fields[data-v-73987fda] .multiselect__content-wrapper{border-bottom:1px solid var(--color-border);margin-top:0}.composer-fields[data-v-73987fda] .multiselect__content-wrapper li>span::before{display:none}.composer-fields[data-v-73987fda] .multiselect__input{position:relative !important;top:0;grid-column-start:1;grid-column-end:3}.composer-fields[data-v-73987fda] .multiselect--active input:focus-visible{box-shadow:none}.composer-fields[data-v-73987fda] .multiselect__tags{box-sizing:border-box;height:auto}.composer-fields__from[data-v-73987fda]{margin-right:50px}.composer-fields .multiselect.multiselect--multiple[data-v-73987fda]::after{position:absolute;right:0;top:auto;bottom:8px}.composer-fields .multiselect__tag[data-v-73987fda]{position:relative}.composer-fields.mail-account[data-v-73987fda]{border-top:none;padding-top:10px}.composer-fields.mail-account>.multiselect[data-v-73987fda]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-73987fda],.composer-fields input[data-v-73987fda],.composer-fields TextEditor[data-v-73987fda]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .composer-fields--custom[data-v-73987fda]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-top:2px;width:calc(100% - 120px)}.composer-fields .composer-fields--custom button[data-v-73987fda]{margin-top:0;margin-bottom:0;background-color:rgba(0,0,0,0);border:none;opacity:.5;padding:10px 16px}.composer-fields .composer-fields--custom button.active[data-v-73987fda],.composer-fields .composer-fields--custom button[data-v-73987fda]:active{opacity:1}.composer-fields .composer-fields--custom .multiselect[data-v-73987fda]{width:calc(100% - 150px)}.composer-fields .multiselect[data-v-73987fda]{margin-right:12px}.composer-fields .subject[data-v-73987fda]{font-size:15px;font-weight:bold;margin:3px 0 !important;padding:0 12px !important}.composer-fields .subject[data-v-73987fda]:focus-visible{box-shadow:none !important}.composer-fields .message-body[data-v-73987fda]{height:100%;width:100%;margin:0;border:none !important;outline:none !important;box-shadow:none !important;padding:12px;-webkit-user-select:text;user-select:text}.warning-box[data-v-73987fda]{padding:5px 12px;border-radius:0}.message-editor[data-v-73987fda]{flex:1 1 100%;min-height:0}.draft-status[data-v-73987fda]{padding:2px;opacity:.5;font-size:small;display:block}.from-label[data-v-73987fda],.to-label[data-v-73987fda],.copy-toggle[data-v-73987fda],.cc-label[data-v-73987fda],.bcc-label[data-v-73987fda]{padding-top:12px;padding-bottom:12px;padding-right:20px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.bcc-label[data-v-73987fda]{top:initial;bottom:0}.copy-toggle[data-v-73987fda]{cursor:pointer;width:initial}.copy-toggle[data-v-73987fda]:hover,.copy-toggle[data-v-73987fda]:focus{color:var(--color-main-text)}.reply[data-v-73987fda]{min-height:100px}[data-v-73987fda] .multiselect .multiselect__tags,.subject[data-v-73987fda]{border:none !important}[data-v-73987fda] [data-select="create"] .avatardiv--unknown{background:var(--color-text-maxcontrast) !important}[data-v-73987fda] .multiselect.opened .multiselect__tags .multiselect__tags-wrap{flex-wrap:wrap}.submit-message.send.primary.icon-confirm-white[data-v-73987fda]{color:var(--color-main-background)}.sending-hint[data-v-73987fda]{height:50px;margin-top:50px}.button[data-v-73987fda]{background-color:rgba(0,0,0,0);border:none}.send-button[data-v-73987fda]{display:flex;align-items:center;padding:10px 15px;margin-left:5px}.send-button .send-icon[data-v-73987fda]{padding-right:5px}.centered-content[data-v-73987fda]{margin-top:0 !important}.composer-actions-right[data-v-73987fda]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;bottom:5px}.composer-actions--primary-actions[data-v-73987fda]{display:flex;flex-direction:row;padding-left:10px;align-items:center}.composer-actions--secondary-actions[data-v-73987fda]{display:flex;flex-direction:row;padding:12px;gap:5px}.composer-actions--primary-actions .button[data-v-73987fda]{padding:2px}.composer-actions--secondary-actions .button[data-v-73987fda]{flex-shrink:0}.composer-actions-draft-status[data-v-73987fda]{padding-left:10px}@media only screen and (max-width: 580px){.composer-actions-right[data-v-73987fda]{align-items:end;flex-direction:column-reverse}.composer-actions-draft-status[data-v-73987fda]{text-align:end;padding-right:15px}.composer-actions--primary-actions[data-v-73987fda]{padding-right:5px}}',"",{version:3,sources:["webpack://./src/components/Composer.vue"],names:[],mappings:"AACA,mCACC,QAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,mCACC,eAAA,CACA,gGAAA,CAGD,kCACC,YAAA,CACA,wCAAA,CACA,sBAAA,CAEA,wCACC,wBAAA,CAGD,4EACC,YAAA,CACA,iDAAA,CAEA,gGACC,cAAA,CACA,eAAA,CAIF,gEACC,2CAAA,CACA,YAAA,CAEA,gFACC,YAAA,CAIF,sDACC,4BAAA,CACA,KAAA,CACA,mBAAA,CACA,iBAAA,CAGD,2EACC,eAAA,CAGD,qDACC,qBAAA,CACA,WAAA,CAGD,wCACC,iBAAA,CAGD,4EACC,iBAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CAGD,oDACC,iBAAA,CAGD,+CACC,eAAA,CACA,gBAAA,CAEA,4DACC,cAAA,CACA,eAAA,CAIF,oIAGC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,cAAA,CACA,eAAA,CACA,wBAAA,CAEA,kEACC,YAAA,CACA,eAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CAGD,kJACC,SAAA,CAGD,wEACC,wBAAA,CAIF,+CACC,iBAAA,CAGD,2CACC,cAAA,CACA,gBAAA,CACA,uBAAA,CACA,yBAAA,CAEA,yDACC,0BAAA,CAIF,gDACC,WAAA,CACA,UAAA,CACA,QAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CACA,YAAA,CAIA,wBAAA,CACA,gBAAA,CAIF,8BACC,gBAAA,CACA,eAAA,CAID,iCACC,aAAA,CACA,YAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,aAAA,CAID,6IAKC,gBAAA,CACA,mBAAA,CACA,kBAAA,CACA,WAAA,CACA,mCAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,4EACC,sBAAA,CAED,6DACC,mDAAA,CAED,iFACC,cAAA,CAGD,iEACC,kCAAA,CAED,+BACC,WAAA,CACA,eAAA,CAED,yBACC,8BAAA,CACA,WAAA,CAED,8BACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,eAAA,CAED,yCACC,iBAAA,CAED,mCACC,uBAAA,CAED,yCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,6BAAA,CACA,UAAA,CAED,oDACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,kBAAA,CAED,sDACC,YAAA,CACA,kBAAA,CACA,YAAA,CACA,OAAA,CAED,4DACC,WAAA,CAED,8DACC,aAAA,CAGD,gDACC,iBAAA,CAGD,0CACC,yCACC,eAAA,CACA,6BAAA,CAED,gDACC,cAAA,CACA,kBAAA,CAED,oDACC,iBAAA,CAAA",sourcesContent:['\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmax-height: 100%;\n}\n\n.composer-actions {\n\tposition: sticky;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-fields {\n\tdisplay: flex;\n\tborder-top: 1px solid var(--color-border);\n\talign-items: flex-start;\n\n\tlabel {\n\t\tpadding: 11px 20px 11px 0;\n\t}\n\n\t:deep(.multiselect--multiple .multiselect__tags) {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: calc(100% - 18px) 18px 100%;\n\n\t\t.multiselect__limit {\n\t\t\tmargin-right: 0;\n\t\t\tmargin-left: 8px\n\t\t}\n\t}\n\n\t:deep(.multiselect__content-wrapper) {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t\tmargin-top: 0;\n\n\t\t& li > span::before {\n\t\t\tdisplay: none\n\t\t}\n\t}\n\n\t:deep(.multiselect__input) {\n\t\tposition: relative !important;\n\t\ttop: 0;\n\t\tgrid-column-start: 1;\n\t\tgrid-column-end: 3;\n\t}\n\n\t:deep(.multiselect--active input:focus-visible) {\n\t\tbox-shadow: none;\n\t}\n\n\t:deep(.multiselect__tags) {\n\t\tbox-sizing: border-box;\n\t\theight: auto;\n\t}\n\n\t&__from {\n\t\tmargin-right: 50px; /* for the modal close button */\n\t}\n\n\t.multiselect.multiselect--multiple::after {\n\t\tposition: absolute;\n\t\tright: 0;\n\t\ttop: auto;\n\t\tbottom: 8px\n\t}\n\n\t.multiselect__tag {\n\t\tposition: relative;\n\t}\n\n\t&.mail-account {\n\t\tborder-top: none;\n\t\tpadding-top: 10px;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.composer-fields--custom {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tflex-wrap: wrap;\n\t\tpadding-top: 2px;\n\t\twidth: calc(100% - 120px);\n\n\t\tbutton {\n\t\t\tmargin-top: 0;\n\t\t\tmargin-bottom: 0;\n\t\t\tbackground-color: transparent;\n\t\t\tborder: none;\n\t\t\topacity: 0.5;\n\t\t\tpadding: 10px 16px;\n\t\t}\n\n\t\tbutton.active, button:active {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t.multiselect {\n\t\t\twidth: calc(100% - 150px);\n\t\t}\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n\n\t.subject {\n\t\tfont-size: 15px;\n\t\tfont-weight: bold;\n\t\tmargin: 3px 0 !important;\n\t\tpadding: 0 12px !important;\n\n\t\t&:focus-visible {\n\t\t\tbox-shadow: none !important;\n\t\t}\n\t}\n\n\t.message-body {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tborder: none !important;\n\t\toutline: none !important;\n\t\tbox-shadow: none !important;\n\t\tpadding: 12px;\n\n\t\t// Fix contenteditable not becoming focused upon clichint within it\'s\n\t\t// boundaries in safari\n\t\t-webkit-user-select: text;\n\t\tuser-select: text;\n\t}\n}\n\n.warning-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n// Make composer editor expand\n.message-editor {\n\tflex: 1 1 100%;\n\tmin-height: 0;\n}\n\n.draft-status {\n\tpadding: 2px;\n\topacity: 0.5;\n\tfont-size: small;\n\tdisplay: block;\n\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\tpadding-right: 20px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-weight: bold;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n:deep(.multiselect .multiselect__tags), .subject {\n\tborder: none !important;\n}\n:deep([data-select="create"] .avatardiv--unknown) {\n\tbackground: var(--color-text-maxcontrast) !important;\n}\n:deep(.multiselect.opened .multiselect__tags .multiselect__tags-wrap) {\n\tflex-wrap: wrap;\n}\n\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n.sending-hint {\n\theight: 50px;\n\tmargin-top: 50px;\n}\n.button {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.send-button {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10px 15px;\n\tmargin-left: 5px;\n}\n.send-button .send-icon {\n\tpadding-right: 5px;\n}\n.centered-content {\n\tmargin-top: 0 !important;\n}\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbottom: 5px;\n}\n.composer-actions--primary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding-left: 10px;\n\talign-items: center;\n}\n.composer-actions--secondary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 12px;\n\tgap: 5px;\n}\n.composer-actions--primary-actions .button {\n\tpadding: 2px;\n}\n.composer-actions--secondary-actions .button{\n\tflex-shrink: 0;\n}\n\n.composer-actions-draft-status {\n\tpadding-left: 10px;\n}\n\n@media only screen and (max-width: 580px) {\n\t.composer-actions-right {\n\t\talign-items: end;\n\t\tflex-direction: column-reverse;\n\t}\n\t.composer-actions-draft-status {\n\t\ttext-align: end;\n\t\tpadding-right: 15px;\n\t}\n\t.composer-actions--primary-actions {\n\t\tpadding-right: 5px;\n\t}\n}\n\n'],sourceRoot:""}]),e.Z=i},33706:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".composer-attachment[data-v-47464ade]{width:calc(50% - 20px);box-sizing:border-box;display:flex;justify-content:space-between;align-items:flex-start;margin:10px;flex-wrap:wrap}.composer-attachment--with-error[data-v-47464ade]{color:red;opacity:.5}.composer-attachment .cloud-attachment-icon[data-v-47464ade]{position:absolute;z-index:2;right:2px;top:2px;color:#000}.composer-attachment .attachment-preview[data-v-47464ade]{display:inline-flex;flex-wrap:wrap;width:50px;height:50px;overflow:hidden;border-radius:3px;align-items:center;justify-content:center;position:relative}.composer-attachment .attachment-preview img[data-v-47464ade]{display:block;min-width:50px;min-height:50px;max-width:72px;max-height:72px;position:absolute}.composer-attachment .attachment-preview span[data-v-47464ade]{color:rgba(0,0,0,.3);font-size:13px;text-transform:uppercase;font-weight:bold}.composer-attachment button[data-v-47464ade]{padding:0;background:rgba(0,0,0,0);border:none;margin:6px -2px 0 0}.attachments-upload-progress[data-v-47464ade]{display:block;height:5px;width:100%;position:relative;border-radius:5px;background:var(--color-background-dark);margin-top:7px}.attachments-upload-progress .attachments-upload-progress--bar[data-v-47464ade]{height:5px;background:var(--color-primary-element-light);position:absolute;z-index:1;left:0;border-radius:5px}.attachments-upload-progress>div[data-v-47464ade]{padding-left:3px}.new-message-attachments-action[data-v-47464ade]{display:inline-block;vertical-align:middle;padding:18px;opacity:.5}.attachment-inner[data-v-47464ade]{display:flex;flex-wrap:wrap;width:calc(100% - 90px);position:relative}.new-message-attachment-name[data-v-47464ade]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-bottom:3px}.new-message-attachment-size[data-v-47464ade]{color:#6a6a6a;width:100%}.new-message-attachment-name.upload-ongoing[data-v-47464ade]{color:#0082c9}.new-message-attachment-name.upload-warning[data-v-47464ade]{color:#d2322d}.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-47464ade]{border:1px solid #e9322d;background:#e9322d}","",{version:3,sources:["webpack://./src/components/ComposerAttachment.vue"],names:[],mappings:"AAEA,sCACC,sBAAA,CACG,qBAAA,CACA,YAAA,CACA,6BAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA,CAEH,kDACC,SAAA,CACA,UAAA,CAGD,6DACC,iBAAA,CACA,SAAA,CACA,SAAA,CACA,OAAA,CACA,UAAA,CAGD,0DACC,mBAAA,CACA,cAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CAEA,8DACC,aAAA,CACA,cAAA,CACA,eAAA,CACA,cAAA,CACA,eAAA,CACA,iBAAA,CAGD,+DACC,oBAAA,CACA,cAAA,CACA,wBAAA,CACA,gBAAA,CAKF,6CACC,SAAA,CACA,wBAAA,CACA,WAAA,CACA,mBAAA,CAIF,8CACC,aAAA,CACA,UAAA,CACA,UAAA,CACA,iBAAA,CACA,iBAAA,CACA,uCAAA,CACA,cAAA,CAEA,gFACC,UAAA,CACA,6CAAA,CACA,iBAAA,CACA,SAAA,CACA,MAAA,CACA,iBAAA,CAIF,kDACC,gBAAA,CAGD,iDACC,oBAAA,CACA,qBAAA,CACA,YAAA,CACA,UAAA,CAGD,mCACC,YAAA,CACG,cAAA,CACH,uBAAA,CACA,iBAAA,CAKD,8CACC,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,iBAAA,CAGD,8CACC,aAAA,CACA,UAAA,CAID,6DACC,aAAA,CAID,6DACC,aAAA,CAID,mFACC,wBAAA,CACA,kBAAA",sourcesContent:["\n\n.composer-attachment {\n\twidth: calc(50% - 20px);\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin: 10px;\n    flex-wrap: wrap;\n\n\t&--with-error {\n\t\tcolor:red;\n\t\topacity: 0.5;\n\t}\n\n\t.cloud-attachment-icon {\n\t\tposition:absolute;\n\t\tz-index: 2;\n\t\tright: 2px;\n\t\ttop: 2px;\n\t\tcolor: rgba(0, 0, 0, 1);\n\t}\n\n\t.attachment-preview {\n\t\tdisplay: inline-flex;\n\t\tflex-wrap: wrap;\n\t\twidth: 50px;\n\t\theight:50px;\n\t\toverflow: hidden;\n\t\tborder-radius: 3px;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: relative;\n\n\t\timg {\n\t\t\tdisplay: block;\n\t\t\tmin-width: 50px;\n\t\t\tmin-height: 50px;\n\t\t\tmax-width: 72px;\n\t\t\tmax-height: 72px;\n\t\t\tposition: absolute;\n\t\t}\n\n\t\tspan {\n\t\t\tcolor: rgba(0,0,0,0.3);\n\t\t\tfont-size: 13px;\n\t\t\ttext-transform: uppercase;\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t}\n\n\tbutton {\n\t\tpadding: 0;\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tmargin: 6px -2px 0 0;\n\t}\n}\n\n.attachments-upload-progress {\n\tdisplay: block;\n\theight: 5px;\n\twidth: 100%;\n\tposition: relative;\n\tborder-radius: 5px;\n\tbackground: var(--color-background-dark);\n\tmargin-top: 7px;\n\n\t.attachments-upload-progress--bar {\n\t\theight: 5px;\n\t\tbackground: var(--color-primary-element-light);\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tleft: 0;\n\t\tborder-radius: 5px;\n\t}\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 18px;\n\topacity: 0.5;\n}\n\n.attachment-inner {\n\tdisplay: flex;\n    flex-wrap: wrap;\n\twidth: calc(100% - 90px);\n\tposition: relative;\n\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\twhite-space:nowrap;\n\tmargin-bottom: 3px;\n}\n\n.new-message-attachment-size {\n\tcolor: #6a6a6a;\n\twidth: 100%;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n"],sourceRoot:""}]),e.Z=i},75390:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".new-message-attachments--counter[data-v-1a5f00a0]{color:var(--color-text-maxcontrast);padding:10px 20px;cursor:pointer;display:flex;align-items:center}.new-message-attachments--counter--with-errors[data-v-1a5f00a0]{color:red}.new-message-attachments--list[data-v-1a5f00a0]{display:flex;flex-wrap:wrap;overflow:auto;transition:max-height .5s cubic-bezier(0, 1, 0, 1);padding:0 10px}.new-message-attachments--list.hide[data-v-1a5f00a0]{overflow:hidden;max-height:0;transition:max-height .5s cubic-bezier(0, 1, 0, 1)}.new-message-attachments--list.active[data-v-1a5f00a0]{overflow:auto;max-height:287px}","",{version:3,sources:["webpack://./src/components/ComposerAttachments.vue"],names:[],mappings:"AAGC,mDACC,mCAAA,CACA,iBAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CAEA,gEACC,SAAA,CAIF,gDACC,YAAA,CACA,cAAA,CAEA,aAAA,CACA,kDAAA,CACA,cAAA,CAEA,qDACC,eAAA,CACA,YAAA,CACA,kDAAA,CAGD,uDACC,aAAA,CACA,gBAAA",sourcesContent:["\n\n.new-message-attachments {\n\t&--counter {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding: 10px 20px;\n\t\tcursor:pointer;\n\t\tdisplay:flex;\n\t\talign-items: center;\n\n\t\t&--with-errors {\n\t\t\tcolor:red;\n\t\t}\n\t}\n\n\t&--list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t// 2 and a half attachment height\n\t\toverflow: auto;\n\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\tpadding: 0 10px;\n\n\t\t&.hide {\n\t\t\toverflow: hidden;\n\t\t\tmax-height:0;\n\t\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\t}\n\n\t\t&.active {\n\t\t\toverflow: auto;\n\t\t\tmax-height: 287px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},30538:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,'.mail-message-account-color[data-v-b47c32bc]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.envelope .app-content-list-item-icon[data-v-b47c32bc]{height:40px}.envelope__subtitle[data-v-b47c32bc]{display:flex;gap:4px}.envelope__subtitle__subject[data-v-b47c32bc]{color:var(--color-main-text);line-height:130%;overflow:hidden;text-overflow:ellipsis}.envelope__preview-text[data-v-b47c32bc]{color:var(--color-text-maxcontrast);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:initial}.icon-important[data-v-b47c32bc] path{fill:#fc0;stroke:var(--color-main-background)}.list-item:hover .icon-important[data-v-b47c32bc] path,.list-item:focus .icon-important[data-v-b47c32bc] path,.list-item.active .icon-important[data-v-b47c32bc] path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-b47c32bc]{background-image:none;left:7px;top:13px;opacity:1}.icon-important.app-content-list-item-star[data-v-b47c32bc]:hover,.icon-important.app-content-list-item-star[data-v-b47c32bc]:focus{opacity:.5}.app-content-list-item-select-checkbox[data-v-b47c32bc]{display:inline-block;vertical-align:middle;position:absolute;left:33px;top:35px;z-index:50}.list-item-style[data-v-b47c32bc]:not(.seen){font-weight:bold}.list-item-style.selected[data-v-b47c32bc]{background-color:var(--color-background-dark)}.list-item-style .draft[data-v-b47c32bc]{line-height:130%}.list-item-style .draft em[data-v-b47c32bc]{font-style:italic}.junk-icon-style[data-v-b47c32bc]{opacity:.2;display:flex;top:14px;left:34px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}.junk-icon-style[data-v-b47c32bc]:hover{opacity:.1}.icon-attachment[data-v-b47c32bc]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)";opacity:.25}[data-v-b47c32bc] .action--primary .material-design-icon{margin-bottom:-14px}[data-v-b47c32bc] .list-item__extra{margin-left:41px !important}.tag-group__label[data-v-b47c32bc]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-b47c32bc]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-b47c32bc]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}.list-item__wrapper[data-v-b47c32bc] {list-style:none}.app-content-list-item-star.favorite-icon-style[data-v-b47c32bc]{display:block}.icon-important.app-content-list-item-star[data-v-b47c32bc] {position:absolute;top:14px;z-index:1}.app-content-list-item-star.favorite-icon-style[data-v-b47c32bc]{display:inline-block;position:absolute;margin-bottom:21px;margin-left:28px;cursor:pointer;stroke:var(--color-main-background);stroke-width:2;z-index:1}.app-content-list-item-star.favorite-icon-style[data-v-b47c32bc]:hover{opacity:.4}[data-v-b47c32bc] .svg svg{height:16px;width:16px}.seen-icon-style[data-v-b47c32bc]{opacity:.6}.attachment-icon-style[data-v-b47c32bc]{opacity:.6}[data-v-b47c32bc] .list-item-content__wrapper{margin-top:6px}[data-v-b47c32bc] .list-item__extra{margin-top:9px}',"",{version:3,sources:["webpack://./src/components/Envelope.vue"],names:[],mappings:"AACA,6CACC,iBAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA,CAIA,uDACC,WAAA,CAGD,qCACC,YAAA,CACA,OAAA,CAEA,8CACC,4BAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CAGF,yCACC,mCAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,mBAAA,CAKD,sCACA,SAAA,CACA,mCAAA,CAKA,sKACA,mCAAA,CAKA,4DACA,qBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CAEA,oIAEA,UAAA,CAKD,wDACC,oBAAA,CACA,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,6CACC,gBAAA,CAED,2CACC,6CAAA,CAGA,yCACC,gBAAA,CAEA,4CACC,iBAAA,CAIH,kCACC,UAAA,CACA,YAAA,CACA,QAAA,CACA,SAAA,CACA,oBAAA,CACA,WAAA,CACA,UAAA,CACA,QAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CACA,wCACC,UAAA,CAIF,kCACC,gEAAA,CACA,WAAA,CAIA,yDACC,mBAAA,CAGF,oCACC,2BAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,sCACC,eAAA,CAED,iEACC,aAAA,CAED,6DACC,iBAAA,CACA,QAAA,CACA,SAAA,CAED,iEACC,oBAAA,CACA,iBAAA,CACA,kBAAA,CACA,gBAAA,CACA,cAAA,CACA,mCAAA,CACA,cAAA,CACA,SAAA,CACA,uEACC,UAAA,CAGF,2BACC,WAAA,CACA,UAAA,CAED,kCACC,UAAA,CAED,wCACC,UAAA,CAED,8CACC,cAAA,CAED,oCACC,cAAA",sourcesContent:["\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.envelope {\n\t.app-content-list-item-icon {\n\t\theight: 40px; // To prevent some unexpected spacing below the avatar\n\t}\n\n\t&__subtitle {\n\t\tdisplay: flex;\n\t\tgap: 4px;\n\n\t\t&__subject {\n\t\t\tcolor: var(--color-main-text);\n\t\t\tline-height: 130%;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t}\n\t&__preview-text {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tfont-weight: initial;\n\t}\n}\n\n.icon-important {\n\t:deep(path) {\n\tfill: #ffcc00;\n\tstroke: var(--color-main-background);\n\t}\n\t.list-item:hover &,\n\t.list-item:focus &,\n\t.list-item.active & {\n\t:deep(path) {\n\tstroke: var(--color-background-dark);\n\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\tbackground-image: none;\n\tleft: 7px;\n\ttop: 13px;\n\topacity: 1;\n\n\t&:hover,\n\t&:focus {\n\topacity: 0.5;\n\t}\n\t}\n}\n\n.app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tleft: 33px;\n\ttop: 35px;\n\tz-index: 50; // same as icon-starred\n}\n\n.list-item-style:not(.seen) {\n\tfont-weight: bold;\n}\n.list-item-style.selected {\n\tbackground-color: var(--color-background-dark);\n}\n.list-item-style {\n\t.draft {\n\t\tline-height: 130%;\n\n\t\tem {\n\t\t\tfont-style: italic;\n\t\t}\n\t}\n}\n.junk-icon-style {\n\topacity: .2;\n\tdisplay: flex;\n\ttop: 14px;\n\tleft: 34px;\n\tbackground-size: 16px;\n\theight: 20px;\n\twidth: 20px;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tz-index: 2;\n\t&:hover {\n\t\topacity: .1;\n\t}\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n:deep(.action--primary) {\n\t.material-design-icon {\n\t\tmargin-bottom: -14px;\n\t}\n}\n:deep(.list-item__extra) {\n\tmargin-left: 41px !important;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.list-item__wrapper:deep() {\n\tlist-style: none;\n}\n.app-content-list-item-star.favorite-icon-style {\n\tdisplay: block;\n}\n.icon-important.app-content-list-item-star:deep() {\n\tposition: absolute;\n\ttop: 14px;\n\tz-index: 1;\n}\n.app-content-list-item-star.favorite-icon-style {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-bottom: 21px;\n\tmargin-left: 28px;\n\tcursor: pointer;\n\tstroke: var(--color-main-background);\n\tstroke-width: 2;\n\tz-index: 1;\n\t&:hover {\n\t\topacity: .4;\n\t}\n}\n:deep(.svg svg) {\n\theight: 16px;\n\twidth: 16px;\n}\n.seen-icon-style {\n\topacity: .6;\n}\n.attachment-icon-style {\n\topacity: .6;\n}\n:deep(.list-item-content__wrapper) {\n\tmargin-top: 6px;\n}\n:deep(.list-item__extra) {\n\tmargin-top: 9px;\n}\n"],sourceRoot:""}]),e.Z=i},54027:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"div[data-v-a9161c92]{position:relative}.load-more[data-v-a9161c92]{text-align:center;margin-top:10px;cursor:pointer;color:var(--color-text-maxcontrast);display:inline-flex;gap:15px}.plus-icon[data-v-a9161c92]{margin-left:20px}.multiselect-header[data-v-a9161c92]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0px;height:48px;z-index:100}#load-more-mail-messages[data-v-a9161c92]{margin:10px auto;padding:10px;margin-top:50px;margin-bottom:50px}#load-more-mail-messages[data-v-a9161c92]{padding-left:32px;background-position:9px center}.multiselect-header-enter-active[data-v-a9161c92],.multiselect-header-leave-active[data-v-a9161c92],.list-enter-active[data-v-a9161c92],.list-leave-active[data-v-a9161c92]{transition:all var(--animation-slow)}.multiselect-header-enter[data-v-a9161c92],.multiselect-header-leave-to[data-v-a9161c92],.list-enter[data-v-a9161c92],.list-leave-to[data-v-a9161c92]{opacity:0;height:0px;transform:scaleY(0)}#action-label[data-v-a9161c92]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-a9161c92]{display:block}}","",{version:3,sources:["webpack://./src/components/EnvelopeList.vue"],names:[],mappings:"AACA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,mCAAA,CACA,mBAAA,CACA,QAAA,CAED,4BACC,gBAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,OAAA,CACA,WAAA,CACA,WAAA,CAGD,0CACC,gBAAA,CACA,YAAA,CACA,eAAA,CACA,kBAAA,CAID,0CACC,iBAAA,CACA,8BAAA,CAGD,4KAIC,oCAAA,CAGD,sJAIC,SAAA,CACA,UAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA",sourcesContent:["\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tcolor: var(--color-text-maxcontrast);\n\tdisplay: inline-flex;\n\tgap: 15px;\n}\n.plus-icon {\n\tmargin-left: 20px;\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0px;\n\theight: 48px;\n\tz-index: 100;\n}\n\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 50px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-slow);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},24950:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".mail-error--auto-margin[data-v-e027202c]{margin:auto 0}","",{version:3,sources:["webpack://./src/components/Error.vue"],names:[],mappings:"AAEC,0CACC,aAAA",sourcesContent:["\n.mail-error {\n\t&--auto-margin {\n\t\tmargin: auto 0;\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},68487:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,'[data-v-6c51c76a] .modal-wrapper .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:490px !important;max-height:500px !important}.modal-content[data-v-6c51c76a]{padding:30px 30px 20px !important}input[data-v-6c51c76a]{width:100%}[data-v-6c51c76a] input[type="text"].multiselect__input{padding:0 !important}[data-v-6c51c76a] .multiselect__single{margin-left:-18px;width:100px}[data-v-6c51c76a] .multiselect__tags{border:none !important}.all-day[data-v-6c51c76a]{margin-left:-1px;margin-top:5px;margin-bottom:5px}.eventTitle[data-v-6c51c76a]{margin-bottom:5px}.primary[data-v-6c51c76a]{height:44px !important;float:right}[data-v-6c51c76a] .mx-datepicker{width:213px}',"",{version:3,sources:["webpack://./src/components/EventModal.vue"],names:[],mappings:"AACA,kDACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAED,gCACC,iCAAA,CAED,uBACC,UAAA,CAED,wDACC,oBAAA,CAED,uCACC,iBAAA,CACA,WAAA,CAED,qCACC,sBAAA,CAED,0BACC,gBAAA,CACA,cAAA,CACA,iBAAA,CAED,6BACC,iBAAA,CAED,0BACC,sBAAA,CACA,WAAA,CAED,iCACC,WAAA",sourcesContent:["\n:deep(.modal-wrapper .modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 490px !important;\n\tmax-height: 500px !important;\n}\n.modal-content {\n\tpadding: 30px 30px 20px !important;\n}\ninput {\n\twidth: 100%;\n}\n:deep(input[type='text'].multiselect__input) {\n\tpadding: 0 !important;\n}\n:deep(.multiselect__single) {\n\tmargin-left: -18px;\n\twidth: 100px;\n}\n:deep(.multiselect__tags) {\n\tborder: none !important;\n}\n.all-day {\n\tmargin-left: -1px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n.eventTitle {\n\tmargin-bottom: 5px;\n}\n.primary {\n\theight: 44px !important;\n\tfloat: right;\n}\n:deep(.mx-datepicker) {\n\twidth: 213px;\n}\n"],sourceRoot:""}]),e.Z=i},45793:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".imip[data-v-a2165bee]{display:flex;flex-direction:column;border:solid 2px var(--color-border);border-radius:var(--border-radius-large);padding:10px}.imip__type[data-v-a2165bee]{display:flex;gap:5px;margin-left:36px}.imip__more-options[data-v-a2165bee]{display:flex;flex-direction:column;margin-top:15px;gap:10px}.imip__more-options__row[data-v-a2165bee]{display:flex;flex-direction:column}.imip__more-options__row--calendar[data-v-a2165bee]{display:flex;width:100%}.imip__more-options__row--calendar__multiselect[data-v-a2165bee]{width:100%}.imip__more-options__row--calendar__multiselect[data-v-a2165bee] .calendar-picker-option__label{max-width:unset !important}.imip__more-options__row--comment textarea[data-v-a2165bee]{display:block;width:100%}.imip__actions[data-v-a2165bee]{margin-top:15px;margin-left:36px}.imip__actions--buttons[data-v-a2165bee]{display:flex}.imip__actions--hint[data-v-a2165bee]{font-style:italic}","",{version:3,sources:["webpack://./src/components/Imip.vue"],names:[],mappings:"AACA,uBACC,YAAA,CACA,qBAAA,CACA,oCAAA,CACA,wCAAA,CACA,YAAA,CAEA,6BACC,YAAA,CACA,OAAA,CACA,gBAAA,CAGD,qCACC,YAAA,CACA,qBAAA,CACA,eAAA,CACA,QAAA,CAEA,0CACC,YAAA,CACA,qBAAA,CAEA,oDACC,YAAA,CACA,UAAA,CAEA,iEACC,UAAA,CAEA,gGACC,0BAAA,CAMF,4DACC,aAAA,CACA,UAAA,CAMJ,gCACC,eAAA,CACA,gBAAA,CAEA,yCACC,YAAA,CAGD,sCACC,iBAAA",sourcesContent:["\n.imip {\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: solid 2px var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tpadding: 10px;\n\n\t&__type {\n\t\tdisplay: flex;\n\t\tgap: 5px;\n\t\tmargin-left: 36px;\n\t}\n\n\t&__more-options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-top: 15px;\n\t\tgap: 10px;\n\n\t\t&__row {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t&--calendar {\n\t\t\t\tdisplay: flex;\n\t\t\t\twidth: 100%;\n\n\t\t\t\t&__multiselect {\n\t\t\t\t\twidth: 100%;\n\n\t\t\t\t\t:deep(.calendar-picker-option__label) {\n\t\t\t\t\t\tmax-width: unset !important;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&--comment {\n\t\t\t\ttextarea {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t&__actions {\n\t\tmargin-top: 15px;\n\t\tmargin-left: 36px;\n\n\t\t&--buttons {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t&--hint {\n\t\t\tfont-style: italic;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},97551:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".fade-enter-active[data-v-33b18a28],.fade-leave-active[data-v-33b18a28]{transition:opacity .5s}.fade-enter[data-v-33b18a28],.fade-leave-to[data-v-33b18a28]{opacity:0}.wrapper[data-v-33b18a28]{display:flex;justify-content:space-around;flex-direction:column;flex:1 auto}","",{version:3,sources:["webpack://./src/components/Loading.vue"],names:[],mappings:"AACA,wEAEC,sBAAA,CAED,6DAEC,SAAA,CAGD,0BACC,YAAA,CACA,4BAAA,CACA,qBAAA,CACA,WAAA",sourcesContent:["\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n\n.wrapper {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tflex-direction: column;\n\tflex: 1 auto;\n}\n"],sourceRoot:""}]),e.Z=i},91816:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".item-list__entry[data-v-52da2fce]{display:flex;align-items:flex-start;padding:8px}.item-list__entry .item-avatar[data-v-52da2fce]{position:relative;top:4px;border-radius:50px;width:44px;height:44px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-52da2fce 3s ease-in infinite}.item-list__entry .item__details[data-v-52da2fce]{padding-left:8px;max-height:70px;flex-grow:1;display:flex;flex-direction:column}.item-list__entry .item__details h3[data-v-52da2fce],.item-list__entry .item__details .message.message-preview[data-v-52da2fce]{white-space:nowrap;background-color:var(--color-background-hover)}.item-list__entry .item__details h3[data-v-52da2fce]{font-size:100%;margin:0;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-52da2fce 3s ease-in infinite;width:40%;height:15px}.item-list__entry .item__details .message-preview[data-v-52da2fce]{width:100%;height:15px;margin-top:5px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-52da2fce 3s ease-in infinite}.item-list__entry .item__details .message[data-v-52da2fce]{width:70%;height:15px;margin-top:5px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-52da2fce 3s ease-in infinite}@keyframes gradient-52da2fce{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}","",{version:3,sources:["webpack://./src/components/LoadingSkeleton.vue"],names:[],mappings:"AAGA,mCACC,YAAA,CACA,sBAAA,CACA,WAAA,CACA,gDACC,iBAAA,CACA,OAAA,CACA,kBAAA,CACA,UAAA,CACA,WAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAED,kDACC,gBAAA,CACA,eAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,gIAEC,kBAAA,CACA,8CAAA,CAED,qDACC,cAAA,CACA,QAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CACA,SAAA,CACA,WAAA,CAED,mEACC,UAAA,CACA,WAAA,CACA,cAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAED,2DACC,SAAA,CACA,WAAA,CACA,cAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAGF,6BACC,GACC,0BAAA,CAED,IACC,4BAAA,CAED,KACC,0BAAA,CAAA",sourcesContent:["\n\n/* skeleton */\n.item-list__entry {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tpadding: 8px;\n\t.item-avatar {\n\t\tposition: relative;\n\t\ttop: 4px;\n\t\tborder-radius: 50px;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\tbackground-size: 400% 400%;\n\t\tanimation: gradient 3s ease-in infinite;\n\t}\n\t.item__details {\n\t\tpadding-left: 8px;\n\t\tmax-height: 70px;\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\th3,\n\t\t.message.message-preview {\n\t\t\twhite-space: nowrap;\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\t\th3 {\n\t\t\tfont-size: 100%;\n\t\t\tmargin: 0;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t\twidth: 40%;\n\t\t\theight: 15px;\n\t\t}\n\t\t.message-preview {\n\t\t\twidth: 100%;\n\t\t\theight: 15px;\n\t\t\tmargin-top: 5px;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t}\n\t\t.message {\n\t\t\twidth: 70%;\n\t\t\theight: 15px;\n\t\t\tmargin-top: 5px;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t}\n\t}\n\t@keyframes gradient {\n\t\t0% {\n\t\t\tbackground-position: 0% 50%;\n\t\t}\n\t\t50% {\n\t\t\tbackground-position: 100% 50%;\n\t\t}\n\t\t100% {\n\t\t\tbackground-position: 0% 50%;\n\t\t}\n\t}\n}\n\n"],sourceRoot:""}]),e.Z=i},49885:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".nameimportant[data-v-2d8565fa] #load-more-mail-messages{margin-top:0;margin-bottom:8px}","",{version:3,sources:["webpack://./src/components/Mailbox.vue"],names:[],mappings:"AAGC,yDACC,YAAA,CACA,iBAAA",sourcesContent:["\n// Fix vertical space between sections in priority inbox\n.nameimportant {\n\t:deep(#load-more-mail-messages) {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},84567:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".v-popover>.trigger>*[data-v-3916af53]{z-index:1}.important-info[data-v-3916af53]{max-width:230px;padding:16px}.app-content-list[data-v-3916af53]{display:flex}.app-content-list-item[data-v-3916af53]:hover{background:rgba(0,0,0,0)}.app-content-list-item[data-v-3916af53]{flex:0}.button[data-v-3916af53]{background-color:var(--color-main-background);margin-bottom:3px;right:2px}.button[data-v-3916af53]:hover,.button[data-v-3916af53]:focus{background-color:var(--color-background-dark)}[data-v-3916af53] .button-vue--vue-secondary{position:sticky;top:40px;left:10px}[data-v-3916af53] .app-content-wrapper{overflow:auto}.envelope-list[data-v-3916af53]{overflow-y:auto;padding:0 4px}.information-icon[data-v-3916af53]{opacity:.7}.header__button[data-v-3916af53]{display:flex;flex:1 0 0;flex-direction:column;height:calc(100vh - var(--header-height))}","",{version:3,sources:["webpack://./src/components/MailboxThread.vue"],names:[],mappings:"AACA,uCACC,SAAA,CAGD,iCACC,eAAA,CACA,YAAA,CAGD,mCAEC,YAAA,CAGD,8CACC,wBAAA,CAED,wCACC,MAAA,CAGD,yBACC,6CAAA,CACA,iBAAA,CACA,SAAA,CAEA,8DAEC,6CAAA,CAGF,6CACC,eAAA,CACA,QAAA,CACA,SAAA,CAED,uCACC,aAAA,CAED,gCACC,eAAA,CACA,aAAA,CAED,mCACC,UAAA,CAED,iCACC,YAAA,CACA,UAAA,CACA,qBAAA,CACA,yCAAA",sourcesContent:["\n.v-popover > .trigger > * {\n\tz-index: 1;\n}\n\n.important-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list {\n\t// Required for centering the loading indicator\n\tdisplay: flex;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n.app-content-list-item {\n\tflex: 0;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\tmargin-bottom: 3px;\n\tright: 2px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n:deep(.button-vue--vue-secondary) {\n\tposition: sticky;\n\ttop:40px;\n\tleft: 10px;\n}\n:deep(.app-content-wrapper) {\n\toverflow: auto;\n}\n.envelope-list {\n\toverflow-y: auto;\n\tpadding: 0 4px;\n}\n.information-icon {\n\topacity: .7;\n}\n.header__button {\n\tdisplay: flex;\n\tflex: 1 0 0;\n\tflex-direction: column;\n\theight: calc(100vh - var(--header-height));\n}\n"],sourceRoot:""}]),e.Z=i},54563:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".mail-message-has-mdn-request[data-v-3bf60f28]{white-space:normal}","",{version:3,sources:["webpack://./src/components/MdnRequest.vue"],names:[],mappings:"AACA,+CACC,kBAAA",sourcesContent:["\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n"],sourceRoot:""}]),e.Z=i},13607:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".source-modal[data-v-44f96cc8] .modal-container{height:800px}.source-modal .source-modal-content[data-v-44f96cc8]{width:100%;height:100%;overflow-y:scroll !important}","",{version:3,sources:["webpack://./src/components/MenuEnvelope.vue"],names:[],mappings:"AAEC,gDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA",sourcesContent:["\n.source-modal {\n\t:deep(.modal-container) {\n\t\theight: 800px;\n\t}\n\n\t.source-modal-content {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow-y: scroll !important;\n\t}\n}\n\n"],sourceRoot:""}]),e.Z=i},1240:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".v-popover>.trigger>.action-item[data-v-6f922626]{border-radius:22px;background-color:var(--color-background-darker)}.message-imip[data-v-6f922626]{padding:5px 10px}","",{version:3,sources:["webpack://./src/components/Message.vue"],names:[],mappings:"AACA,kDACC,kBAAA,CACA,+CAAA,CAGD,+BACC,gBAAA",sourcesContent:["\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n\n.message-imip {\n\tpadding: 5px 10px;\n}\n"],sourceRoot:""}]),e.Z=i},52883:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,'@media screen and (max-width: 1024px){.attachment[data-v-015650ab]{width:100% !important}}@media screen and (min-width: 1025px)and (max-width: 1500px){.attachment[data-v-015650ab]{width:calc(50% - 4px) !important}}.attachment[data-v-015650ab]{height:auto;display:inline-flex;flex-wrap:wrap;justify-content:space-between;width:calc(33.3334% - 4px);margin:2px;padding:5px;position:relative;align-items:center;flex-grow:1}.attachment[data-v-015650ab]:hover{border-radius:6px}.attachment[data-v-015650ab]:hover,.attachment span[data-v-015650ab]:hover{background-color:var(--color-background-hover)}.attachment:hover.message-attachment--can-preview *[data-v-015650ab],.attachment span:hover.message-attachment--can-preview *[data-v-015650ab]{cursor:pointer}.mail-attachment-img--wrapper[data-v-015650ab]{height:44px;width:44px;overflow:hidden;display:flex;justify-content:center;position:relative;border-radius:6px}.mail-attachment-img--wrapper img[data-v-015650ab]{transition:.3s;opacity:1;width:44px;height:44px}.mail-attachment-img--wrapper .mail-attached-image[data-v-015650ab]{width:100px}.mail-attached--content[data-v-015650ab]{width:calc(100% - 100px);display:flex;flex-direction:column}.mail-attached-image[data-v-015650ab]{display:block;max-width:100%;border-radius:var(--border-radius)}.attachment-import-popover[data-v-015650ab]{right:32px;top:42px}.mail-attached-image[data-v-015650ab]:hover{opacity:.8}.attachment-name[data-v-015650ab]{display:inline-block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.attachment-size[data-v-015650ab]{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";opacity:.5;font-size:12px;line-height:14px}.attachment-icon[data-v-015650ab]{vertical-align:middle;text-align:left;margin-bottom:20px}.action-item[data-v-015650ab]{transition:.4s}.mail-message-attachments[data-v-015650ab]{overflow-x:auto;overflow-y:auto}',"",{version:3,sources:["webpack://./src/components/MessageAttachment.vue"],names:[],mappings:"AAEA,sCACC,6BACC,qBAAA,CAAA,CAIF,6DACC,6BACC,gCAAA,CAAA,CAIF,6BACC,WAAA,CACG,mBAAA,CACA,cAAA,CACA,6BAAA,CACH,0BAAA,CACG,UAAA,CACH,WAAA,CACG,iBAAA,CACA,kBAAA,CACH,WAAA,CAEA,mCACC,iBAAA,CAIF,2EAEC,8CAAA,CAEA,+IACC,cAAA,CAIF,+CACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,YAAA,CACA,sBAAA,CACA,iBAAA,CACA,iBAAA,CAEA,mDACC,cAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CAGD,oEACC,WAAA,CAIF,yCACC,wBAAA,CACA,YAAA,CACG,qBAAA,CAGJ,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CAED,4CACC,UAAA,CACA,QAAA,CAED,4CACC,UAAA,CAED,kCACC,oBAAA,CACA,UAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CAGD,kCACC,qBAAA,CACA,eAAA,CACA,kBAAA,CAED,8BACC,cAAA,CAED,2CACC,eAAA,CACA,eAAA",sourcesContent:["\n\n@media screen and (max-width: 1024px) {\n\t.attachment{\n\t\twidth: 100% !important;\n\t}\n}\n\n@media screen and (min-width: 1025px) and (max-width: 1500px) {\n\t.attachment{\n\t\twidth: calc(50% - 4px)!important;\n\t}\n}\n\n.attachment {\n\theight: auto;\n    display: inline-flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n\twidth: calc(33.3334% - 4px);\n    margin: 2px;\n\tpadding: 5px;\n    position: relative;\n    align-items: center;\n\tflex-grow: 1;\n\n\t&:hover {\n\t\tborder-radius: 6px;\n\t}\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\n\t&.message-attachment--can-preview * {\n\t\tcursor: pointer;\n\t}\n}\n\n.mail-attachment-img--wrapper {\n\theight: 44px;\n\twidth: 44px;\n\toverflow: hidden;\n\tdisplay:flex;\n\tjustify-content: center;\n\tposition: relative;\n\tborder-radius: 6px;\n\n\timg {\n\t\ttransition: 0.3s;\n\t\topacity: 1;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t}\n\n\t.mail-attached-image {\n\t\twidth: 100px;\n\t}\n}\n\n.mail-attached--content {\n\twidth: calc(100% - 100px);\n\tdisplay: flex;\n    flex-direction: column;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n}\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: 100%;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n\tfont-size: 12px;\n\tline-height: 14px;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: left;\n\tmargin-bottom: 20px;\n}\n.action-item {\n\ttransition: 0.4s;\n}\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n"],sourceRoot:""}]),e.Z=i},7007:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".attachments{width:100%;box-sizing:border-box;position:relative;display:flex;flex-wrap:wrap;margin:10px 0}.attachments-button-wrapper{text-align:center;display:flex;align-items:center}.show-more-attachments{display:flex;align-items:center;cursor:pointer;padding:2px 0;color:var(--color-text-lighter)}.show-more-attachments span{cursor:pointer}.show-more-attachments:hover{color:var(--color-main-text)}@keyframes spin{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}100%{transform:rotate(360deg)}}.spin{animation:spin 1s linear infinite}.attachment-link{cursor:pointer;display:flex;align-items:center;color:var(--color-text-lighter)}.attachment-link:hover{color:var(--color-main-text)}.attachment-link span{margin:0 4px 0 16px}.oc-dialog{z-index:10000000}.mail-message-attachments{display:flex;flex-wrap:wrap;padding:10px 6px 10px 46px;margin-top:4px;margin-bottom:0;position:sticky;bottom:0;background:linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0))}.mail-message-attachments--wrapper{display:flex;width:100%;height:auto;overflow:hidden;max-height:none}.mail-message-attachments--wrapper.hide{display:flex;max-height:70px}","",{version:3,sources:["webpack://./src/components/MessageAttachments.vue"],names:[],mappings:"AACA,aACC,UAAA,CACG,qBAAA,CACA,iBAAA,CACA,YAAA,CACA,cAAA,CACA,aAAA,CAKJ,4BACC,iBAAA,CACA,YAAA,CACA,kBAAA,CAGD,uBACC,YAAA,CACG,kBAAA,CACH,cAAA,CACA,aAAA,CACA,+BAAA,CAEA,4BACC,cAAA,CAGD,6BACC,4BAAA,CAIF,gBACE,GACE,sBAAA,CAEF,IACE,wBAAA,CAEF,KACE,wBAAA,CAAA,CAIJ,MACE,iCAAA,CAGF,iBACC,cAAA,CACA,YAAA,CACA,kBAAA,CACA,+BAAA,CAEA,uBACC,4BAAA,CAGD,sBACC,mBAAA,CAIF,WACC,gBAAA,CAED,0BACC,YAAA,CACA,cAAA,CACA,0BAAA,CACA,cAAA,CACA,eAAA,CACA,eAAA,CACA,QAAA,CACA,wHAAA,CAED,mCACC,YAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,eAAA,CAGD,wCACC,YAAA,CACA,eAAA",sourcesContent:["\n.attachments {\n\twidth: 100%;\n    box-sizing: border-box;\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    margin: 10px 0;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.show-more-attachments {\n\tdisplay: flex;\n    align-items: center;\n\tcursor: pointer;\n\tpadding: 2px 0;\n\tcolor: var(--color-text-lighter);\n\n\tspan {\n\t\tcursor: pointer;\n\t}\n\n\t&:hover {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  50% {\n    transform: rotate(180deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n.attachment-link {\n\tcursor: pointer;\n\tdisplay:flex;\n\talign-items: center;\n\tcolor: var(--color-text-lighter);\n\n\t&:hover {\n\t\tcolor: var(--color-main-text);\n\t}\n\n\tspan {\n\t\tmargin: 0 4px 0 16px;\n\t}\n}\n\n.oc-dialog {\n\tz-index: 10000000;\n}\n.mail-message-attachments {\n\tdisplay:flex;\n\tflex-wrap: wrap;\n\tpadding: 10px 6px 10px 46px;\n\tmargin-top: 4px;\n\tmargin-bottom: 0;\n\tposition:sticky;\n\tbottom:0;\n\tbackground: linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0));\n}\n.mail-message-attachments--wrapper {\n\tdisplay:flex;\n\twidth:100%;\n\theight:auto;\n\toverflow: hidden;\n\tmax-height: none;\n}\n\n.mail-message-attachments--wrapper.hide {\n\tdisplay:flex;\n\tmax-height: 70px;\n}\n"],sourceRoot:""}]),e.Z=i},87131:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".html-message-body[data-v-08404f42]{margin-left:50px;margin-top:2px;display:flex;flex-direction:column;height:100%;background-color:#fff}#mail-message-has-blocked-content[data-v-08404f42]{margin-left:10px;color:var(--color-text-maxcontrast) !important}#message-container[data-v-08404f42]{flex:1;display:flex;background-color:#fff}#message-container.scroll[data-v-08404f42]{max-height:50vh;overflow-y:auto}[data-v-08404f42] .button-vue__text{border:none !important;font-weight:normal !important;padding-left:14px !important;padding-right:10px !important;text-decoration:underline !important}.message-frame[data-v-08404f42]{width:100%}[data-v-08404f42] .button-vue__icon{display:none !important}","",{version:3,sources:["webpack://./src/components/MessageHTMLBody.vue"],names:[],mappings:"AAEA,oCACC,gBAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,qBAAA,CAED,mDACC,gBAAA,CACA,8CAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,2CACC,eAAA,CACA,eAAA,CAGF,oCACC,sBAAA,CACA,6BAAA,CACA,4BAAA,CACA,6BAAA,CACA,oCAAA,CAED,gCACC,UAAA,CAED,oCACC,uBAAA",sourcesContent:["\n// account for 8px margin on iframe body\n.html-message-body {\n\tmargin-left: 50px;\n\tmargin-top: 2px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 10px;\n\tcolor: var(--color-text-maxcontrast) !important;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t&.scroll {\n\t\tmax-height: 50vh;\n\t\toverflow-y: auto;\n\t}\n}\n:deep(.button-vue__text) {\n\tborder: none !important;\n\tfont-weight: normal !important;\n\tpadding-left: 14px !important;\n\tpadding-right: 10px !important;\n\ttext-decoration: underline !important;\n}\n.message-frame {\n\twidth: 100%;\n}\n:deep(.button-vue__icon) {\n\tdisplay: none !important;\n}\n"],sourceRoot:""}]),e.Z=i},44141:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".message-loading-skeleton[data-v-3e38ab00]{display:flex;flex-grow:1;align-items:flex-start;padding:8px;width:100%}.message-loading-skeleton__body[data-v-3e38ab00]{max-height:500px;max-width:1200px;flex:1 1 100%;display:flex;flex-direction:column;margin-left:50px}.message-loading-skeleton__body__line-one[data-v-3e38ab00],.message-loading-skeleton__body__line-two[data-v-3e38ab00],.message-loading-skeleton__body__line-three[data-v-3e38ab00],.message-loading-skeleton__body__line-four[data-v-3e38ab00],.message-loading-skeleton__body__line-five[data-v-3e38ab00],.message-loading-skeleton__body__line-six[data-v-3e38ab00]{white-space:nowrap;height:13px;background:linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));background-size:400% 400%;animation:gradient-3e38ab00 3s ease-in infinite}.message-loading-skeleton__body__line-one[data-v-3e38ab00]{width:10%;margin-bottom:25px}.message-loading-skeleton__body__line-two[data-v-3e38ab00]{width:80%;margin-bottom:6px}.message-loading-skeleton__body__line-three[data-v-3e38ab00]{width:50%;margin-bottom:6px}.message-loading-skeleton__body__line-four[data-v-3e38ab00]{width:70%;margin-bottom:6px}.message-loading-skeleton__body__line-five[data-v-3e38ab00]{width:40%;margin-bottom:25px}.message-loading-skeleton__body__line-six[data-v-3e38ab00]{width:30%}@keyframes gradient-3e38ab00{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}","",{version:3,sources:["webpack://./src/components/MessageLoadingSkeleton.vue"],names:[],mappings:"AAGA,2CACC,YAAA,CACA,WAAA,CACA,sBAAA,CACA,WAAA,CACA,UAAA,CACA,iDACC,gBAAA,CACA,gBAAA,CACA,aAAA,CACA,YAAA,CACA,qBAAA,CACA,gBAAA,CACA,sWAMC,kBAAA,CACA,WAAA,CACA,+JAAA,CACA,yBAAA,CACA,+CAAA,CAED,2DACC,SAAA,CACA,kBAAA,CAED,2DACC,SAAA,CACA,iBAAA,CAED,6DACC,SAAA,CACA,iBAAA,CAED,4DACC,SAAA,CACA,iBAAA,CAED,4DACC,SAAA,CACA,kBAAA,CAED,2DACC,SAAA,CAGF,6BACE,GACC,0BAAA,CAED,IACC,4BAAA,CAED,KACC,0BAAA,CAAA",sourcesContent:["\n\n/* skeleton */\n.message-loading-skeleton {\n\tdisplay: flex;\n\tflex-grow: 1;\n\talign-items: flex-start;\n\tpadding: 8px;\n\twidth: 100%;\n\t&__body {\n\t\tmax-height: 500px;\n\t\tmax-width: 1200px;\n\t\tflex: 1 1 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-left: 50px;\n\t\t&__line-one,\n\t\t&__line-two,\n\t\t&__line-three,\n\t\t&__line-four,\n\t\t&__line-five,\n\t\t&__line-six {\n\t\t\twhite-space: nowrap;\n\t\t\theight: 13px;\n\t\t\tbackground: linear-gradient(-45deg, var(--color-background-hover), var(--color-background-dark), var(--color-background-darker), var(--color-placeholder-light));\n\t\t\tbackground-size: 400% 400%;\n\t\t\tanimation: gradient 3s ease-in infinite;\n\t\t}\n\t\t&__line-one {\n\t\t\twidth: 10%;\n\t\t\tmargin-bottom: 25px;\n\t\t}\n\t\t&__line-two {\n\t\t\twidth: 80%;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__line-three {\n\t\t\twidth: 50%;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__line-four {\n\t\t\twidth: 70%;\n\t\t\tmargin-bottom: 6px;\n\t\t}\n\t\t&__line-five {\n\t\t\twidth: 40%;\n\t\t\tmargin-bottom: 25px;\n\t\t}\n\t\t&__line-six {\n\t\t\twidth: 30%;\n\t\t}\n\t}\n\t@keyframes gradient {\n\t\t 0% {\n\t\t\t background-position: 0% 50%;\n\t\t }\n\t\t 50% {\n\t\t\t background-position: 100% 50%;\n\t\t }\n\t\t 100% {\n\t\t\t background-position: 0% 50%;\n\t\t }\n\t }\n}\n\n"],sourceRoot:""}]),e.Z=i},76598:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".quoted-text{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}","",{version:3,sources:["webpack://./src/components/MessagePlainTextBody.vue"],names:[],mappings:"AACA,aACC,2CAAA,CAGC,oBAAA",sourcesContent:["\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},29250:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".message-container[data-v-5820b73d],.mail-signature[data-v-5820b73d]{white-space:pre-wrap}.mail-signature[data-v-5820b73d],.quoted[data-v-5820b73d]{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}","",{version:3,sources:["webpack://./src/components/MessagePlainTextBody.vue"],names:[],mappings:"AACA,qEAEC,oBAAA,CAED,0DACC,2CAAA,CAGC,oBAAA",sourcesContent:["\n.message-container,\n.mail-signature {\n\twhite-space: pre-wrap;\n}\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},34793:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"@media only screen and (max-width: 600px){[data-v-1d73321b] .modal-container{max-width:80%}}[data-v-1d73321b] .modal-wrapper .modal-container{overflow-y:auto !important;overflow-x:auto !important;height:90%;max-height:700px !important}","",{version:3,sources:["webpack://./src/components/NewMessageModal.vue"],names:[],mappings:"AACA,0CACC,mCACC,aAAA,CAAA,CAGF,kDACC,0BAAA,CACA,0BAAA,CAEA,UAAA,CAEA,2BAAA",sourcesContent:["\n@media only screen and (max-width: 600px) {\n\t:deep(.modal-container) {\n\t\tmax-width: 80%;\n\t}\n}\n:deep(.modal-wrapper .modal-container) {\n\toverflow-y: auto !important;\n\toverflow-x: auto !important;\n\t// from original Modal max-height\n\theight: 90%;\n\t// Max editor + modal height\n\tmax-height: 700px !important;\n}\n"],sourceRoot:""}]),e.Z=i},88143:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"[data-v-41dab610] .button-vue--vue-secondary{box-shadow:none}","",{version:3,sources:["webpack://./src/components/Outbox.vue"],names:[],mappings:"AACA,6CACC,eAAA",sourcesContent:["\n:deep(.button-vue--vue-secondary) {\n\tbox-shadow: none;\n}\n"],sourceRoot:""}]),e.Z=i},42254:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".outbox-message[data-v-544e29da]{list-style:none}.outbox-message.active[data-v-544e29da]{background-color:var(--color-background-dark);border-radius:16px}.outbox-message .account-color[data-v-544e29da]{position:absolute;left:0;width:2px;height:69px;z-index:1}","",{version:3,sources:["webpack://./src/components/OutboxMessageListItem.vue"],names:[],mappings:"AACA,iCACC,eAAA,CACA,wCACC,6CAAA,CACA,kBAAA,CAGD,gDACC,iBAAA,CACA,MAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA",sourcesContent:["\n.outbox-message {\n\tlist-style: none;\n\t&.active {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: 16px;\n\t}\n\n\t.account-color {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\twidth: 2px;\n\t\theight: 69px;\n\t\tz-index: 1;\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},44921:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".user-bubble__title[data-v-5bad26b0]{max-width:30vw}.user-bubble-email[data-v-5bad26b0]{margin:10px}.contact-menu[data-v-5bad26b0]{display:flex;flex-wrap:wrap}.contact-popover[data-v-5bad26b0]{display:inline-block}.contact-wrapper[data-v-5bad26b0]{padding:10px;min-width:300px}.contact-wrapper a[data-v-5bad26b0]{opacity:.7}.contact-wrapper a[data-v-5bad26b0]:hover{opacity:1}.contact-input-wrapper[data-v-5bad26b0]{margin-top:10px;margin-bottom:10px}.contact-input-wrapper input[data-v-5bad26b0],.contact-input-wrapper .multiselect[data-v-5bad26b0]{width:100%}.contact-existing[data-v-5bad26b0]{font-size:small !important}[data-v-5bad26b0] .button-vue__text{font-weight:normal !important}","",{version:3,sources:["webpack://./src/components/RecipientBubble.vue"],names:[],mappings:"AACA,qCACC,cAAA,CAED,oCACC,WAAA,CAGD,+BACC,YAAA,CACA,cAAA,CAED,kCACC,oBAAA,CAED,kCACC,YAAA,CACA,eAAA,CAEA,oCACC,UAAA,CAED,0CACC,SAAA,CAGF,wCACC,eAAA,CACG,kBAAA,CACH,mGAEC,UAAA,CAIF,mCACC,0BAAA,CAED,oCACC,6BAAA",sourcesContent:["\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n.user-bubble-email {\n\tmargin: 10px;\n}\n\n.contact-menu {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n.contact-popover {\n\tdisplay: inline-block;\n}\n.contact-wrapper {\n\tpadding:10px;\n\tmin-width: 300px;\n\n\ta {\n\t\topacity: 0.7;\n\t}\n\ta:hover {\n\t\topacity: 1;\n\t}\n}\n.contact-input-wrapper {\n\tmargin-top: 10px;\n    margin-bottom: 10px;\n\tinput,\n\t.multiselect {\n\t\twidth: 100%;\n\t}\n}\n\n.contact-existing {\n\tfont-size: small !important;\n}\n:deep(.button-vue__text) {\n\tfont-weight: normal !important;\n}\n"],sourceRoot:""}]),e.Z=i},53521:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".multiselect .multiselect__tags .multiselect__tags-wrap .multiselect__tag--recipient[data-v-f8efac8e]{padding:0;border-radius:25px;border-color:rgba(0,0,0,0);background-color:var(--color-background-dark);height:24px}.multiselect .multiselect__tags .multiselect__tags-wrap .multiselect__tag--recipient>span.option[data-v-f8efac8e]{margin-left:0}.multiselect__tag--recipient .action-item--single[data-v-f8efac8e]{width:auto;min-width:24px;height:24px;position:absolute;right:-7px}.multiselect__tag--recipient .action-item--single .material-design-icon[data-v-f8efac8e]{height:24px;width:24px}.delete-recipient[data-v-f8efac8e]{display:inline-flex;align-items:center;justify-content:center;cursor:pointer;height:24px;width:24px;min-width:24px;margin-left:6px;border-radius:50%}.delete-recipient[data-v-f8efac8e]:hover{background:var(--color-background-darker)}[data-v-f8efac8e] .option{margin-left:10px}","",{version:3,sources:["webpack://./src/components/RecipientListItem.vue"],names:[],mappings:"AACA,sGAIC,SAAA,CACA,kBAAA,CACA,0BAAA,CACA,6CAAA,CACA,WAAA,CAEA,kHACC,aAAA,CAGF,mEACC,UAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CAED,yFACC,WAAA,CACA,UAAA,CAED,mCACC,mBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CACA,eAAA,CACA,iBAAA,CAEA,yCACC,yCAAA,CAGF,0BACC,gBAAA",sourcesContent:["\n.multiselect\n\t.multiselect__tags\n\t.multiselect__tags-wrap\n\t.multiselect__tag--recipient {\n\tpadding: 0;\n\tborder-radius: 25px;\n\tborder-color: transparent;\n\tbackground-color: var(--color-background-dark);\n\theight: 24px;\n\n\t& > span.option {\n\t\tmargin-left: 0\n\t}\n}\n.multiselect__tag--recipient .action-item--single {\n\twidth: auto;\n\tmin-width: 24px;\n\theight: 24px;\n\tposition: absolute;\n\tright: -7px;\n}\n.multiselect__tag--recipient .action-item--single .material-design-icon {\n\theight: 24px;\n\twidth: 24px;\n}\n.delete-recipient {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n\theight: 24px;\n\twidth: 24px;\n\tmin-width: 24px;\n\tmargin-left: 6px;\n\tborder-radius: 50%;\n\n\t&:hover {\n\t\tbackground: var(--color-background-darker);\n\t}\n}\n:deep(.option) {\n\tmargin-left: 10px;\n}\n"],sourceRoot:""}]),e.Z=i},21890:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".search-messages{min-height:52px;margin:3px 0 0 52px;border-right:1px solid var(--color-border);position:relative;display:flex;align-items:center}.search-messages input{width:calc(100% - 45px);margin:4px 6px}.search-messages .action-item--single{border-radius:var(--border-radius-pill);border:none;background:none;transition:.4s}.search-messages .action-item--single:hover{transition:.4s;background:var(--color-primary-element)}.search-input{width:100%}.checkbox-radio-switch__label{background:none !important;padding:0 !important;margin:0 !important}.tag-group__search{box-sizing:border-box;position:relative;margin:3px 3px;padding:0 6px}.tag-group__bg{position:absolute;left:0;right:0;bottom:0;top:0;opacity:.4;border-radius:14px;z-index:1}.tag-group__label{font-weight:bold;font-size:12px;position:relative;z-index:2}.search-modal .modal-container{min-height:auto;overflow:visible !important;position:relative;display:flex !important;flex-direction:column}.search-modal .modal-container .modal-title{padding:16px 30px 0 30px;position:relative;display:inline-block}.search-modal .modal-container .modal-inner--content{padding:16px 0 36px 0;overflow-y:scroll;width:calc(100% - 2px)}.search-modal .modal-container .modal-inner--content .marked-as .modal-inner-inline{display:inline-block;width:32%}.search-modal .modal-container .modal-inner--content .marked-as .modal-inner-inline:last-child{width:100%}.search-modal .modal-container .modal-inner--content .range{display:flex;flex-wrap:wrap}.search-modal .modal-container .modal-inner--content .range .modal-inner-inline{width:calc(50% - 5px)}.search-modal .modal-container .modal-inner--content .range .modal-inner-inline:first-child{margin-right:5px}.search-modal .modal-container .modal-inner--content .range .modal-inner-inline:last-child{margin-left:5px}.multiselect-search-tags{width:100%}.multiselect-search-tags .multiselect__tags .multiselect__tags-wrap{flex-wrap:wrap !important}.modal-inner-field--right{display:flex;align-items:center;justify-content:flex-end;padding:0 33px;margin-top:15px}.modal-inner--field{display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:15px;padding:0 12px 0 30px}.modal-inner--field .checkbox-radio-switch{margin:0 8px 0 0}.modal-inner--field>label{font-weight:bold;width:120px}.modal-inner--field .modal-inner--container{width:calc(100% - 120px)}.modal-inner--field .modal-inner--container .multiselect{width:100%}.modal-wrapper--normal .modal-container{position:relative}.button-vue.search-messages--close.button-vue--icon-only{position:absolute;width:auto;height:auto;z-index:5;right:45px;left:auto;box-shadow:none !important;background:rgba(0,0,0,0) !important;border:none !important;padding:0 !important;top:5px}.button-reset-filter{margin-right:10px}.filter-changed{width:6px;height:6px;background:var(--color-error);position:absolute;z-index:10;right:9px;border-radius:50%;top:10px}.mx-datepicker{width:100%}","",{version:3,sources:["webpack://./src/components/SearchMessages.vue"],names:[],mappings:"AACA,iBACC,eAAA,CACA,mBAAA,CACA,0CAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CAEA,uBACC,uBAAA,CACA,cAAA,CAGD,sCACC,uCAAA,CACA,WAAA,CACA,eAAA,CACA,cAAA,CAGD,4CACC,cAAA,CACA,uCAAA,CAIF,cACC,UAAA,CAGD,8BACC,0BAAA,CACA,oBAAA,CACA,mBAAA,CAGD,mBACC,qBAAA,CACA,iBAAA,CACA,cAAA,CACA,aAAA,CAGD,eACC,iBAAA,CACA,MAAA,CACA,OAAA,CACA,QAAA,CACA,KAAA,CACA,UAAA,CACA,kBAAA,CACA,SAAA,CAGD,kBACC,gBAAA,CACA,cAAA,CACA,iBAAA,CACA,SAAA,CAGD,+BACC,eAAA,CACA,2BAAA,CACA,iBAAA,CACA,uBAAA,CACA,qBAAA,CAEA,4CACC,wBAAA,CACA,iBAAA,CAEA,oBAAA,CAGD,qDACC,qBAAA,CACA,iBAAA,CACA,sBAAA,CAEA,oFACC,oBAAA,CACA,SAAA,CAEA,+FACC,UAAA,CAGF,4DACC,YAAA,CACA,cAAA,CAEA,gFACC,qBAAA,CACA,4FACC,gBAAA,CAED,2FACC,eAAA,CAOL,yBACC,UAAA,CAGD,oEACC,yBAAA,CAGD,0BACC,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,cAAA,CACA,eAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,6BAAA,CACA,kBAAA,CACA,qBAAA,CAEA,2CACC,gBAAA,CAGD,0BACC,gBAAA,CACA,WAAA,CAGD,4CACC,wBAAA,CAEA,yDACC,UAAA,CAKH,wCACC,iBAAA,CAGD,yDACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,UAAA,CACA,SAAA,CACA,0BAAA,CACA,mCAAA,CACA,sBAAA,CACA,oBAAA,CACA,OAAA,CAGD,qBACC,iBAAA,CAGD,gBACC,SAAA,CACA,UAAA,CACA,6BAAA,CACA,iBAAA,CACA,UAAA,CACA,SAAA,CACA,iBAAA,CACA,QAAA,CAED,eACC,UAAA",sourcesContent:["\n.search-messages {\n\tmin-height: 52px;\n\tmargin: 3px 0 0 52px;\n\tborder-right: 1px solid var(--color-border);\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\n\tinput {\n\t\twidth: calc(100% - 45px);\n\t\tmargin: 4px 6px;\n\t}\n\n\t.action-item--single {\n\t\tborder-radius: var(--border-radius-pill);\n\t\tborder: none;\n\t\tbackground: none;\n\t\ttransition: 0.4s;\n\t}\n\n\t.action-item--single:hover {\n\t\ttransition: 0.4s;\n\t\tbackground: var(--color-primary-element);\n\t}\n}\n\n.search-input {\n\twidth: 100%;\n}\n\n.checkbox-radio-switch__label {\n\tbackground: none !important;\n\tpadding: 0 !important;\n\tmargin: 0 !important;\n}\n\n.tag-group__search {\n\tbox-sizing: border-box;\n\tposition: relative;\n\tmargin: 3px 3px;\n\tpadding: 0 6px;\n}\n\n.tag-group__bg {\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\ttop: 0;\n\topacity: 0.4;\n\tborder-radius: 14px;\n\tz-index: 1;\n}\n\n.tag-group__label {\n\tfont-weight: bold;\n\tfont-size: 12px;\n\tposition: relative;\n\tz-index: 2;\n}\n\n.search-modal .modal-container {\n\tmin-height: auto;\n\toverflow: visible !important;\n\tposition: relative;\n\tdisplay: flex !important;\n\tflex-direction: column;\n\n\t.modal-title {\n\t\tpadding: 16px 30px 0 30px;\n\t\tposition: relative;\n\t\t/* needs while modal-container__close not set */\n\t\tdisplay: inline-block;\n\t}\n\n\t.modal-inner--content {\n\t\tpadding: 16px 0 36px 0;\n\t\toverflow-y: scroll;\n\t\twidth: calc(100% - 2px);\n\n\t\t.marked-as .modal-inner-inline {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 32%;\n\n\t\t\t&:last-child {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t}\n\t\t.range {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\n\t\t\t.modal-inner-inline {\n\t\t\t\twidth: calc(50% - 5px);\n\t\t\t\t&:first-child {\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t}\n\t\t\t\t&:last-child {\n\t\t\t\t\tmargin-left: 5px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n.multiselect-search-tags {\n\twidth: 100%;\n}\n\n.multiselect-search-tags .multiselect__tags .multiselect__tags-wrap {\n\tflex-wrap: wrap !important;\n}\n\n.modal-inner-field--right {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tpadding: 0 33px;\n\tmargin-top: 15px;\n}\n\n.modal-inner--field {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n\tmargin-bottom: 15px;\n\tpadding: 0 12px 0 30px;\n\n\t.checkbox-radio-switch {\n\t\tmargin: 0 8px 0 0;\n\t}\n\n\t& > label {\n\t\tfont-weight: bold;\n\t\twidth: 120px;\n\t}\n\n\t.modal-inner--container {\n\t\twidth: calc(100% - 120px);\n\n\t\t.multiselect {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n}\n\n.modal-wrapper--normal .modal-container {\n\tposition: relative\n}\n\n.button-vue.search-messages--close.button-vue--icon-only {\n\tposition: absolute;\n\twidth: auto;\n\theight: auto;\n\tz-index: 5;\n\tright: 45px;\n\tleft: auto;\n\tbox-shadow: none !important;\n\tbackground: transparent !important;\n\tborder: none !important;\n\tpadding: 0 !important;\n\ttop: 5px\n}\n\n.button-reset-filter {\n\tmargin-right: 10px;\n}\n\n.filter-changed {\n\twidth: 6px;\n\theight: 6px;\n\tbackground: var(--color-error);\n\tposition: absolute;\n\tz-index: 10;\n\tright: 9px;\n\tborder-radius: 50%;\n\ttop: 10px;\n}\n.mx-datepicker {\n\twidth:100%;\n}\n"],sourceRoot:""}]),e.Z=i},57627:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"[data-v-94002d6a] .modal-content{padding:0 20px 20px 20px;max-height:calc(100vh - 210px);overflow-y:auto}[data-v-94002d6a] .modal-container{width:auto !important}.tag-title[data-v-94002d6a]{margin-top:20px;margin-left:10px}.tag-group[data-v-94002d6a]{display:block;position:relative;margin:0 1px;overflow:hidden;left:4px}.tag-actions[data-v-94002d6a]{background-color:rgba(0,0,0,0);border:none;float:right}.tag-actions[data-v-94002d6a]:hover,.tag-actions[data-v-94002d6a]:focus{background-color:var(--color-border-dark)}.tag-group__label[data-v-94002d6a]{z-index:2;font-weight:bold;border:none;background-color:rgba(0,0,0,0);padding-left:10px;padding-right:10px;overflow:hidden;text-overflow:ellipsis;max-width:94px}.app-navigation-entry-bullet-wrapper[data-v-94002d6a]{width:44px;height:44px;display:inline-block;position:absolute;list-style:none}.app-navigation-entry-bullet-wrapper .color0[data-v-94002d6a]{width:30px !important;height:30px;border-radius:50%;background-size:14px;margin-top:-65px;margin-left:180px;z-index:2;display:flex;position:relative}.icon-colorpicker[data-v-94002d6a]{background-image:var(--icon-add-fff)}.tagButton[data-v-94002d6a]{display:inline-block;margin-left:10px}.action-item[data-v-94002d6a]{right:8px;float:right}.create-tag[data-v-94002d6a]{list-style:none}@media only screen and (max-width: 512px){[data-v-94002d6a] .modal-container{top:100px !important;max-height:calc(100vh - 170px) !important}}","",{version:3,sources:["webpack://./src/components/TagModal.vue"],names:[],mappings:"AACA,iCACC,wBAAA,CACA,8BAAA,CACA,eAAA,CAED,mCACC,qBAAA,CAED,4BACC,eAAA,CACA,gBAAA,CAED,4BACC,aAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,WAAA,CACA,wEAEC,yCAAA,CAGF,mCACC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,8BAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,cAAA,CAED,sDACC,UAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,eAAA,CAEA,8DACC,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,SAAA,CACA,YAAA,CACA,iBAAA,CAGF,mCACC,oCAAA,CAED,4BACC,oBAAA,CACA,gBAAA,CAGD,8BACC,SAAA,CACA,WAAA,CAED,6BACC,eAAA,CAED,0CACC,mCACA,oBAAA,CACA,yCAAA,CAAA",sourcesContent:["\n:deep(.modal-content) {\n\tpadding: 0 20px 20px 20px;\n\tmax-height: calc(100vh - 210px);\n\toverflow-y: auto;\n}\n:deep(.modal-container) {\n\twidth: auto !important;\n}\n.tag-title {\n\tmargin-top: 20px;\n\tmargin-left: 10px;\n}\n.tag-group {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.tag-actions {\n\tbackground-color: transparent;\n\tborder: none;\n\tfloat: right;\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-border-dark);\n\t}\n}\n.tag-group__label {\n\tz-index: 2;\n\tfont-weight: bold;\n\tborder: none;\n\tbackground-color: transparent;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmax-width: 94px;\n}\n.app-navigation-entry-bullet-wrapper {\n\twidth: 44px;\n\theight: 44px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tlist-style: none;\n\n\t.color0 {\n\t\twidth: 30px !important;\n\t\theight: 30px;\n\t\tborder-radius: 50%;\n\t\tbackground-size: 14px;\n\t\tmargin-top: -65px;\n\t\tmargin-left: 180px;\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n}\n.icon-colorpicker {\n\tbackground-image: var(--icon-add-fff);\n}\n.tagButton {\n\tdisplay: inline-block;\n\tmargin-left: 10px;\n}\n\n.action-item {\n\tright: 8px;\n\tfloat: right;\n}\n.create-tag {\n\tlist-style: none;\n}\n@media only screen and (max-width: 512px) {\n\t:deep(.modal-container) {\n\ttop: 100px !important;\n\tmax-height: calc(100vh - 170px) !important\n\t}\n}\n"],sourceRoot:""}]),e.Z=i},11305:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"#mail-message{margin-bottom:30vh}#mail-message .icon-loading:only-child:after{margin-top:20px}.mail-message-body{flex:1;margin-bottom:30px;position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:0;background:-webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-o-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-moz-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0))}#mail-thread-header-fields{width:0;padding-left:70px;flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}.attachment-popover{position:sticky;bottom:12px;text-align:center}.tooltip-inner{text-align:left}#mail-content{margin:10px 38px 0 59px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}@media print{#mail-thread-header-fields{position:relative}.app-content-details,.splitpanes__pane-details{max-width:unset !important;width:100% !important}#header,.app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.splitpanes__pane-list,.mail-message-attachments{display:none !important}.app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}.message-source{font-family:monospace;white-space:pre-wrap;user-select:text}.avatar-header{max-height:24px;overflow:hidden}.avatar-more{display:inline;background-color:var(--color-background-dark);padding:0px 0px 1px 1px;border-radius:10px;cursor:pointer}.avatar-hidden{visibility:hidden}.popover__wrapper{max-width:500px}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{margin-right:4px}.user-bubble__title{cursor:pointer}","",{version:3,sources:["webpack://./src/components/Thread.vue"],names:[],mappings:"AACA,cACC,kBAAA,CAGC,6CACC,eAAA,CAKH,mBACC,MAAA,CACA,kBAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,cAAA,CAIA,iCAAA,CACA,WAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,0HAAA,CACA,qHAAA,CACA,uHAAA,CACA,kHAAA,CAGD,2BAEC,OAAA,CACA,iBAAA,CAEA,aAAA,CACA,2DAEC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGD,yCACC,UAAA,CACA,2CACC,gBAAA,CAKH,oBACC,eAAA,CACA,WAAA,CACA,iBAAA,CAGD,eACC,eAAA,CAGD,cACC,uBAAA,CAGD,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,6BAAA,CACA,oBAAA,CACA,oBAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+BAAA,CAAA,CAIF,aACC,2BACC,iBAAA,CAED,+CAEC,0BAAA,CACA,qBAAA,CAED,+KASC,uBAAA,CAED,aACC,wBAAA,CAED,mBACC,0BAAA,CAAA,CAIF,gBACC,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,eACC,eAAA,CACA,eAAA,CAED,aACC,cAAA,CACA,6CAAA,CACA,uBAAA,CACA,kBAAA,CACA,cAAA,CAED,eACC,iBAAA,CAED,kBACC,eAAA,CAGD,yCACC,YAAA,CAED,sBACC,gBAAA,CAED,oBACC,cAAA",sourcesContent:["\n#mail-message {\n\tmargin-bottom: 30vh;\n\n\t.icon-loading {\n\t\t&:only-child:after {\n\t\t\tmargin-top: 20px;\n\t\t}\n\t}\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: 30px;\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: 0;\n\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\n\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 70px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: 12px;\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: left;\n}\n\n#mail-content {\n\tmargin: 10px 38px 0 59px;\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n@media print {\n\t#mail-thread-header-fields {\n\t\tposition: relative;\n\t}\n\t.app-content-details,\n\t.splitpanes__pane-details {\n\t\tmax-width: unset !important;\n\t\twidth: 100% !important;\n\t}\n\t#header,\n\t.app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.splitpanes__pane-list,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t.app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n\n.message-source {\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n\tuser-select: text;\n}\n\n.avatar-header {\n\tmax-height: 24px;\n\toverflow: hidden;\n}\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tpadding: 0px 0px 1px 1px;\n\tborder-radius: 10px;\n\tcursor: pointer;\n}\n.avatar-hidden {\n\tvisibility: hidden;\n}\n.popover__wrapper {\n\tmax-width: 500px;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n.user-bubble__wrapper {\n\tmargin-right: 4px;\n}\n.user-bubble__title {\n\tcursor: pointer;\n}\n"],sourceRoot:""}]),e.Z=i},31416:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".sender[data-v-347bd6c8]{margin-left:8px}.right[data-v-347bd6c8]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-left:10px;height:44px}.right .app-content-list-item-menu[data-v-347bd6c8]{margin-left:4px}.right .timestamp[data-v-347bd6c8]{margin-right:10px;color:var(--color-text-maxcontrast);white-space:nowrap;margin-bottom:0}.button[data-v-347bd6c8]{color:var(--color-main-background)}.button[data-v-347bd6c8]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-347bd6c8]{background-color:var(--color-primary);opacity:1;margin-bottom:0}.envelope[data-v-347bd6c8]{display:flex;flex-direction:column;border:2px solid var(--color-border);border-radius:16px;margin-left:10px;margin-right:10px;background-color:var(--color-main-background);padding-bottom:28px;animation:show-347bd6c8 200ms 90ms cubic-bezier(0.17, 0.67, 0.83, 0.67) forwards;opacity:.5;transform-origin:top center}@keyframes show-347bd6c8{100%{opacity:1;transform:none}}.envelope+.envelope[data-v-347bd6c8]{margin-top:-28px}.envelope[data-v-347bd6c8]:last-of-type{margin-bottom:10px;padding-bottom:0}.envelope__header[data-v-347bd6c8]{position:relative;display:flex;align-items:center;padding:10px;border-radius:var(--border-radius);min-height:68px}.envelope .subline[data-v-347bd6c8]{margin-left:8px;color:var(--color-text-maxcontrast);cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.envelope--expanded[data-v-347bd6c8]{min-height:350px}.left[data-v-347bd6c8]{flex-grow:1;min-width:0;display:inline-block;position:relative;z-index:1;padding:2em;margin:-2em}.icon-important[data-v-347bd6c8] path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.icon-important.app-content-list-item-star[data-v-347bd6c8]{background-image:none;position:absolute;opacity:1;width:16px;height:16px;margin-left:-1px;display:flex;top:12px}.icon-important.app-content-list-item-star[data-v-347bd6c8]:hover,.icon-important.app-content-list-item-star[data-v-347bd6c8]:focus{opacity:.5}.app-content-list-item-star.favorite-icon-style[data-v-347bd6c8]{display:inline-block;position:absolute;top:10px;left:36px;cursor:pointer;stroke:var(--color-main-background);stroke-width:2}.app-content-list-item-star.favorite-icon-style[data-v-347bd6c8]:hover{opacity:.5}.app-content-list-item-star.junk-icon-style[data-v-347bd6c8]{display:inline-block;position:absolute;top:10px;left:36px;cursor:pointer;opacity:.2}.app-content-list-item-star.junk-icon-style[data-v-347bd6c8]:hover{opacity:.1}.left[data-v-347bd6c8]:not(.seen){font-weight:bold}.tag-group__label[data-v-347bd6c8]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-347bd6c8]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-347bd6c8]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}.junk-favorite-position-with-tag-subline[data-v-347bd6c8]{margin-bottom:14px !important}.junk-favorite-position[data-v-347bd6c8]{margin-bottom:36px !important}","",{version:3,sources:["webpack://./src/components/ThreadEnvelope.vue"],names:[],mappings:"AACA,yBACC,eAAA,CAGD,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,gBAAA,CACA,WAAA,CAEA,oDACC,eAAA,CAGD,mCACC,iBAAA,CACA,mCAAA,CACA,kBAAA,CACA,eAAA,CAGF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,qCAAA,CACA,SAAA,CACA,eAAA,CAMH,2BACC,YAAA,CACA,qBAAA,CACA,oCAAA,CACA,kBAAA,CACA,gBAAA,CACA,iBAAA,CACA,6CAAA,CACA,mBAAA,CACA,gFAAA,CACA,UAAA,CACA,2BAAA,CACA,yBACC,KACC,SAAA,CACA,cAAA,CAAA,CAIF,qCACC,gBAAA,CAGD,wCACC,kBAAA,CACA,gBAAA,CAGD,mCACC,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,YAAA,CACA,kCAAA,CACA,eAAA,CAGD,oCACC,eAAA,CACA,mCAAA,CACA,cAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGD,qCACC,gBAAA,CAGF,uBACC,WAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,SAAA,CACA,WAAA,CACA,WAAA,CAGA,sCACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGD,4DACC,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CACA,QAAA,CAEA,oIAEC,UAAA,CAIH,iEACC,oBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,cAAA,CACA,mCAAA,CACA,cAAA,CACA,uEACC,UAAA,CAGF,6DACC,oBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,cAAA,CACA,UAAA,CACA,mEACC,UAAA,CAGF,kCACC,gBAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,0DACC,6BAAA,CAED,yCACC,6BAAA",sourcesContent:["\n.sender {\n\tmargin-left: 8px;\n}\n\n.right {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tmargin-left: 10px;\n\theight: 44px;\n\n\t.app-content-list-item-menu {\n\t\tmargin-left: 4px;\n\t}\n\n\t.timestamp {\n\t\tmargin-right: 10px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\twhite-space: nowrap;\n\t\tmargin-bottom: 0;\n\t}\n}\n.button {\n\tcolor: var(--color-main-background);\n\t&:not(.active):not(.primary) {\n\t\tdisplay: none;\n\n\t\t&.primary {\n\t\t\tbackground-color: var(--color-primary);\n\t\t\topacity: 1;\n\t\t\tmargin-bottom: 0;\n\n\t\t}\n\t}\n}\n\n.envelope {\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: 2px solid var(--color-border);\n\tborder-radius: 16px;\n\tmargin-left: 10px;\n\tmargin-right: 10px;\n\tbackground-color: var(--color-main-background);\n\tpadding-bottom: 28px;\n\tanimation: show 200ms 90ms cubic-bezier(.17, .67, .83, .67) forwards;\n\topacity: 0.5;\n\ttransform-origin: top center;\n\t@keyframes show {\n\t\t100% {\n\t\t\topacity: 1;\n\t\t\ttransform: none;\n\t\t}\n\t}\n\n\t& + .envelope {\n\t\tmargin-top: -28px;\n\t}\n\n\t&:last-of-type {\n\t\tmargin-bottom: 10px;\n\t\tpadding-bottom: 0;\n\t}\n\n\t&__header {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 10px;\n\t\tborder-radius: var(--border-radius);\n\t\tmin-height: 68px; /* prevents jumping between open/collapsed */\n\t}\n\n\t.subline {\n\t\tmargin-left: 8px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tcursor: default;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t&--expanded {\n\t\tmin-height: 350px;\n\t}\n}\n.left {\n\tflex-grow: 1;\n\tmin-width: 0; /* https://css-tricks.com/flexbox-truncated-text/ */\n\tdisplay: inline-block;\n\tposition: relative;\n\tz-index: 1;\n\tpadding: 2em;\n\tmargin: -2em;\n}\n.icon-important {\n\t:deep(path) {\n\t\tfill: #ffcc00;\n\t\tstroke: var(--color-main-background);\n\t\tcursor: pointer;\n\t}\n\n\t&.app-content-list-item-star {\n\t\tbackground-image: none;\n\t\tposition: absolute;\n\t\topacity: 1;\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tmargin-left: -1px;\n\t\tdisplay: flex;\n\t\ttop: 12px;\n\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n}\n.app-content-list-item-star.favorite-icon-style {\n\tdisplay: inline-block;\n\tposition: absolute;\n\ttop: 10px;\n\tleft: 36px;\n\tcursor: pointer;\n\tstroke: var(--color-main-background);\n\tstroke-width: 2;\n\t&:hover {\n\t\topacity: .5;\n\t}\n}\n.app-content-list-item-star.junk-icon-style {\n\tdisplay: inline-block;\n\tposition: absolute;\n\ttop: 10px;\n\tleft: 36px;\n\tcursor: pointer;\n\topacity: .2;\n\t&:hover {\n\t\topacity: .1;\n\t}\n}\n.left:not(.seen) {\n\tfont-weight: bold;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.junk-favorite-position-with-tag-subline {\n\tmargin-bottom: 14px !important;\n}\n.junk-favorite-position {\n\tmargin-bottom: 36px !important;\n}\n"],sourceRoot:""}]),e.Z=i},34902:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,".event-data[data-v-853d0690]{display:flex;flex-direction:column;gap:5px}.event-data__heading[data-v-853d0690]{margin-left:36px}.event-data__row[data-v-853d0690]{display:flex}.event-data__row__icon[data-v-853d0690]{align-self:start;margin:0 8px;padding-top:2px}.muted[data-v-853d0690]{color:var(--color-text-lighter)}","",{version:3,sources:["webpack://./src/components/imip/EventData.vue"],names:[],mappings:"AACA,6BACC,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,sCACC,gBAAA,CAGD,kCACC,YAAA,CAEA,wCACC,gBAAA,CACA,YAAA,CAGA,eAAA,CAKH,wBACC,+BAAA",sourcesContent:["\n.event-data {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n\n\t&__heading {\n\t\tmargin-left: 36px;\n\t}\n\n\t&__row {\n\t\tdisplay: flex;\n\n\t\t&__icon {\n\t\t\talign-self: start;\n\t\t\tmargin: 0 8px;\n\n\t\t\t// Fix slight misalignment caused by align-self: start\n\t\t\tpadding-top: 2px;\n\t\t}\n\t}\n}\n\n.muted {\n\tcolor: var(--color-text-lighter);\n}\n"],sourceRoot:""}]),e.Z=i},60957:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"[data-v-00c359ce] .app-content-details{margin:0 auto;max-width:900px;display:flex;flex-direction:column;flex:1 1 100%;min-width:70%}[data-v-00c359ce] button.app-navigation-toggle{top:8px}","",{version:3,sources:["webpack://./src/views/Home.vue"],names:[],mappings:"AACA,uCACC,aAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,aAAA,CAGD,+CACC,OAAA",sourcesContent:["\n:deep(.app-content-details) {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 70%;\n}\n// Align the appNavigation toggle with the apps header toolbar\n:deep(button.app-navigation-toggle) {\n\ttop: 8px;\n}\n"],sourceRoot:""}]),e.Z=i},48849:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n.list-item-content__actions--primary .action--primary:first-child {\n\tpadding-left: 5px;\n}\n.list-item-content__actions--primary .action--primary:last-child {\n\tpadding-right: 5px;\n}\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n.material-design-icon {\n\t\tmargin-bottom: -15px;\n}\n}\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n","",{version:3,sources:["webpack://./src/components/EnvelopePrimaryActions.vue"],names:[],mappings:";AAaA;CACA,aAAA;CACA,8BAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;CACA,mBAAA;CACA,sBAAA;CACA,yBAAA;AAEA;EACA,oBAAA;AACA;AACA;AAEA;;CAEA,YAAA;AACA",sourcesContent:["<template>\n\t<ul class=\"list-item-content__actions--primary\">\n\t\t<slot />\n\t</ul>\n</template>\n\n<script>\nexport default {\n\tname: 'EnvelopePrimaryActions',\n}\n<\/script>\n\n<style>\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.list-item-content__actions--primary .action--primary:first-child {\n\tpadding-left: 5px;\n}\n\n.list-item-content__actions--primary .action--primary:last-child {\n\tpadding-right: 5px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n\n\t.material-design-icon {\n\t\tmargin-bottom: -15px;\n\t}\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n</style>\n"],sourceRoot:""}]),e.Z=i},30980:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n#mailvelope-composer[data-v-0be7aff6] {\n\twidth: 100%;\n\theight: 450px;\n}\n","",{version:3,sources:["webpack://./src/components/MailvelopeEditor.vue"],names:[],mappings:";AA6EA;CACA,WAAA;CACA,aAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport { isPgpgMessage } from '../crypto/pgp'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n"],sourceRoot:""}]),e.Z=i},16262:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n#mail-content[data-v-812ccd96] {\n\theight: 450px;\n}\n","",{version:3,sources:["webpack://./src/components/MessageEncryptedBody.vue"],names:[],mappings:";AA8CA;CACA,aAAA;AACA",sourcesContent:["<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope'\nimport MdnRequest from './MdnRequest'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n<\/script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n"],sourceRoot:""}]),e.Z=i},31547:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n#priority[data-v-61053746] {\n\tdisplay: inline-block;\n}\n.app-content-list-item[data-v-61053746] {\n\topacity: .8;\n}\n.app-content-list-item[data-v-61053746]:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\nh2[data-v-61053746] {\n\tfont-weight: normal;\n\tfont-size: 17px;\n\tmargin-bottom: 2px;\n}\n","",{version:3,sources:["webpack://./src/components/SectionTitle.vue"],names:[],mappings:";AAyCA;CACA,qBAAA;AACA;AACA;CACA,WAAA;AACA;AACA;CACA,6BAAA;CACA,YAAA;AACA;AACA;CACA,mBAAA;CACA,eAAA;CACA,kBAAA;AACA",sourcesContent:['\x3c!--\n  - @copyright 2020 Greta Doi <gretadoci@gmail.com>\n  -\n  - @author 2020 Greta Doi <gretadoci@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<div id="priority">\n\t\t<div class="app-content-list-item">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: \'SectionTitle\',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n.app-content-list-item {\n\topacity: .8;\n}\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\nh2 {\n\tfont-weight: normal;\n\tfont-size: 17px;\n\tmargin-bottom: 2px;\n}\n</style>\n'],sourceRoot:""}]),e.Z=i},75375:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n.reservation[data-v-397d55d8] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.event[data-v-397d55d8] {\n\tflex-grow: 1;\n}\n.event-name[data-v-397d55d8] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/EventReservation.vue"],names:[],mappings:";AAoJA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  --\x3e\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\n\t\t\t} else if ('startDate' in this.data.reservationFor) {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tconst end = this.getEndDateTime(this.data.reservationFor)\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n"],sourceRoot:""}]),e.Z=i},77626:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n.reservation[data-v-2a317718] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-2a317718],\n.arrival[data-v-2a317718] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-2a317718],\n.arrival[data-v-2a317718],\n.connection[data-v-2a317718] {\n\tjustify-content: center;\n}\n.iata[data-v-2a317718] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.airport[data-v-2a317718] {\n\tfont-size: large;\n}\n.departure[data-v-2a317718] {\n\ttext-align: right;\n}\n.connection[data-v-2a317718] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/FlightReservation.vue"],names:[],mappings:";AA2JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA",sourcesContent:["<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n"],sourceRoot:""}]),e.Z=i},78213:function(t,e,n){"use strict";var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([t.id,"\n.reservation[data-v-08dee74f] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-08dee74f],\n.arrival[data-v-08dee74f] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-08dee74f],\n.arrival[data-v-08dee74f],\n.connection[data-v-08dee74f] {\n\tjustify-content: center;\n}\n.station[data-v-08dee74f] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.departure[data-v-08dee74f] {\n\ttext-align: right;\n}\n.connection[data-v-08dee74f] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n","",{version:3,sources:["webpack://./src/components/itinerary/TrainReservation.vue"],names:[],mappings:";AA+JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA",sourcesContent:["<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n"],sourceRoot:""}]),e.Z=i},12545:function(t){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><path d="M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z" stroke="#000" stroke-width="2"></path></svg>'},22728:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Al}});var o=r(15961),a=r(3344),i=r.n(a),s=r(93379),c=r.n(s),l=r(7795),u=r.n(l),d=r(90569),p=r.n(d),f=r(3565),h=r.n(f),m=r(19216),A=r.n(m),v=r(44589),g=r.n(v),y=r(76580),C={};C.styleTagTransform=g(),C.setAttributes=h(),C.insert=p().bind(null,"head"),C.domAPI=u(),C.insertStyleElement=A(),c()(y.Z,C),y.Z&&y.Z.locals&&y.Z.locals;var b=r(11460),x={};x.styleTagTransform=g(),x.setAttributes=h(),x.insert=p().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=A(),c()(b.Z,x),b.Z&&b.Z.locals&&b.Z.locals;var w=r(89177),_={name:"SectionTitle",props:{name:{type:String,required:!0}}},k=r(31547),E={};E.styleTagTransform=g(),E.setAttributes=h(),E.insert=p().bind(null,"head"),E.domAPI=u(),E.insertStyleElement=A(),c()(k.Z,E),k.Z&&k.Z.locals&&k.Z.locals;var I=r(51900),S=(0,I.Z)(_,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"priority"}},[e("div",{staticClass:"app-content-list-item"},[e("h2",[t._v(t._s(t.name))])])])}),[],!1,null,"61053746",null).exports,L=r(20144),T="@@InfiniteScroll",D=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},B=document.defaultView.getComputedStyle,O=function(t){return t===window?D(window):t.getBoundingClientRect().top+D(window)},M=function(t){for(var e=t.parentNode;e;){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},P=function(){if(!this.binded){this.binded=!0;var t,e,n,r,o,a,i,s,c=this,l=c.el,u=l.getAttribute("infinite-scroll-throttle-delay"),d=200;u&&(d=Number(c.vm[u]||u),(isNaN(d)||d<0)&&(d=200)),c.throttleDelay=d,c.scrollEventTarget=function(t){for(var e=t;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType;){var n=B(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window}(l),c.scrollListener=(t=j.bind(c),e=c.throttleDelay,s=function(){t.apply(a,i),r=n},function(){if(a=this,i=arguments,n=Date.now(),o&&(clearTimeout(o),o=null),r){var t=e-(n-r);t<0?s():o=setTimeout((function(){s()}),t)}else s()}),c.scrollEventTarget.addEventListener("scroll",c.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){c.scrollEventTarget.removeEventListener("scroll",c.scrollListener)}));var p=l.getAttribute("infinite-scroll-disabled"),f=!1;p&&(this.vm.$watch(p,(function(t){c.disabled=t,!t&&c.immediateCheck&&j.call(c)})),f=Boolean(c.vm[p])),c.disabled=f;var h=l.getAttribute("infinite-scroll-distance"),m=0;h&&(m=Number(c.vm[h]||h),isNaN(m)&&(m=0)),c.distance=m;var A=l.getAttribute("infinite-scroll-immediate-check"),v=!0;A&&(v=Boolean(c.vm[A])),c.immediateCheck=v,v&&j.call(c);var g=l.getAttribute("infinite-scroll-listen-for-event");g&&c.vm.$on(g,(function(){j.call(c)}))}},j=function(t){var e=this.scrollEventTarget,n=this.el,r=this.distance;if(!0===t||!this.disabled){var o=D(e),a=o+function(t){return t===window?document.documentElement.clientHeight:t.clientHeight}(e);(e===n?e.scrollHeight-a<=r:a+r>=O(n)-O(e)+n.offsetHeight+o)&&this.expression&&this.expression()}},N={bind:function(t,e,n){t[T]={el:t,vm:n.context,expression:e.value};var r=arguments;console.info("binding",t,e,n),t[T].vm.$nextTick((function(){M(t)&&P.call(t[T],r),t[T].bindTryCount=0,function e(){t[T].bindTryCount>10||(t[T].bindTryCount++,M(t)?P.call(t[T],r):setTimeout(e,50))}()}))},unbind:function(t){t&&t[T]&&t[T].scrollEventTarget&&t[T].scrollEventTarget.removeEventListener("scroll",t[T].scrollListener)}},F=r(37838),Z=r(41447),G=r(93455),z=r.n(G),R={name:"EmptyMailbox",components:{IconMail:Z.Z,NcEmptyContent:z()}},$=(0,I.Z)(R,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{attrs:{title:t.t("mail","No messages in this mailbox")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail",{attrs:{size:65}})]},proxy:!0}])})}),[],!1,null,null,null).exports,U=r(82880),q=r(31974),Y=r(75925),W=r.n(Y),V=r(56580),H=r.n(V),Q=r(26937),K=r(79753),J=H()((function(t){if(null===t)return Promise.resolve(void 0);var e=(0,K.generateUrl)("/apps/mail/api/avatars/url/{email}",{email:t});return Q.Z.get(e).then((function(t){return t.data})).then((function(e){return e.isExternal?(0,K.generateUrl)("/apps/mail/api/avatars/image/{email}",{email:t}):e.url})).catch((function(t){if(404!==t.response.status)return Promise.reject(t)}))}));function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function tt(){tt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==X(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function et(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var nt={name:"Avatar",components:{BaseAvatar:W()},props:{displayName:{type:String,required:!0},email:{type:String,required:!0},disableTooltip:{type:Boolean,default:!1},size:{type:Number,default:40}},data:function(){return{loading:!0,avatarUrl:void 0}},computed:{hasAvatar:function(){return void 0!==this.avatarUrl}},mounted:function(){var t,e=this;return(t=tt().mark((function t(){return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.email){t.next=10;break}return t.prev=1,t.next=4,J(e.email);case 4:e.avatarUrl=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),w.Z.debug("Could not fetch avatar",{email:e.email});case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){et(a,r,o,i,s,"next",t)}function s(t){et(a,r,o,i,s,"throw",t)}i(void 0)}))})()}},rt=nt,ot=(0,I.Z)(rt,(function(){var t=this,e=t._self._c;return t.loading||!t.hasAvatar?e("BaseAvatar",{attrs:{"display-name":t.displayName,size:t.size,"disable-tooltip":t.disableTooltip}}):e("BaseAvatar",{attrs:{"display-name":t.displayName,url:t.avatarUrl,size:t.size,"disable-tooltip":t.disableTooltip}})}),[],!1,null,null,null).exports,at=r(62380),it=r(58441),st=r(32964),ct=r(76188),lt=r(18574),ut=r(89115),dt=r(12545),pt=r.n(dt),ft=r(90162),ht=r(81629),mt=r.n(ht);function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vt=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.options=r,this.registerListeners.bind(this)(e),this.setInitialAttributes()}var e,n;return e=t,(n=[{key:"setInitialAttributes",value:function(){this.el.setAttribute("draggable","true"),this.el.classList.add("draggable-envelope")}},{key:"update",value:function(t,e){this.options=e.options}},{key:"registerListeners",value:function(t){t.addEventListener("dragstart",this.onDragStart.bind(this)),t.addEventListener("dragend",this.onDragEnd.bind(this))}},{key:"removeListeners",value:function(t){t.removeEventListener("dragstart",this.onDragStart),t.removeEventListener("dragend",this.onDragEnd)}},{key:"onDragStart",value:function(t){var e=this.options,n=e.accountId,r=e.mailboxId,o=e.selectedEnvelopes;t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="move";var a=[];if(o.length)o.forEach((function(t,e){a.push({accountId:n,mailboxId:r,envelopeId:t.databaseId,draggableLabel:"".concat(t.subject," (").concat(t.from[0].label,")")})}));else{var i=this.options,s=i.envelopeId,c=i.draggableLabel;a.push({accountId:n,mailboxId:r,envelopeId:s,draggableLabel:c})}t.dataTransfer.setData("text/plain",JSON.stringify(a)),this.attachGhost({event:t,envelopes:a}),ft.Z.$emit("drag-start",{accountId:n,mailboxId:r,itemCount:a.length})}},{key:"onDragEnd",value:function(t){ft.Z.$emit("drag-end",{accountId:this.options.accountId})}},{key:"attachGhost",value:function(t){var e=t.event,n=t.envelopes,r="draggable-envelope-ghost",o=document.createElement("div");o.classList.add(r);var a=document.createElement("span");a.classList.add("".concat(r,"--counter"));var i=document.createTextNode(n.length);a.appendChild(i),o.appendChild(a);var s=document.createElement("div");s.classList.add("".concat(r,"--label-wrapper")),n.forEach((function(t){var e=document.createElement("div");e.classList.add("".concat(r,"--label-wrapper--label"));var n=document.createTextNode(t.draggableLabel);e.appendChild(n),s.appendChild(e)})),o.appendChild(s),document.body.appendChild(o),e.dataTransfer.setDragImage(o,0,15),mt()((function(){document.body.removeChild(o)}))}}])&&At(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),gt=[],yt={bind:function(t,e,n){var r=new vt(t,n.context,e.value);gt.push(r)},componentUpdated:function(t,e){var n=e.value;setTimeout((function(){gt.forEach((function(e){e.options.selectedEnvelopes=n.selectedEnvelopes,e.update(t,e)}))}))},unbind:function(t){gt=gt.filter((function(e){return e.el!==t}))}},Ct=r(31588),bt=r(89935),xt=r.n(bt),wt=r(80351),_t=r.n(wt),kt=xt()((function(t,e){var n=_t()(e);return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()?n.format("H:mm"):e.getTime()>t.getTime()-3024e5?n.format("dd"):e.getTime()>t.getTime()-15768e6?n.format("MMM D"):n.format("MMM D, YYYY")}))(new Date),Et=r(61613),It=r(1929);function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Lt(){Lt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==St(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Tt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bt(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var Ot={name:"MoveModal",components:{MailboxPicker:r(33515).Z},props:{account:{type:Object,required:!0},envelopes:{type:Array,required:!0},moveThread:{type:Boolean,default:!1}},data:function(){return{moving:!1,destMailboxId:void 0}},methods:{onClose:function(){this.$emit("close")},onMove:function(){var t,e=this;return(t=Lt().mark((function t(){var n,r,o,a;return Lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.moving=!0,t.prev=1,n=e.envelopes.filter((function(t){return t.mailboxId!==e.destMailboxId})),0!==n.length){t.next=5;break}return t.abrupt("return");case 5:r=Tt(n),t.prev=6,r.s();case 8:if((o=r.n()).done){t.next=19;break}if(a=o.value,!e.moveThread){t.next=15;break}return t.next=13,e.$store.dispatch("moveThread",{envelope:a,destMailboxId:e.destMailboxId});case 13:t.next=17;break;case 15:return t.next=17,e.$store.dispatch("moveMessage",{id:a.databaseId,destMailboxId:e.destMailboxId});case 17:t.next=8;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),r.e(t.t0);case 24:return t.prev=24,r.f(),t.finish(24);case 27:return t.next=29,e.$store.dispatch("syncEnvelopes",{mailboxId:e.destMailboxId});case 29:e.$emit("move"),t.next=35;break;case 32:t.prev=32,t.t1=t.catch(1),w.Z.error("could not move messages",{error:t.t1});case 35:return t.prev=35,e.moving=!1,e.$emit("close"),t.finish(35);case 39:case"end":return t.stop()}}),t,null,[[1,32,35,39],[6,21,24,27]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Bt(a,r,o,i,s,"next",t)}function s(t){Bt(a,r,o,i,s,"throw",t)}i(void 0)}))})()}}},Mt=Ot,Pt=(0,I.Z)(Mt,(function(){var t=this;return(0,t._self._c)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"label-select":t.moveThread?t.t("mail","Move thread"):t.t("mail","Move message"),"label-select-loading":t.moveThread?t.t("mail","Moving thread"):t.t("mail","Moving message")},on:{"update:selected":function(e){t.destMailboxId=e},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports,jt=r(71598),Nt=r(74603),Ft=r(4777),Zt=r(84154),Gt=r(65836),zt=r(30961),Rt=r(82659),$t=r(40743),Ut={name:"JunkIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},qt=(0,I.Z)(Ut,(function(t,e){return t("span",e._g(e._b({staticClass:"material-design-icon junk-icon",class:[e.data.class,e.data.staticClass],attrs:{"aria-hidden":!e.props.title,"aria-label":e.props.title,role:"img"}},"span",e.data.attrs,!1),e.listeners),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.props.fillColor,width:e.props.size,height:e.props.size,viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),e._v(" "),t("path",{attrs:{d:"m5.5156 2l-3.5156 3.5156v4.9684l3.5156 3.516h4.9684l3.516-3.516v-4.9684l-3.516-3.5156h-4.9684zm1.4844 2h2v5h-2v-5zm0 6h2v2h-2v-2z"}})])])}),[],!0,null,null,null).exports,Yt=r(99270),Wt=r(41307),Vt=r(73229),Ht={forwarded:"",hasattachment:"",has_cal:"",hasnoattachment:"",loadremoteimages:"","unsubscribe newsletter":""};function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function Kt(){Kt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Qt(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Jt(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Xt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Jt(a,r,o,i,s,"next",t)}function s(t){Jt(a,r,o,i,s,"throw",t)}i(void 0)}))}}function te(){for(var t=((1<<24)*Math.random()|0).toString(16);t.length<6;)t="0"+t;return"#"+t}var ee={name:"TagModal",components:{Modal:o.Jc,Actions:o.O3,ActionText:o.L1,ActionInput:o.Iw,ActionButton:o.Js,IconRename:Vt.default,IconTag:Wt.Z,IconLoading:o.lb},props:{envelope:{required:!0,type:Object}},data:function(){return{isAdded:!1,editing:!1,tagLabel:!0,tagInput:!1,showSaving:!1,renameTagLabel:!0,renameTagInput:!1,color:te()}},computed:{tags:function(){var t=this;return this.$store.getters.getTags.filter((function(t){return"$label1"!==t.imapLabel&&!(t.displayName.toLowerCase()in Ht)})).sort((function(e,n){return e.isDefaultTag&&!n.isDefaultTag?-1:n.isDefaultTag&&!e.isDefaultTag?1:e.isDefaultTag&&n.isDefaultTag?e.displayName<n.displayName?1:-1:t.isSet(e.imapLabel)&&!t.isSet(n.imapLabel)?-1:!t.isSet(e.imapLabel)&&t.isSet(n.imapLabel)||e.displayName<n.displayName?1:-1}))}},methods:{onClose:function(){this.$emit("close")},isSet:function(t){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some((function(e){return e.imapLabel===t}))},addTag:function(t){this.isAdded=!0,this.$store.dispatch("addEnvelopeTag",{envelope:this.envelope,imapLabel:t})},removeTag:function(t){this.isAdded=!1,this.$store.dispatch("removeEnvelopeTag",{envelope:this.envelope,imapLabel:t})},addTagInput:function(){this.editing=!0,this.showSaving=!1},createTag:function(t){var e=this;return Xt(Kt().mark((function n(){var r;return Kt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.editing=!0,!((r=t.target.querySelector("input[type=text]").value).toLowerCase()in Ht)){n.next=5;break}return(0,U.showError)(e.t("mail","Tag name is a hidden system tag")),n.abrupt("return");case 5:if(!e.$store.getters.getTags.some((function(t){return t.displayName===r}))){n.next=8;break}return(0,U.showError)(e.t("mail","Tag already exists")),n.abrupt("return");case 8:return n.prev=8,n.next=11,e.$store.dispatch("createTag",{displayName:r,color:te()});case 11:n.next=17;break;case 13:n.prev=13,n.t0=n.catch(8),console.debug(n.t0),(0,U.showError)(e.t("mail","An error occurred, unable to create the tag."));case 17:return n.prev=17,e.showSaving=!1,e.tagLabel=!0,n.finish(17);case 21:case"end":return n.stop()}}),n,null,[[8,13,17,21]])})))()},convertHex:function(t,e){if(4===t.length){var n=parseInt(t.substring(1,2),16),r=parseInt(t.substring(2,3),16),o=parseInt(t.substring(3,4),16);return"rgba(".concat(n,", ").concat(r,", ").concat(o,", ").concat(e,")")}var a=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16);return"rgba(".concat(a,", ").concat(i,", ").concat(s,", ").concat(e,")")},openEditTag:function(){this.renameTagLabel=!1,this.renameTagInput=!0,this.showSaving=!1},renameTag:function(e,n){var r=this;return Xt(Kt().mark((function o(){var a;return Kt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r.renameTagInput=!1,r.showSaving=!1,a=n.target.querySelector("input[type=text]").value,o.prev=3,o.next=6,r.$store.dispatch("updateTag",{tag:e,displayName:a,color:e.color});case 6:r.renameTagLabel=!0,r.renameTagInput=!1,r.showSaving=!1,o.next=18;break;case 11:o.prev=11,o.t0=o.catch(3),(0,U.showInfo)(t("mail","An error occurred, unable to rename the tag.")),console.error(o.t0),r.renameTagLabel=!1,r.renameTagInput=!1,r.showSaving=!0;case 18:case"end":return o.stop()}}),o,null,[[3,11]])})))()}}},ne=r(57627),re={};re.styleTagTransform=g(),re.setAttributes=h(),re.insert=p().bind(null,"head"),re.domAPI=u(),re.insertStyleElement=A(),c()(ne.Z,re),ne.Z&&ne.Z.locals&&ne.Z.locals;var oe=(0,I.Z)(ee,(function(){var t=this,e=t._self._c;return e("Modal",{attrs:{size:"large"},on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",{staticClass:"tag-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Add default tags"))+"\n\t\t")]),t._v(" "),t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("button",{staticClass:"tag-group__label",style:{color:t.convertHex(n.color,1),"background-color":t.convertHex(n.color,.15)}},[t._v("\n\t\t\t\t"+t._s(n.displayName)+"\n\t\t\t")]),t._v(" "),e("Actions",{attrs:{"force-menu":!0}},[t.renameTagLabel?e("ActionButton",{on:{click:t.openEditTag},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconRename",{attrs:{size:17}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Rename tag"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.renameTagInput?e("ActionInput",{attrs:{value:n.displayName},on:{submit:function(e){return t.renameTag(n,e)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconTag",{attrs:{size:20}})]},proxy:!0}],null,!0)}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Saving new tag name "))+"\n\t\t\t\t")]):t._e()],1),t._v(" "),t.isSet(n.imapLabel)?e("button",{staticClass:"tag-actions",on:{click:function(e){return t.removeTag(n.imapLabel)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Unset"))+"\n\t\t\t")]):e("button",{staticClass:"tag-actions",on:{click:function(e){return t.addTag(n.imapLabel)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Set"))+"\n\t\t\t")])],1)})),t._v(" "),e("h2",{staticClass:"tag-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Add tag"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"create-tag"},[t.editing?t._e():e("button",{staticClass:"tagButton",on:{click:t.addTagInput}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add tag"))+"\n\t\t\t")]),t._v(" "),t.editing?e("ActionInput",{on:{submit:t.createTag}},[e("IconTag",{attrs:{size:20}})],1):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Saving tag "))+"\n\t\t\t")]):t._e()],1)],2)])}),[],!1,null,"94002d6a",null).exports,ae=r(46296),ie=r(44140),se=r.n(ie),ce=r(18350),le=r.n(ce),ue=r(81063),de=r(45994),pe=H()((function(t){return Q.Z.defaults.headers["X-Requested-With"]="XMLHttpRequest",ue.getPatcher().patch("request",Q.Z),ue.createClient((0,K.generateRemoteUrl)("dav/".concat(t,"/").concat((0,de.ts)().uid)))})),fe=r(2568),he=r.n(fe),me=r(12085),Ae=r.n(me);function ve(t){var e=ge(t);return"#"+Ae().rgb.hex(e.r,e.g,e.b)}var ge=function(t){var e=t.toLowerCase();return null===e.match(/^([0-9a-f]{4}-?){8}$/)&&(e=he()(e)),e=e.replace(/[^0-9a-f]/g,""),function(t){t||(t=6);var e=new ye(182,70,157),n=new ye(221,203,85),r=new ye(0,130,201),o=Ce(t,e,n),a=Ce(t,n,r),i=Ce(t,r,e);return o.concat(a).concat(i)}(6)[function(t,e){for(var n=0,r=[],o=0;o<t.length;o++)r.push(parseInt(t.charAt(o),16)%16);for(var a in r)n+=r[a];return parseInt(parseInt(n,10)%18,10)}(e)]};function ye(t,e,n){this.r=t,this.g=e,this.b=n}function Ce(t,e,n){var r=[];r.push(e);for(var o=function(t,e){var n=new Array(3);return n[0]=(e[1].r-e[0].r)/t,n[1]=(e[1].g-e[0].g)/t,n[2]=(e[1].b-e[0].b)/t,n}(t,[e,n]),a=1;a<t;a++){var i=parseInt(e.r+o[0]*a,10),s=parseInt(e.g+o[1]*a,10),c=parseInt(e.b+o[2]*a,10);r.push(new ye(i,s,c))}return r}function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function xe(){xe=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==be(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function we(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ke=function(t){var e,n=null==t||null===(e=t.acl)||void 0===e?void 0:e.ace;if(!n)return!1;Array.isArray(n)||(n=[n]);var r,o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a,i;if(void 0!==(null===(a=r.value.grant)||void 0===a||null===(i=a.privilege)||void 0===i?void 0:i.write))return!0}}catch(t){o.e(t)}finally{o.f()}return!1},Ee=function(t){var e,n;return{displayname:t.props.displayname,order:t.props["calendar-order"],components:{vevent:!0},writable:ke(t.props),url:(0,K.generateRemoteUrl)("dav/calendars/".concat((0,de.ts)().uid).concat(t.filename,"/")),color:null!==(e=t.props["calendar-color"])&&void 0!==e?e:ve(null!==(n=t.props.displayname)&&void 0!==n?n:"")}},Ie=function(){var t,e=(t=xe().mark((function t(){var e;return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe("calendars").getDirectoryContents("/",{data:'<?xml version="1.0"?>\n<d:propfind  xmlns:d="DAV:" xmlns:c="urn:ietf:params:xml:ns:caldav" xmlns:aapl="http://apple.com/ns/ical/" xmlns:oc="http://owncloud.org/ns" xmlns:cs="http://calendarserver.org/ns/">\n  <d:prop>\n    <d:displayname />\n    <c:calendar-description />\n    <c:calendar-timezone />\n    <aapl:calendar-order />\n    <aapl:calendar-color />\n    <c:supported-calendar-component-set />\n    <oc:calendar-enabled />\n    <d:acl />\n    <d:owner />\n    <oc:invite />\n  </d:prop>\n</d:propfind>',details:!0});case 2:return e=t.sent,t.abrupt("return",e.data.map(Ee).filter((function(t){return t.components.vevent&&!0===t.writable})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){we(a,r,o,i,s,"next",t)}function s(t){we(a,r,o,i,s,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}(),Se=function(){for(var t="",e=0;e<7;e++)t+=Math.random().toString(36).substring(7);return t},Le=xt()((function(t,e){w.Z.debug("importing events into calendar",{url:t,data:e});var n=[],r=function(t){var e=[],n={},r=le().parse(t),o=new(le().Component)(r);o.getAllSubcomponents("vtimezone").forEach((function(t){return e.push(t)}));var a=["vevent","vjournal","vtodo"];a.forEach((function(t){var e=o.getAllSubcomponents(t);n[t]={},e.forEach((function(e){var r=e.getFirstPropertyValue("uid");n[t][r]=n[t][r]||[],n[t][r].push(e)}))}));var i=[];return a.forEach((function(t){for(var r in i[t]=[],n[t]){var o=n[t][r],a=(c=void 0,(c=new(le().Component)(["vcalendar",[],[]])).updatePropertyWithValue("prodid","-//"+OC.theme.name+" Mail"),c);for(var s in e.forEach(a.addSubcomponent.bind(a)),o)a.addSubcomponent(o[s]);i[t].push(a.toString())}var c})),{name:o.getFirstPropertyValue("x-wr-calname"),color:o.getFirstPropertyValue("x-apple-calendar-color"),split:i}}(e);return["vevent","vjournal","vtodo"].forEach((function(e){for(var o in r.split[e]){var a=r.split[e][o];w.Z.info("importing event component",{component:a}),n.push(Promise.resolve(Q.Z.put(t+Se()+".ics",a,{headers:{"Content-Type":"text/calendar; charset=utf-8"}})))}})),Promise.all(n)})),Te={name:"CalendarPickerOption",props:{color:{type:String,required:!0},displayname:{type:String,required:!0},displayIcon:{type:Boolean,default:!1}}},De=r(73289),Be={};Be.styleTagTransform=g(),Be.setAttributes=h(),Be.insert=p().bind(null,"head"),Be.domAPI=u(),Be.insertStyleElement=A(),c()(De.Z,Be),De.Z&&De.Z.locals&&De.Z.locals;var Oe=(0,I.Z)(Te,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"calendar-picker-option"},[e("div",{staticClass:"calendar-picker-option__color-indicator",style:{backgroundColor:t.color}}),t._v(" "),e("span",{staticClass:"calendar-picker-option__label"},[t._v("\n\t\t"+t._s(t.displayname)+"\n\t")]),t._v(" "),e("span",{class:t.displayIcon?"icon-caret-dark":""})])}),[],!1,null,"9bd234a6",null).exports;function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Pe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return je(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ne(){Ne=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Me(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Fe(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ze(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Fe(a,r,o,i,s,"next",t)}function s(t){Fe(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Ge={name:"EventModal",components:{CalendarPickerOption:Oe,DatetimePicker:o.P4,Modal:o.Jc,Multiselect:o.Z2},props:{envelope:{type:Object,required:!0}},data:function(){var t=se().determine(),e=t?t.name():"UTC";return{calendars:[],eventTitle:this.envelope.subject,startDate:new Date,endDate:new Date,isAllDay:!1,startTimezoneId:e,endTimezoneId:e,saving:!1,selectedCalendar:void 0}},computed:{dateFormat:function(){return this.isAllDay?"YYYY-MM-DD":"YYYY-MM-DD HH:mm"},datePickerType:function(){return this.isAllDay?"date":"datetime"}},created:function(){w.Z.debug("creating event from envelope",{envelope:this.envelope})},mounted:function(){var t=this;return Ze(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:t.calendars=e.sent.filter((function(t){return t.writable})),t.calendars.length&&(t.selectedCalendar=t.calendars[0]);case 4:case"end":return e.stop()}}),e)})))()},methods:{onClose:function(){this.$emit("close")},onSave:function(){var e=this;return Ze(Ne().mark((function n(){var r,o,a,i,s,c,l,u,d;return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.saving=!0,n.prev=1,w.Z.debug("create event",{calendar:e.selectedCalendar,eventTitle:e.eventTitle,startDate:e.startDate,startTimezone:e.startTimezoneId,endTimezone:e.endTimezoneId}),(r=(0,ae.ko)()).registerDefaultTimezones(),o=r.getTimezoneForId(e.startTimezoneId),a=ae.ul.fromJSDate(e.startDate,!0).getInTimezone(o),i=r.getTimezoneForId(e.endTimezoneId),s=ae.ul.fromJSDate(e.endDate,!0).getInTimezone(i),e.isAllDay&&(a.isDate=!0,s.isDate=!0),c=(0,ae.yM)(a,s),(l=c.getFirstComponent("VEVENT")).addProperty(new ae.Kg("SUMMARY",e.eventTitle)),u=Pe(c.getVObjectIterator());try{for(u.s();!(d=u.n()).done;)d.value.undirtify()}catch(t){u.e(t)}finally{u.f()}return w.Z.debug("calendar object created",{calendar:c,event:l}),n.next=18,Le(e.selectedCalendar.url,c.toICS());case 18:(0,U.showSuccess)(t("mail","Event created")),e.onClose(),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(1),(0,U.showError)(t("mail","Could not create event")),w.Z.error("Creating event from message failed",{error:n.t0});case 26:return n.prev=26,e.saving=!1,n.finish(26);case 29:case"end":return n.stop()}}),n,null,[[1,22,26,29]])})))()}}},ze=r(68487),Re={};Re.styleTagTransform=g(),Re.setAttributes=h(),Re.insert=p().bind(null,"head"),Re.domAPI=u(),Re.insertStyleElement=A(),c()(ze.Z,Re),ze.Z&&ze.Z.locals&&ze.Z.locals;var $e=(0,I.Z)(Ge,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{staticClass:"modal-content"},[e("h2",[t._v(t._s(t.t("mail","Create event")))]),t._v(" "),e("div",{staticClass:"eventTitle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.eventTitle,expression:"eventTitle"}],attrs:{type:"text"},domProps:{value:t.eventTitle},on:{input:function(e){e.target.composing||(t.eventTitle=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"dateTimePicker"},[e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.startTimezoneId},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),e("DatetimePicker",{attrs:{format:t.dateFormat,clearable:!1,"minute-step":5,"show-second":!1,type:t.datePickerType,"show-timezone-select":!0,"timezone-id":t.endTimezoneId},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),e("div",{staticClass:"all-day"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isAllDay,expression:"isAllDay"}],staticClass:"checkbox",attrs:{id:"allDay",type:"checkbox"},domProps:{checked:Array.isArray(t.isAllDay)?t._i(t.isAllDay,null)>-1:t.isAllDay},on:{change:function(e){var n=t.isAllDay,r=e.target,o=!!r.checked;if(Array.isArray(n)){var a=t._i(n,null);r.checked?a<0&&(t.isAllDay=n.concat([null])):a>-1&&(t.isAllDay=n.slice(0,a).concat(n.slice(a+1)))}else t.isAllDay=o}}}),t._v(" "),e("label",{attrs:{for:"allDay"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","All day"))+"\n\t\t\t")])]),t._v(" "),e("Multiselect",{attrs:{label:"displayname","track-by":"url","allow-empty":!1,options:t.calendars},scopedSlots:t._u([{key:"option",fn:function(n){var r=n.option;return[e("CalendarPickerOption",t._b({},"CalendarPickerOption",r,!1))]}},{key:"singleLabel",fn:function(n){var r=n.option;return[e("CalendarPickerOption",t._b({attrs:{"display-icon":!0}},"CalendarPickerOption",r,!1))]}}]),model:{value:t.selectedCalendar,callback:function(e){t.selectedCalendar=e},expression:"selectedCalendar"}}),t._v(" "),e("br"),t._v(" "),e("button",{staticClass:"primary",on:{click:t.onSave}},[t._v("\n\t\t\t"+t._s(t.t("mail","Create"))+"\n\t\t")])],1)])}),[],!1,null,"6c51c76a",null).exports,Ue=r(48849),qe={};qe.styleTagTransform=g(),qe.setAttributes=h(),qe.insert=p().bind(null,"head"),qe.domAPI=u(),qe.insertStyleElement=A(),c()(Ue.Z,qe),Ue.Z&&Ue.Z.locals&&Ue.Z.locals;var Ye=(0,I.Z)({name:"EnvelopePrimaryActions"},(function(){return(0,this._self._c)("ul",{staticClass:"list-item-content__actions--primary"},[this._t("default")],2)}),[],!1,null,null,null).exports,We=function(t){return"plain"===t.format&&t.value.startsWith("-----BEGIN PGP MESSAGE-----")};function Ve(t){return t.startsWith("-----BEGIN PGP MESSAGE-----")}var He=r(41293);function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function Ke(){Ke=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Qe(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Je(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Xe(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Je(a,r,o,i,s,"next",t)}function s(t){Je(a,r,o,i,s,"throw",t)}i(void 0)}))}}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){nn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rn={name:"Envelope",components:{AlertOctagonIcon:q.Z,Avatar:ot,IconCreateEvent:at.Z,CheckIcon:it.default,ChevronLeft:st.default,DeleteIcon:ct.Z,ArchiveIcon:lt.Z,DotsHorizontalIcon:ut.default,EnvelopePrimaryActions:Ye,EventModal:$e,ListItem:o.hx,ImportantIcon:Rt.Z,JunkIcon:qt,ActionButton:o.Js,MoveModal:Pt,OpenInNewIcon:jt.Z,PlusIcon:Yt.Z,TagIcon:Wt.Z,TagModal:oe,Star:Ft.default,StarOutline:Nt.default,EmailRead:Gt.Z,EmailUnread:Z.Z,IconAttachment:zt.Z,IconBullet:$t.Z,Reply:Zt.Z,ActionLink:o.ih,DownloadIcon:He.Z},directives:{draggableEnvelope:yt},props:{withReply:{type:Boolean,default:!0},data:{type:Object,required:!0},mailbox:{type:Object,required:!0},selectMode:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},selectedEnvelopes:{type:Array,required:!1,default:function(){return[]}},hasMultipleAccounts:{type:Boolean,default:!1}},data:function(){return{importantSvg:pt(),showMoveModal:!1,showEventModal:!1,showTagModal:!1,moreActionsOpen:!1}},computed:{hasMultipleRecipients:function(){this.account||console.error("account is undefined",{accountId:this.data.accountId});var t=(0,Ct.oB)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},draft:function(){return this.data.flags.draft},account:function(){var t=this.data.accountId;return this.$store.getters.getAccount(t)},link:function(){return this.draft?void 0:{name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:this.data.databaseId},exact:!0}},addresses:function(){var e,n,r,o;if("sent"===this.mailbox.specialRole){var a=[this.data.to,this.data.cc].flat().map((function(t){return t.label?t.label:t.email}));return a.length>0?a.join(", "):t("mail","Blind copy recipients only")}return null!==(e=null!==(n=null===(r=this.data.from[0])||void 0===r?void 0:r.label)&&void 0!==n?n:null===(o=this.data.from[0])||void 0===o?void 0:o.email)&&void 0!==e?e:"?"},avatarEmail:function(){if("sent"===this.mailbox.specialRole){var t=[this.data.to,this.data.cc].flat().map((function(t){return t.email}));return t.length>0?t[0]:""}return this.data.from.length>0?this.data.from[0].email:""},showArchiveButton:function(){return null!==this.account.archiveMailboxId},showFavoriteIconVariant:function(){return this.data.flags.flagged},showImportantIconVariant:function(){return this.data.flags.seen},isEncrypted:function(){return this.data.previewText&&Ve(this.data.previewText)},isImportant:function(){return this.$store.getters.getEnvelopeTags(this.data.databaseId).some((function(t){return"$label1"===t.imapLabel}))},tags:function(){return this.$store.getters.getEnvelopeTags(this.data.databaseId).filter((function(t){return t.imapLabel&&"$label1"!==t.imapLabel&&!(t.displayName.toLowerCase()in Ht)}))},draggableLabel:function(){var t,e,n,r=this.data.subject,o=null!==(t=null===(e=this.data.from[0])||void 0===e?void 0:e.label)&&void 0!==t?t:null===(n=this.data.from[0])||void 0===n?void 0:n.email;return o&&(r+=" (".concat(o,")")),r},subjectForSubtitle:function(){return this.data.subject||this.t("mail","No subject")},exportMessageLink:function(){return(0,K.generateUrl)("/apps/mail/api/messages/{id}/export",{id:this.data.databaseId})}},methods:{setSelected:function(t){this.selected!==t&&this.$emit("update:selected",t)},formatted:function(){return kt(new Date(1e3*this.data.dateInt))},unselect:function(){this.selected&&this.$emit("update:selected",!1)},toggleSelected:function(){this.$emit("update:selected",!this.selected)},onClick:function(t){this.draft&&!t.defaultPrevented&&this.$store.dispatch("showMessageComposer",{data:en(en({},this.data),{},{draftId:this.data.databaseId}),templateMessageId:this.data.databaseId})},onSelectMultiple:function(){this.$emit("select-multiple")},onToggleImportant:function(){this.$store.dispatch("toggleEnvelopeImportant",this.data)},onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.data)},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",{envelope:this.data})},onToggleJunk:function(){this.$store.dispatch("toggleEnvelopeJunk",this.data)},onDelete:function(){var e=this;return Xe(Ke().mark((function n(){var r;return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setSelected(!1),e.$emit("delete",e.data.databaseId),n.prev=2,n.next=5,e.$store.dispatch("deleteThread",{envelope:e.data});case 5:n.next=14;break;case 7:return n.prev=7,n.t0=n.catch(2),n.t1=U.showError,n.next=12,(0,It.d)(n.t0,(nn(r={},Et.Z.getName(),(function(){return t("mail","No trash mailbox configured")})),nn(r,"default",(function(e){return w.Z.error("could not delete message",e),t("mail","Could not delete message")})),r));case 12:n.t2=n.sent,(0,n.t1)(n.t2);case 14:case"end":return n.stop()}}),n,null,[[2,7]])})))()},onArchive:function(){var e=this;return Xe(Ke().mark((function n(){return Ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setSelected(!1),e.$emit("archive",e.data.databaseId),n.prev=2,n.next=5,e.$store.dispatch("moveThread",{envelope:e.data,destMailboxId:e.account.archiveMailboxId});case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),w.Z.error("could not archive message",n.t0),(0,U.showError)(t("mail","Could not archive message"));case 11:case"end":return n.stop()}}),n,null,[[2,7]])})))()},onOpenEditAsNew:function(){var t=this;return Xe(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("showMessageComposer",{templateMessageId:t.data.databaseId,data:t.data});case 2:case"end":return e.stop()}}),e)})))()},onOpenMoveModal:function(){this.showMoveModal=!0},onOpenEventModal:function(){this.showEventModal=!0},onMove:function(){this.$emit("move")},onCloseMoveModal:function(){this.showMoveModal=!1},onOpenTagModal:function(){this.showTagModal=!0},onCloseTagModal:function(){this.showTagModal=!1}}},on=r(30538),an={};an.styleTagTransform=g(),an.setAttributes=h(),an.insert=p().bind(null,"head"),an.domAPI=u(),an.insertStyleElement=A(),c()(on.Z,an),on.Z&&on.Z.locals&&on.Z.locals;var sn=(0,I.Z)(rn,(function(){var t=this,e=t._self._c;return e("ListItem",{directives:[{name:"draggable-envelope",rawName:"v-draggable-envelope",value:{accountId:t.data.accountId?t.data.accountId:t.mailbox.accountId,mailboxId:t.data.mailboxId,envelopeId:t.data.databaseId,draggableLabel:t.draggableLabel,selectedEnvelopes:t.selectedEnvelopes},expression:"{\n\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\tmailboxId: data.mailboxId,\n\t\tenvelopeId: data.databaseId,\n\t\tdraggableLabel,\n\t\tselectedEnvelopes,\n\t}"}],staticClass:"list-item-style envelope",class:{seen:t.data.flags.seen,draft:t.draft,selected:t.selected},attrs:{to:t.link,"data-envelope-id":t.data.databaseId,title:t.addresses,details:t.formatted()},on:{click:t.onClick},scopedSlots:t._u([{key:"icon",fn:function(){return[t.data.flags.flagged?e("Star",{staticClass:"app-content-list-item-star favorite-icon-style",attrs:{"fill-color":"#f9cf3d",size:18,"data-starred":t.data.flags.flagged?"true":"false"},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged.apply(null,arguments)}}}):t._e(),t._v(" "),t.isImportant?e("div",{staticClass:"app-content-list-item-star svg icon-important",attrs:{"data-starred":t.isImportant?"true":"false"},domProps:{innerHTML:t._s(t.importantSvg)},on:{click:function(e){return e.preventDefault(),t.onToggleImportant.apply(null,arguments)}}}):t._e(),t._v(" "),t.data.flags.$junk?e("JunkIcon",{staticClass:"app-content-list-item-star junk-icon-style",attrs:{size:18,"data-starred":t.data.flags.$junk?"true":"false"},on:{click:function(e){return e.preventDefault(),t.onToggleJunk.apply(null,arguments)}}}):t._e(),t._v(" "),e("div",{staticClass:"app-content-list-item-icon"},[e("Avatar",{attrs:{"display-name":t.addresses,email:t.avatarEmail}}),t._v(" "),t.selectMode?e("p",{staticClass:"app-content-list-item-select-checkbox"},[e("input",{staticClass:"checkbox",attrs:{id:"select-checkbox-".concat(t.data.uid),type:"checkbox"},domProps:{checked:t.selected}}),t._v(" "),e("label",{attrs:{for:"select-checkbox-".concat(t.data.uid)},on:{click:[function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.toggleSelected.apply(null,arguments))},function(e){return e.shiftKey?(e.preventDefault(),t.onSelectMultiple.apply(null,arguments)):null}]}})]):t._e()],1)]},proxy:!0},{key:"subtitle",fn:function(){return[e("div",{staticClass:"envelope__subtitle"},[t.data.flags.answered?e("Reply",{staticClass:"seen-icon-style",attrs:{size:18}}):t._e(),t._v(" "),!0===t.data.flags.hasAttachments?e("IconAttachment",{staticClass:"attachment-icon-style",attrs:{size:18}}):t.draft?e("span",{staticClass:"draft"},[e("em",[t._v(t._s(t.t("mail","Draft: ")))])]):t._e(),t._v(" "),e("span",{staticClass:"envelope__subtitle__subject"},[t._v("\n\t\t\t\t"+t._s(t.subjectForSubtitle)+"\n\t\t\t")])],1),t._v(" "),t.data.previewText?e("div",{staticClass:"envelope__preview-text"},[t._v("\n\t\t\t"+t._s(t.isEncrypted?t.t("mail","Encrypted message"):t.data.previewText)+"\n\t\t")]):t._e()]},proxy:!0},{key:"indicator",fn:function(){return[t.data.flags.seen?t._e():e("IconBullet",{attrs:{size:16,"aria-hidden":!1,"aria-label":t.t("mail","This message is unread"),"fill-color":"var(--color-primary-element)"}})]},proxy:!0},{key:"actions",fn:function(){return[t.moreActionsOpen?t._e():e("EnvelopePrimaryActions",[e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showFavoriteIconVariant?e("StarOutline",{attrs:{size:24}}):e("Star",{attrs:{size:24}})]},proxy:!0}],null,!1,2798023345)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.flagged?t.t("mail","Unfavorite"):t.t("mail","Favorite"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleSeen.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showImportantIconVariant?e("EmailUnread",{attrs:{size:24}}):e("EmailRead",{attrs:{size:24}})]},proxy:!0}],null,!1,3941285336)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.seen?t.t("mail","Unread"):t.t("mail","Read"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImportantIcon",{attrs:{size:24}})]},proxy:!0}],null,!1,2028812097)},[t._v("\n\t\t\t\t"+t._s(t.isImportant?t.t("mail","Unimportant"):t.t("mail","Important"))+"\n\t\t\t")])],1),t._v(" "),t.moreActionsOpen?t._e():[e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{title:t.data.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"),size:20}})]},proxy:!0}],null,!1,922843479)},[t._v("\n\t\t\t\t"+t._s(t.data.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.toggleSelected.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{title:t.selected?t.t("mail","Unselect"):t.t("mail","Select"),size:20}})]},proxy:!0}],null,!1,805099236)},[t._v("\n\t\t\t\t"+t._s(t.selected?t.t("mail","Unselect"):t.t("mail","Select"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenTagModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{title:t.t("mail","Edit tags"),size:20}})]},proxy:!0}],null,!1,1760434282)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit tags"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{title:t.t("mail","Move"),size:20}})]},proxy:!0}],null,!1,1852981371)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move thread"))+"\n\t\t\t")]),t._v(" "),t.showArchiveButton?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onArchive.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{title:t.t("mail","Archive thread"),size:20}})]},proxy:!0}],null,!1,1949348331)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Archive thread"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onDelete.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete thread"),size:20}})]},proxy:!0}],null,!1,2482086091)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Delete thread"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.moreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,2458825807)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")])],t._v(" "),t.moreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.moreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,194182918)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenEditAsNew.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon",{attrs:{title:t.t("mail","Edit as new message"),size:20}})]},proxy:!0}],null,!1,2673016614)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit as new message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){e.preventDefault(),t.showEventModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconCreateEvent",{attrs:{title:t.t("mail","Create event"),size:20}})]},proxy:!0}],null,!1,3445410757)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Create event"))+"\n\t\t\t")]),t._v(" "),e("ActionLink",{attrs:{"close-after-click":!0,href:t.exportMessageLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2598526839)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Download message"))+"\n\t\t\t")])]:t._e()]},proxy:!0},{key:"extra",fn:function(){return[t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("div",{staticClass:"tag-group__bg",style:{"background-color":n.color}}),t._v(" "),e("span",{staticClass:"tag-group__label",style:{color:n.color}},[t._v(t._s(n.displayName)+" ")])])})),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:[t.data],"move-thread":!0},on:{move:t.onMove,close:t.onCloseMoveModal}}):t._e(),t._v(" "),t.showEventModal?e("EventModal",{attrs:{envelope:t.data},on:{close:function(e){t.showEventModal=!1}}}):t._e(),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelope:t.data},on:{close:t.onCloseTagModal}}):t._e()]},proxy:!0}])})}),[],!1,null,"b47c32bc",null),cn=sn.exports,ln=r(11745),un=r(25546),dn=r(54679);function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function fn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hn(){hn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==pn(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function mn(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function An(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){mn(a,r,o,i,s,"next",t)}function s(t){mn(a,r,o,i,s,"throw",t)}i(void 0)}))}}var vn={name:"EnvelopeList",components:{Actions:o.O3,AddIcon:Yt.Z,ActionButton:o.Js,Envelope:cn,IconDelete:ct.Z,ImportantIcon:Rt.Z,IconFavorite:Ft.default,IconSelect:ln.Z,MoveModal:Pt,OpenInNewIcon:jt.Z,ShareIcon:dn.Z},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},envelopes:{type:Array,required:!0},searchQuery:{type:String,required:!1,default:void 0},refreshing:{type:Boolean,required:!0,default:!0},loadingMore:{type:Boolean,required:!0},loadMoreButton:{type:Boolean,required:!1,default:!1}},data:function(){return{selection:[],showMoveModal:!1,lastToggledIndex:void 0}},computed:{selectMode:function(){return this.selection.length>0},areAllSelectedRead:function(){return this.selectedEnvelopes.every((function(t){return!0===t.flags.seen}))},isAtLeastOneSelectedImportant:function(){var t=this;return this.selectedEnvelopes.some((function(e){return t.$store.getters.getEnvelopeTags(e.databaseId).some((function(t){return"$label1"===t.imapLabel}))}))},isAtLeastOneSelectedUnimportant:function(){var t=this;return this.selectedEnvelopes.some((function(e){return!t.$store.getters.getEnvelopeTags(e.databaseId).some((function(t){return"$label1"===t.imapLabel}))}))},areAllSelectedFavorite:function(){return this.selectedEnvelopes.every((function(t){return!0===t.flags.flagged}))},selectedEnvelopes:function(){var t=this;return this.envelopes.filter((function(e){return t.selection.includes(e.databaseId)}))},hasMultipleAccounts:function(){var t=this.envelopes.map((function(t){return t.mailboxId}));return Array.from(new Set(t)).length>1}},watch:{envelopes:function(t,e){var n=t.map((function(t){return t.databaseId}));this.selection=this.selection.filter((function(t){return n.includes(t)})),(0,un.F2w)((function(t,e){return t.databaseId===e.databaseId}),e,t).forEach((function(t){t.flags.selected=!1}))}},mounted:function(){ft.Z.$on("envelopes-dropped",this.unselectAll)},beforeDestroy:function(){ft.Z.$off("envelopes-dropped",this.unselectAll)},methods:{isEnvelopeSelected:function(t){return 0!==this.selection.length&&this.selection.includes(t)},markSelectedSeenOrUnseen:function(){var t=this,e=!this.areAllSelectedRead;this.selectedEnvelopes.forEach((function(n){t.$store.dispatch("toggleEnvelopeSeen",{envelope:n,seen:e})})),this.unselectAll()},markSelectionImportant:function(){var t=this;this.selectedEnvelopes.forEach((function(e){t.$store.dispatch("markEnvelopeImportantOrUnimportant",{envelope:e,addTag:!0})})),this.unselectAll()},markSelectionUnimportant:function(){var t=this;this.selectedEnvelopes.forEach((function(e){t.$store.dispatch("markEnvelopeImportantOrUnimportant",{envelope:e,addTag:!1})})),this.unselectAll()},favoriteOrUnfavoriteAll:function(){var t=this,e=!this.areAllSelectedFavorite;this.selectedEnvelopes.forEach((function(n){t.$store.dispatch("markEnvelopeFavoriteOrUnfavorite",{envelope:n,favFlag:e})})),this.unselectAll()},deleteAllSelected:function(){var e=this;return An(hn().mark((function n(){var r,o,a,i,s;return hn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.selectedEnvelopes.length===e.envelopes.length?o=!0:-1!==e.selectedEnvelopes.findIndex((function(t){return t.databaseId===e.$route.params.threadId}))&&(a=e.selectedEnvelopes[e.selectedEnvelopes.length-1],i=e.envelopes.filter((function(t){return t===a||!e.selectedEnvelopes.includes(t)})),s=i.indexOf(a),r=i[0===s?1:s-1]),n.next=3,Promise.all(e.selectedEnvelopes.map(function(){var t=An(hn().mark((function t(n){return hn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w.Z.info("deleting thread ".concat(n.threadRootId)),t.next=3,e.$store.dispatch("deleteThread",{envelope:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).catch(function(){var e=An(hn().mark((function e(n){var r;return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U.showError,e.next=3,(0,It.d)(n,(fn(r={},Et.Z.getName(),(function(){return t("mail","No trash mailbox configured")})),fn(r,"default",(function(e){return w.Z.error("could not delete message",e),t("mail","Could not delete message")})),r));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(!r){n.next=10;break}return n.next=6,e.$router.push({name:"message",params:{mailboxId:e.$route.params.mailboxId,threadId:r.databaseId}});case 6:return n.next=8,e.$store.dispatch("fetchNextEnvelopes",{mailboxId:e.mailbox.databaseId,query:e.searchQuery,quantity:e.selectedEnvelopes.length});case 8:n.next=13;break;case 10:if(!o){n.next=13;break}return n.next=13,e.$router.push({name:"mailbox",params:{mailboxId:e.$route.params.mailboxId}});case 13:e.unselectAll();case 14:case"end":return n.stop()}}),n)})))()},setEnvelopeSelected:function(t,e){var n=this.selection.includes(t.databaseId);e&&!n?(t.flags.selected=!0,this.selection.push(t.databaseId)):!e&&n&&(t.flags.selected=!1,this.selection.splice(this.selection.indexOf(t.databaseId),1))},onEnvelopeSelectToggle:function(t,e,n){this.lastToggledIndex=e,this.setEnvelopeSelected(t,n)},onEnvelopeSelectMultiple:function(t,e){if(void 0!==this.lastToggledIndex){for(var n=Math.min(this.lastToggledIndex,e),r=Math.max(this.lastToggledIndex,e),o=this.selection.includes(t.databaseId),a=n;a<=r;a++)this.setEnvelopeSelected(this.envelopes[a],!o);this.lastToggledIndex=e}},unselectAll:function(){this.envelopes.forEach((function(t){t.flags.selected=!1})),this.selection=[]},onOpenMoveModal:function(){this.showMoveModal=!0},forwardSelectedAsAttachment:function(){var t=this;return An(hn().mark((function e(){return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("showMessageComposer",{forwardedMessages:t.selection});case 2:t.unselectAll();case 3:case"end":return e.stop()}}),e)})))()},onCloseMoveModal:function(){this.showMoveModal=!1,this.unselectAll()}}},gn=vn,yn=r(54027),Cn={};Cn.styleTagTransform=g(),Cn.setAttributes=h(),Cn.insert=p().bind(null,"head"),Cn.domAPI=u(),Cn.insertStyleElement=A(),c()(yn.Z,Cn),yn.Z&&yn.Z.locals&&yn.Z.locals;var bn=(0,I.Z)(gn,(function(){var t=this,e=t._self._c;return e("div",[e("transition",{attrs:{name:"multiselect-header"}},[t.selectMode?e("div",{key:"multiselect-header",staticClass:"multiselect-header"},[e("div",{staticClass:"button primary",on:{click:function(e){return e.preventDefault(),t.markSelectedSeenOrUnseen.apply(null,arguments)}}},[e("span",{attrs:{id:"action-label"}},[t._v(t._s(t.areAllSelectedRead?t.n("mail","Mark {number} unread","Mark {number} unread",t.selection.length,{number:t.selection.length}):t.n("mail","Mark {number} read","Mark {number} read",t.selection.length,{number:t.selection.length})))])]),t._v(" "),e("Actions",{staticClass:"app-content-list-item-menu",attrs:{"menu-align":"right"}},[t.isAtLeastOneSelectedUnimportant?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.markSelectionImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImportantIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4006335173)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Mark {number} as important","Mark {number} as important",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.isAtLeastOneSelectedImportant?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.markSelectionUnimportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImportantIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4006335173)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Mark {number} as unimportant","Mark {number} as unimportant",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.favoriteOrUnfavoriteAll.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFavorite",{attrs:{size:20}})]},proxy:!0}],null,!1,747028727)},[t._v("\n\t\t\t\t\t"+t._s(t.areAllSelectedFavorite?t.n("mail","Unfavorite {number}","Unfavorite {number}",t.selection.length,{number:t.selection.length}):t.n("mail","Favorite {number}","Favorite {number}",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.unselectAll.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSelect",{attrs:{size:20}})]},proxy:!0}],null,!1,3052863531)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Unselect {number}","Unselect {number}",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),t.account.isUnified?t._e():e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1266168172)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Move {number} thread","Move {number} threads",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.forwardSelectedAsAttachment.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward"),size:20}})]},proxy:!0}],null,!1,3681882419)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Forward {number} as attachment","Forward {number} as attachment",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.deleteAllSelected.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,881161434)},[t._v("\n\t\t\t\t\t"+t._s(t.n("mail","Delete {number} thread","Delete {number} threads",t.selection.length,{number:t.selection.length}))+"\n\t\t\t\t")])],1),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:t.selectedEnvelopes,"move-thread":!0},on:{close:t.onCloseMoveModal}}):t._e()],1):t._e()]),t._v(" "),e("transition-group",{attrs:{name:"list"}},[t._l(t.envelopes,(function(n,r){return e("Envelope",{key:n.databaseId,attrs:{data:n,mailbox:t.mailbox,selected:t.selection.includes(n.databaseId),"select-mode":t.selectMode,"has-multiple-accounts":t.hasMultipleAccounts,"selected-envelopes":t.selectedEnvelopes},on:{delete:function(e){return t.$emit("delete",n.databaseId)},"update:selected":function(e){return t.onEnvelopeSelectToggle(n,r,e)},"select-multiple":function(e){return t.onEnvelopeSelectMultiple(n,r)}}})})),t._v(" "),t.loadMoreButton&&!t.loadingMore?e("div",{key:"list-collapse-"+t.searchQuery,staticClass:"load-more",on:{click:function(e){return t.$emit("load-more")}}},[e("AddIcon",{attrs:{size:20}}),t._v("\n\t\t\t"+t._s(t.t("mail","Load more"))+"\n\t\t")],1):t._e(),t._v(" "),e("div",{key:"loadingMore",class:{"icon-loading-small":t.loadingMore},attrs:{id:"load-more-mail-messages"}})],2)],1)}),[],!1,null,"a9161c92",null),xn=bn.exports,wn={name:"LoadingSkeleton",props:{numberOfLines:{type:Number,default:10},withAvatar:{type:Boolean,default:!0}}},_n=r(91816),kn={};kn.styleTagTransform=g(),kn.setAttributes=h(),kn.insert=p().bind(null,"head"),kn.domAPI=u(),kn.insertStyleElement=A(),c()(_n.Z,kn),_n.Z&&_n.Z.locals&&_n.Z.locals;var En=(0,I.Z)(wn,(function(){var t=this,e=t._self._c;return e("div",t._l(t.numberOfLines,(function(n){return e("div",{key:n,staticClass:"item-list__entry"},[e("div",{staticClass:"item-avatar"}),t._v(" "),t._m(0,!0)])})),0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item__details"},[e("h3",[t._v("")]),t._v(" "),e("p",{staticClass:"message"},[t._v("\n\t\t\t\t\n\t\t\t")]),t._v(" "),e("p",{staticClass:"message-preview"},[t._v("\n\t\t\t\t\n\t\t\t")])])}],!1,null,"52da2fce",null).exports,In=r(72363),Sn=r.n(In),Ln=r(10861),Tn=r.n(Ln),Dn=r(82124),Bn={name:"Error",components:{NcEmptyContent:z(),NcButton:Tn(),AlertCircleIcon:Dn.Z},props:{error:{type:String,required:!0},message:{type:String,required:!0},data:{type:Object,default:function(){}},autoMargin:{type:Boolean,default:!1}},computed:{reportUrl:function(){return function(t){console.error(t);var e=t.message||"An unkown error occurred.";e.endsWith(".")||(e+=".");var n=(new(Sn())).addEmptyStepsToReproduce().addExpectedActualBehaviour().addLogs("Error",function(t){var e="";return t.type&&(e+=t.type+": "),e+=t.message,e+="\n",t.trace&&(e+=t.trace.reduce((function(t,e){var n="";return e.class?n+="  at "+e.class+"::"+e.function:n+="  at "+e.function,e.file&&(n+="\n     "+e.file+", line "+e.line),t+n+"\n"}),"")),t.stack&&(e+=t.stack),e}(t)).render();return"https://github.com/nextcloud/mail/issues/new?title="+encodeURIComponent(e)+"&body="+encodeURIComponent(n)}(this.data)}}},On=r(24950),Mn={};Mn.styleTagTransform=g(),Mn.setAttributes=h(),Mn.insert=p().bind(null,"head"),Mn.domAPI=u(),Mn.insertStyleElement=A(),c()(On.Z,Mn),On.Z&&On.Z.locals&&On.Z.locals;var Pn=(0,I.Z)(Bn,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{staticClass:"mail-error",class:{"mail-error--auto-margin":t.autoMargin},attrs:{title:t.error,description:t.message},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertCircleIcon",{attrs:{size:24}})]},proxy:!0},t.data&&t.data.debug?{key:"action",fn:function(){return[e("NcButton",{attrs:{href:t.reportUrl}},[t._v("\n\t\t\t"+t._s(t.t("mail","Report this bug"))+"\n\t\t")])]},proxy:!0}:null],null,!0)})}),[],!1,null,"e027202c",null).exports,jn={name:"Loading",components:{IconLoading:o.lb,EmptyContent:o.SL},props:{hint:{type:String,default:"",required:!1},slowHint:{type:String,default:"",required:!1}},data:function(){return{slow:!1,slowTimer:void 0}},mounted:function(){var t=this;clearTimeout(this.slowTimer),this.slowTimer=setTimeout((function(){t.slow=!0}),3500)},beforeDestroy:function(){clearTimeout(this.slowTimer)}},Nn=r(97551),Fn={};Fn.styleTagTransform=g(),Fn.setAttributes=h(),Fn.insert=p().bind(null,"head"),Fn.domAPI=u(),Fn.insertStyleElement=A(),c()(Nn.Z,Fn),Nn.Z&&Nn.Z.locals&&Nn.Z.locals;var Zn=(0,I.Z)(jn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.hint?e("EmptyContent",{attrs:{title:t.hint},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:20}})]},proxy:!0}],null,!1,3081367109)},[t._v(" "),e("transition",{attrs:{name:"fade"}},[t.slowHint&&t.slow?e("em",[t._v(t._s(t.slowHint))]):t._e()])],1):e("IconLoading",{staticClass:"container"})],1)}),[],!1,null,"33b18a28",null).exports,Gn=r(39441),zn=r(29493),Rn=r(47836),$n={name:"EmptyMailboxSection",components:{IconMail:Z.Z,NcEmptyContent:z()}};function Un(t){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(t)}function qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yn(){Yn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Un(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Wn(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Vn(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Wn(a,r,o,i,s,"next",t)}function s(t){Wn(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Hn={name:"Mailbox",components:{EmptyMailboxSection:(0,I.Z)($n,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{attrs:{title:t.t("mail","No messages")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail",{attrs:{size:65}})]},proxy:!0}])})}),[],!1,null,null,null).exports,EmptyMailbox:$,EnvelopeList:xn,Error:Pn,Loading:Zn,LoadingSkeleton:En},mixins:[i()],props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},bus:{type:Object,required:!0},paginate:{type:String,default:"scroll"},initialPageSize:{type:Number,default:20},openFirst:{type:Boolean,default:!0},searchQuery:{type:String,required:!1,default:void 0},isPriorityInbox:{type:Boolean,required:!1,default:!1}},data:function(){return{error:!1,refreshing:!1,loadingMore:!1,loadingEnvelopes:!0,loadingCacheInitialization:!1,loadMailboxInterval:void 0,expanded:!1,endReached:!1}},computed:{envelopes:function(){return this.$store.getters.getEnvelopes(this.mailbox.databaseId,this.searchQuery)},envelopesToShow:function(){return"manual"!==this.paginate||this.expanded?this.envelopes:this.envelopes.slice(0,8)},hasMessages:function(){return this.envelopes.length>0},showLoadMore:function(){return!this.endReached&&"manual"===this.paginate}},watch:{$route:function(t){if(void 0===t.params.threadId&&!this.isMobile){var e=this.envelopes[0];void 0!==e&&(w.Z.debug("refreshing mailbox"),this.$route.params.mailboxId===this.account.draftsMailboxId||this.$router.replace({name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:e.databaseId}}))}},account:function(){this.loadEnvelopes()},mailbox:function(){var t=this;this.loadEnvelopes().then((function(){w.Z.debug("syncing mailbox ".concat(t.mailbox.databaseId," (").concat(t.query,") after mailbox change")),t.sync(!1)}))},searchQuery:function(){this.loadEnvelopes()}},created:function(){this.bus.$on("load-more",this.onScroll),this.bus.$on("delete",this.onDelete),this.bus.$on("archive",this.onArchive),this.bus.$on("shortcut",this.handleShortcut),this.loadMailboxInterval=setInterval(this.loadMailbox,6e4)},mounted:function(){var t=this;return Vn(Yn().mark((function e(){return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadEnvelopes().then((function(){w.Z.debug("syncing mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") after mount")),t.sync(!1)}));case 1:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.bus.$off("load-more",this.onScroll),this.bus.$off("delete",this.onDelete),this.bus.$off("archive",this.onArchive),this.bus.$off("shortcut",this.handleShortcut),this.stopInterval()},methods:{initializeCache:function(){var t=this;this.loadingCacheInitialization=!0,this.error=!1,w.Z.debug("syncing mailbox ".concat(this.mailbox.databaseId," (").concat(this.query,") during cache initalization")),this.sync(!0).then((function(){return t.loadingCacheInitialization=!1,t.loadEnvelopes()}))},loadEnvelopes:function(){var t=this;return Vn(Yn().mark((function e(){var n,r,o;return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.Z.debug("Fetching envelopes for mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,")"),t.mailbox),t.loadingEnvelopes=!0,t.loadingCacheInitialization=!1,t.error=!1,e.prev=4,e.next=7,t.$store.dispatch("fetchEnvelopes",{mailboxId:t.mailbox.databaseId,query:t.searchQuery,limit:t.initialPageSize});case 7:n=e.sent,w.Z.debug(n.length+" envelopes fetched",{envelopes:n}),t.loadingEnvelopes=!1,t.openFirst&&!t.isMobile&&"message"!==t.$route.name&&n.length>0&&(r=n[0],w.Z.debug("showing the first message of mailbox "+t.$route.params.mailboxId),t.$route.params.mailboxId===t.account.draftsMailboxId?t.$router.replace({name:"message",params:{mailboxId:t.$route.params.mailboxId,filter:t.$route.params.filter?t.$route.params.filter:void 0,threadId:"new",draftId:r.databaseId}}):t.$router.replace({name:"message",params:{mailboxId:t.$route.params.mailboxId,filter:t.$route.params.filter?t.$route.params.filter:void 0,threadId:r.databaseId}})),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(4),e.next=17,(0,It.d)(e.t0,(qn(o={},Gn.Z.getName(),function(){var e=Vn(Yn().mark((function e(n){return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.Z.info("Mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") is locked"),{error:n}),e.next=3,(0,Rn.D)(15e3);case 3:return e.next=5,t.loadEnvelopes();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),qn(o,zn.Z.getName(),function(){var e=Vn(Yn().mark((function e(n){return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.Z.info("Mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") not cached. Triggering initialization"),{error:n}),t.loadingEnvelopes=!1,e.prev=2,e.next=5,t.initializeCache();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),w.Z.error("Could not initialize cache of mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,")"),{error:e.t0}),t.error=e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()),qn(o,"default",(function(e){w.Z.error("Could not fetch envelopes of mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,")"),{error:e}),t.loadingEnvelopes=!1,t.error=e})),o));case 17:case"end":return e.stop()}}),e,null,[[4,13]])})))()},loadMore:function(){var t=this;return Vn(Yn().mark((function e(){return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.expanded){e.next=4;break}return w.Z.debug("expanding envelope list"),t.expanded=!0,e.abrupt("return");case 4:return w.Z.debug("fetching next envelope page"),t.loadingMore=!0,e.prev=6,e.next=9,t.$store.dispatch("fetchNextEnvelopePage",{mailboxId:t.mailbox.databaseId,query:t.searchQuery});case 9:0===e.sent.length&&(w.Z.info("envelope list end reached"),t.endReached=!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),w.Z.error("could not fetch next envelope page",{error:e.t0});case 16:return e.prev=16,t.loadingMore=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[6,13,16,19]])})))()},handleShortcut:function(e){var n=this;return Vn(Yn().mark((function r(){var o,a,i,s,c,l;return Yn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=n.envelopes,a=parseInt(n.$route.params.threadId,10),i=o.find((function(t){return t.databaseId===a})),s=o.indexOf(i),"refresh"===e.srcKey||i||w.Z.debug("envelope is not in the list, ignoring shortcut",{srcKey:e.srcKey}),r.t0=e.srcKey,r.next="next"===r.t0||"prev"===r.t0?8:"del"===r.t0?14:"arch"===r.t0?30:"flag"===r.t0?42:"refresh"===r.t0?45:"unseen"===r.t0?48:51;break;case 8:if(c="next"===e.srcKey?o[s+1]:o[s-1]){r.next=12;break}return w.Z.debug("ignoring shortcut: head or tail of envelope list reached",{envelopes:o,idx:s,srcKey:e.srcKey}),r.abrupt("return");case 12:return n.$router.push({name:"message",params:{mailboxId:n.$route.params.mailboxId,filter:n.$route.params.filter?n.$route.params.filter:void 0,threadId:c.databaseId}}),r.abrupt("break",52);case 14:return w.Z.debug("deleting",{env:i}),n.onDelete(i.databaseId),r.prev=16,r.next=19,n.$store.dispatch("deleteThread",{envelope:i});case 19:r.next=29;break;case 21:return r.prev=21,r.t1=r.catch(16),w.Z.error("could not delete envelope",{env:i,error:r.t1}),r.t2=U.showError,r.next=27,(0,It.d)(r.t1,(qn(l={},Et.Z.getName(),(function(){return t("mail","No trash mailbox configured")})),qn(l,"default",(function(){return t("mail","Could not delete message")})),l));case 27:r.t3=r.sent,(0,r.t2)(r.t3);case 29:return r.abrupt("break",52);case 30:return w.Z.debug("archiving",{env:i}),n.onArchive(i.databaseId),r.prev=32,r.next=35,n.$store.dispatch("moveThread",{envelope:i,destMailboxId:n.account.archiveMailboxId});case 35:r.next=41;break;case 37:r.prev=37,r.t4=r.catch(32),w.Z.error("could not archive envelope",{env:i,error:r.t4}),(0,U.showError)(t("mail","Could not archive message"));case 41:return r.abrupt("break",52);case 42:return w.Z.debug("flagging envelope via shortkey",{env:i}),n.$store.dispatch("toggleEnvelopeFlagged",i).catch((function(t){return w.Z.error("could not flag envelope via shortkey",{env:i,error:t})})),r.abrupt("break",52);case 45:return w.Z.debug("syncing mailbox ".concat(n.mailbox.databaseId," (").concat(n.searchQuery,") per shortcut")),n.sync(!1),r.abrupt("break",52);case 48:return w.Z.debug("marking message as seen/unseen via shortkey",{env:i}),n.$store.dispatch("toggleEnvelopeSeen",{envelope:i}).catch((function(t){return w.Z.error("could not mark envelope as seen/unseen via shortkey",{env:i,error:t})})),r.abrupt("break",52);case 51:w.Z.warn("shortcut "+e.srcKey+" is unknown. ignoring.");case 52:case"end":return r.stop()}}),r,null,[[16,21],[32,37]])})))()},sync:function(){var t=arguments,e=this;return Vn(Yn().mark((function n(){var r,o;return Yn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]&&t[0],!e.refreshing){n.next=4;break}return w.Z.debug("already sync'ing mailbox ".concat(e.mailbox.databaseId," (").concat(e.searchQuery,"), aborting"),{init:r}),n.abrupt("return");case 4:return e.refreshing=!0,n.prev=5,n.next=8,e.$store.dispatch("syncEnvelopes",{mailboxId:e.mailbox.databaseId,query:e.searchQuery,init:r});case 8:n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(5),(0,It.d)(n.t0,(qn(o={},Gn.Z.getName(),(function(t){w.Z.info("Background sync failed because the mailbox is locked",{error:t,init:r})})),qn(o,"default",(function(t){w.Z.error("Could not sync envelopes: "+t.message,{error:t,init:r})})),o)),n.t0;case 14:return n.prev=14,e.refreshing=!1,w.Z.debug("finished sync'ing mailbox ".concat(e.mailbox.databaseId," (").concat(e.searchQuery,")"),{init:r}),n.finish(14);case 18:case"end":return n.stop()}}),n,null,[[5,10,14,18]])})))()},onDelete:function(t){this.$store.dispatch("fetchNextEnvelopes",{mailboxId:this.mailbox.databaseId,query:this.searchQuery,quantity:1});var e=(0,un.cxD)((0,un.OH4)("databaseId",t),this.envelopes);if(-1!==e)if(t===this.$route.params.threadId){var n=this.envelopes[0===e?1:e-1];n?this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params.filter?this.$route.params.filter:void 0,threadId:n.databaseId}}):w.Z.debug("no next/previous envelope, not navigating")}else w.Z.debug("other message open, not jumping to the next/previous message");else w.Z.debug("envelope to delete does not exist in envelope list")},onScroll:function(){"scroll"===this.paginate?this.loadMore():w.Z.debug("ignoring scroll pagination")},loadMailbox:function(){var t=this;return Vn(Yn().mark((function e(){return Yn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.account.isUnified&&"inbox"!==t.mailbox.specialRole){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,w.Z.debug("syncing mailbox ".concat(t.mailbox.databaseId," (").concat(t.searchQuery,") in background")),e.next=6,t.sync(!1);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),w.Z.error("Background sync failed: "+e.t0.message,{error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))()},stopInterval:function(){clearInterval(this.loadMailboxInterval),this.loadMailboxInterval=void 0}}},Qn=Hn,Kn=r(49885),Jn={};Jn.styleTagTransform=g(),Jn.setAttributes=h(),Jn.insert=p().bind(null,"head"),Jn.domAPI=u(),Jn.insertStyleElement=A(),c()(Kn.Z,Jn),Kn.Z&&Kn.Z.locals&&Kn.Z.locals;var Xn=(0,I.Z)(Qn,(function(){var t=this,e=t._self._c;return e("div",[t.error?e("Error",{attrs:{error:t.t("mail","Could not open mailbox"),message:"",role:"alert"}}):t.loadingEnvelopes?e("LoadingSkeleton",{attrs:{"number-of-lines":20}}):t.loadingCacheInitialization?e("Loading",{attrs:{hint:t.t("mail","Loading messages "),"slow-hint":t.t("mail","Indexing your messages. This can take a bit longer for larger mailboxes.")}}):t.isPriorityInbox&&!t.hasMessages?e("EmptyMailboxSection",{key:"empty"}):t.hasMessages?e("EnvelopeList",{attrs:{account:t.account,mailbox:t.mailbox,"search-query":t.searchQuery,envelopes:t.envelopesToShow,refreshing:t.refreshing,"loading-more":t.loadingMore,"load-more-button":t.showLoadMore},on:{delete:t.onDelete,"load-more":t.loadMore}}):e("EmptyMailbox",{key:"empty"})],1)}),[],!1,null,"2d8565fa",null).exports,tr=r(70110),er=r.n(tr),nr=r(98266),rr=r.n(nr),or=r(36767),ar=r.n(or),ir=r(12945),sr=r.n(ir),cr=r(45400),lr=r.n(cr),ur=r(20571),dr=r.n(ur),pr=r(55976),fr=r(82675),hr=r(93234),mr=r(69496),Ar=r.n(mr),vr=function(t){var e=(0,K.generateUrl)("/apps/mail/api/autoComplete?term={term}",{term:t});return Q.Z.get(e).then((function(t){return t.data}))},gr=r(83049),yr=r.n(gr);function Cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return br(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xr=Ar()(vr,500),wr={name:"SearchMessages",components:{NcModal:er(),NcMultiselect:rr(),NcDatetimePicker:ar(),NcActions:sr(),NcActionButton:lr(),NcButton:Tn(),NcCheckboxRadioSwitch:dr(),Tune:pr.Z,Close:fr.default,Magnify:hr.Z},props:{mailbox:{type:Object,required:!0}},data:function(){return{modalQuery:"",query:"",debouncedSearchQuery:Ar()(this.sendQueryEvent,700),autocompleteRecipients:[],selectedTags:[],moreSearchActions:!1,searchInFrom:null,searchInTo:null,searchInCc:null,searchInBcc:null,searchInSubject:!0,searchInMessageBody:!1,searchFlags:[],hasAttachments:!1,startDate:null,endDate:null}},computed:{tags:function(){return this.$store.getters.getTags},filterChanged:function(){return Object.entries(this.filterData).filter((function(t){var e=Cr(t,2);return e[0],""!==e[1]})).length>0},filterData:function(){return{to:null!==this.searchInTo&&this.searchInTo.length>0?this.searchInTo[0].email:"",from:null!==this.searchInFrom&&this.searchInFrom.length>0?this.searchInFrom[0].email:"",cc:null!==this.searchInCc&&this.searchInCc.length>0?this.searchInCc[0].email:"",bcc:null!==this.searchInBcc&&this.searchInBcc.length>0?this.searchInBcc[0].email:"",subject:this.searchInSubject&&this.query.length>1?this.query:"",tags:this.selectedTags.length>0?this.selectedTags.map((function(t){return t.id})):"",flags:this.searchFlags.length>0?this.searchFlags.map((function(t){return t})):"",start:this.prepareStart(),end:this.prepareEnd(),attachments:this.hasAttachments?this.hasAttachments.toString():""}},searchQuery:function(){var t="";return Object.entries(this.filterData).filter((function(e){var n=Cr(e,2),r=n[0],o=n[1];return""!==o&&null!==o&&(-1!==o.indexOf(" ")&&(o=o.replace(/ /g,"+")),t+="".concat(r,":").concat(o," ")),o})),t.trim()}},watch:{query:function(){this.query!==this.modalQuery&&(this.modalQuery=this.query),this.debouncedSearchQuery()}},methods:{prepareStart:function(){return null!==this.startDate?(null!==this.endDate&&this.startDate>this.endDate&&(this.endDate=this.startDate),_t()(this.startDate).unix().toString()):""},prepareEnd:function(){return null!==this.endDate?_t()(this.endDate).add(1,"days").unix().toString():""},closeSearchModal:function(){var t=this;this.moreSearchActions=!1,this.$nextTick((function(){t.query!==t.modalQuery?t.query=t.modalQuery:t.sendQueryEvent()}))},sendQueryEvent:function(){this.$emit("search-changed",this.searchQuery)},searchRecipients:function(t){var e=this;void 0!==t&&""!==t&&xr(t).then((function(t){e.autocompleteRecipients=yr()("email")(e.autocompleteRecipients.concat(t))}))},resetFilter:function(){var t=this.query;this.query="",this.selectedTags=[],this.moreSearchActions=!1,this.searchInFrom=null,this.searchInTo=null,this.searchInCc=null,this.searchInBcc=null,this.searchInSubject=!0,this.searchInMessageBody=!1,this.searchFlags=[],this.startDate=null,this.endDate=null,""===t&&this.sendQueryEvent()},addTag:function(t,e){var n=[{label:t,email:t}];switch(e){case"to":this.searchInTo=n;break;case"from":this.searchInFrom=n;break;case"cc":this.searchInCc=n;break;case"bcc":this.searchInBcc=n}}}},_r=r(21890),kr={};kr.styleTagTransform=g(),kr.setAttributes=h(),kr.insert=p().bind(null,"head"),kr.domAPI=u(),kr.insertStyleElement=A(),c()(_r.Z,kr),_r.Z&&_r.Z.locals&&_r.Z.locals;var Er=(0,I.Z)(wr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-messages"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search-messages--input",attrs:{type:"text",placeholder:t.t("mail","Search in mailbox")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),t.filterChanged?e("NcButton",{staticClass:"search-messages--close",on:{click:function(e){return t.resetFilter()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Close",{attrs:{size:24}})]},proxy:!0}],null,!1,1411281818)}):t._e(),t._v(" "),t.filterChanged?e("span",{staticClass:"filter-changed"}):t._e(),t._v(" "),e("NcActions",[e("NcActionButton",{on:{click:function(e){t.moreSearchActions=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Tune",{attrs:{size:24}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Search parameters"))+"\n\t\t")])],1),t._v(" "),t.moreSearchActions?e("NcModal",{staticClass:"search-modal",attrs:{title:t.t("mail","Search parameters")},on:{close:t.closeSearchModal}},[e("h2",{staticClass:"modal-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Search in mailbox"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--content"},[e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Search term"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modalQuery,expression:"modalQuery"}],staticClass:"search-input",attrs:{type:"text",placeholder:t.t("mail","Search in mailbox")},domProps:{value:t.modalQuery},on:{input:function(e){e.target.composing||(t.modalQuery=e.target.value)}}})])]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Date"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container range"},[e("div",{staticClass:"modal-inner-inline"},[e("NcDatetimePicker",{attrs:{type:"date",placeholder:t.t("mail","Pick a start date"),confirm:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcDatetimePicker",{attrs:{type:"date",disabled:null===t.startDate,placeholder:t.t("mail","Pick an end date"),confirm:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)])]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","From"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcMultiselect",{attrs:{id:"fromId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInFrom,placeholder:t.t("mail","Select sender"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0,max:1},on:{tag:function(e){return t.addTag(e,"from")},"search-change":function(e){return t.searchRecipients(e)}},model:{value:t.searchInFrom,callback:function(e){t.searchInFrom=e},expression:"searchInFrom"}})],1)]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"toId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","To"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcMultiselect",{attrs:{id:"toId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInTo,placeholder:t.t("mail","Select recipient"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0,max:1},on:{tag:function(e){return t.addTag(e,"to")},"search-change":function(e){return t.searchRecipients(e)}},model:{value:t.searchInTo,callback:function(e){t.searchInTo=e},expression:"searchInTo"}})],1)]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"ccId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Cc"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcMultiselect",{attrs:{id:"ccId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInCc,placeholder:t.t("mail","Select cc recipient"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0,max:1},on:{tag:function(e){return t.addTag(e,"cc")},"search-change":function(e){return t.searchRecipients(e)}},model:{value:t.searchInCc,callback:function(e){t.searchInCc=e},expression:"searchInCc"}})],1)]),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"bccId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Bcc"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[e("NcMultiselect",{attrs:{id:"bccId",label:"label","track-by":"email",options:t.autocompleteRecipients,value:t.searchInCc,placeholder:t.t("mail","Select bcc recipient"),multiple:!0,taggable:!0,"close-on-select":!0,"show-no-options":!1,"preserve-search":!0,max:1},on:{tag:function(e){return t.addTag(e,"bcc")},"search-change":function(e){return t.searchRecipients(e)}},model:{value:t.searchInBcc,callback:function(e){t.searchInBcc=e},expression:"searchInBcc"}})],1)]),t._v(" "),t.tags.length>0?e("div",{staticClass:"modal-inner--field"},[e("label",{attrs:{for:"tagsId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Tags"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container"},[t.tags.length>0?e("NcMultiselect",{staticClass:"multiselect-search-tags",attrs:{id:"tagsId",options:t.tags,label:"displayName",value:t.selectedTags,placeholder:t.t("mail","Select tags"),"track-by":"displayName",multiple:!0,"auto-limit":!1,"close-on-select":!1},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("div",{staticClass:"tag-group__search"},[e("div",{staticClass:"tag-group__bg",style:"background-color:"+("#fff"!==r.color?r.color:"#333")}),t._v(" "),e("div",{staticClass:"tag-group__label",style:"color:"+r.color},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(r.displayName)+"\n\t\t\t\t\t\t\t\t")])])]}},{key:"option",fn:function(e){var n=e.option;return[t._v("\n\t\t\t\t\t\t\t"+t._s(n.displayName)+"\n\t\t\t\t\t\t")]}}],null,!1,1217156861),model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}}):t._e()],1)]):t._e(),t._v(" "),e("div",{staticClass:"modal-inner--field"},[e("label",{staticClass:"modal-inner--label",attrs:{for:"fromId"}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Marked as"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"modal-inner--container marked-as"},[e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"is_important",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Important"))+"\n\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"starred",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Favorite"))+"\n\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"unread",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Unread"))+"\n\t\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"modal-inner-inline"},[e("NcCheckboxRadioSwitch",{attrs:{checked:t.searchFlags,value:"attachments",name:"flags[]",type:"checkbox"},on:{"update:checked":function(e){t.searchFlags=e}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Has attachments"))+"\n\t\t\t\t\t\t")])],1)])]),t._v(" "),e("div",{staticClass:"modal-inner-field--right"},[e("NcButton",{staticClass:"button-reset-filter",on:{click:function(e){return t.resetFilter()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Close",{attrs:{size:24}})]},proxy:!0}],null,!1,1411281818)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Clear"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary"},on:{click:function(e){return t.closeSearchModal()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Magnify",{attrs:{size:24}})]},proxy:!0}],null,!1,4196774431)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Search"))+"\n\t\t\t\t")])],1)])]):t._e()],1)}),[],!1,null,null,null).exports,Ir={name:"NoMessageSelected",components:{AppContentDetails:o.ZJ,NcEmptyContent:o.SL,IconMail:Z.Z}},Sr=(0,I.Z)(Ir,(function(){var t=this,e=t._self._c;return e("AppContentDetails",[e("NcEmptyContent",{attrs:{title:t.t("mail","No message selected")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail",{attrs:{size:65}})]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,Lr=r(76810),Tr=r.n(Lr),Dr=r(9944),Br=[":-(",":-/",":-\\",":-|",":'-(",":'-/",":'-\\",":'-|"],Or=r(31432),Mr=r(86158);function Pr(t){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}function jr(){jr=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Pr(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Nr(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fr(Object(n),!0).forEach((function(e){Gr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zr=Ar()((function(t){var e=(0,K.generateUrl)("/apps/mail/api/contactIntegration/autoComplete/{term}",{term:t});return Q.Z.get(e).then((function(t){return t.data}))}),500),Rr=Object.freeze({new:1,existing:2,select:3}),$r={name:"RecipientBubble",components:{ButtonVue:o.P2,UserBubble:o.uq,Popover:o.Fh,Multiselect:o.Z2,IconReply:Zt.Z,IconUser:Mr.Z,IconAdd:Yt.Z,IconClose:fr.default,IconClipboard:Or.Z,IconDetails:F.Z,IconCheck:it.default},props:{email:{type:String,required:!0},label:{type:String,required:!0}},data:function(){return{avatarUrl:void 0,loadingContacts:!1,contactsWithEmail:[],autoCompleteContacts:[],selectedContact:"",newContactName:"",ContactSelectionStateEnum:Rr,selection:Rr.select,isContactPopoverOpen:!1}},computed:{avatarUrlAbsolute:function(){if(this.avatarUrl)return this.avatarUrl.startsWith("http")?this.avatarUrl:window.location.protocol+"//"+window.location.host+(0,K.generateUrl)(this.avatarUrl)},selectableContacts:function(){return this.autoCompleteContacts.map((function(t){return Zr(Zr({},t),{},{label:t.label})}))},contactsWithEmailComputed:function(){var t="";return this.contactsWithEmail&&this.contactsWithEmail.length>3&&(t=" + ".concat(this.contactsWithEmail.length-3)),this.contactsWithEmail.slice(0,3).map((function(t){return t.label})).join(", ").concat(t)},addButtonDisabled:function(){return!(this.selection===Rr.existing&&this.selectedContact||this.selection===Rr.new&&""!==this.newContactName.trim())}},mounted:function(){var t,e=this;return(t=jr().mark((function t(){return jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J(e.email);case 3:e.avatarUrl=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.debug("no avatar for "+e.email,{error:t.t0});case 9:e.newContactName=e.label;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Nr(a,r,o,i,s,"next",t)}function s(t){Nr(a,r,o,i,s,"throw",t)}i(void 0)}))})()},methods:{onClickCopyToClipboard:function(){this.$copyText(this.email,this.$refs.popover.$refs.popover.$refs.popperContent.$el)},onClickReply:function(){this.$router.push({name:"message",params:{mailboxId:this.$route.params.mailboxId,threadId:"mailto"},query:{to:this.email}})},onClickOpenContactDialog:function(){var t=this;0===this.contactsWithEmail.length&&function(t){var e=(0,K.generateUrl)("/apps/mail/api/contactIntegration/match/{mail}",{mail:t});return Q.Z.get(e).then((function(t){return t.data}))}(this.email).then((function(e){e&&e.length>0&&(t.contactsWithEmail=e)}))},onClickAddToContact:function(){var t,e,n;this.selection===Rr.new?""!==this.newContactName&&(t=this.newContactName.trim(),e=this.email,n=(0,K.generateUrl)("/apps/mail/api/contactIntegration/new"),Q.Z.put(n,{contactName:t,mail:e}).then((function(t){return t.data}))).then((function(t){return console.debug("ContactIntegration",t)})):this.selection===Rr.existing&&this.selectedContact&&function(t,e){var n=(0,K.generateUrl)("/apps/mail/api/contactIntegration/add");return Q.Z.put(n,{uid:t,mail:e}).then((function(t){return t.data}))}(this.selectedContact.id,this.email).then((function(t){return console.debug("ContactIntegration",t)}))},onAutocomplete:function(t){var e=this;void 0!==t&&""!==t&&zr(t).then((function(t){e.autoCompleteContacts=yr()("id")(e.autoCompleteContacts.concat(t))}))}}},Ur=$r,qr=r(44921),Yr={};Yr.styleTagTransform=g(),Yr.setAttributes=h(),Yr.insert=p().bind(null,"head"),Yr.domAPI=u(),Yr.insertStyleElement=A(),c()(qr.Z,Yr),qr.Z&&qr.Z.locals&&qr.Z.locals;var Wr=(0,I.Z)(Ur,(function(){var t=this,e=t._self._c;return e("Popover",{ref:"popover",staticClass:"contact-popover",attrs:{trigger:"click"}},[e("UserBubble",{attrs:{slot:"trigger","display-name":t.label,"avatar-image":t.avatarUrlAbsolute},on:{click:t.onClickOpenContactDialog},slot:"trigger"},[e("span",{staticClass:"user-bubble-email"},[t._v(t._s(t.email))])]),t._v(" "),e("div",{staticClass:"contact-wrapper"},[t.contactsWithEmail&&t.contactsWithEmail.length>0?e("ButtonVue",{staticClass:"contact-existing",attrs:{type:"tertiary-no-background"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDetails",{attrs:{size:20}})]},proxy:!0}],null,!1,2417736673)},[t._v("\n\t\t\t"+t._s(t.t("mail","Contacts with this address"))+":\n\t\t\t"),e("span",[t._v("\n\t\t\t\t"+t._s(t.contactsWithEmailComputed)+"\n\t\t\t")])]):t._e(),t._v(" "),t.selection===t.ContactSelectionStateEnum.select?e("div",{staticClass:"contact-menu"},[e("ButtonVue",{attrs:{type:"tertiary-no-background"},on:{click:t.onClickReply},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconReply",{attrs:{size:20}})]},proxy:!0}],null,!1,806667217)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Reply"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary-no-background"},on:{click:function(e){t.selection=t.ContactSelectionStateEnum.existing}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconUser",{attrs:{size:20}})]},proxy:!0}],null,!1,207893778)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add to Contact"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary-no-background"},on:{click:function(e){t.selection=t.ContactSelectionStateEnum.new}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2388353250)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","New Contact"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary-no-background"},on:{click:t.onClickCopyToClipboard},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconClipboard",{attrs:{size:20}})]},proxy:!0}],null,!1,1207266895)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Copy to clipboard"))+"\n\t\t\t")])],1):e("div",{staticClass:"contact-input-wrapper"},[t.selection===t.ContactSelectionStateEnum.existing?e("Multiselect",{ref:"contact-selection-label",attrs:{id:"contact-selection",options:t.selectableContacts,taggable:!0,label:"label","track-by":"label",multiple:!1,placeholder:t.t("name","Contact name "),"clear-on-select":!1,"show-no-options":!1,"preserve-search":!0},on:{"search-change":t.onAutocomplete},model:{value:t.selectedContact,callback:function(e){t.selectedContact=e},expression:"selectedContact"}}):t.selection===t.ContactSelectionStateEnum.new?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newContactName,expression:"newContactName"}],domProps:{value:t.newContactName},on:{input:function(e){e.target.composing||(t.newContactName=e.target.value)}}}):t._e()],1),t._v(" "),t.selection!==t.ContactSelectionStateEnum.select?e("div",[e("ButtonVue",{attrs:{type:"tertiary-no-background"},on:{click:function(e){t.selection=t.ContactSelectionStateEnum.select}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconClose",{attrs:{size:20}})]},proxy:!0}],null,!1,2888946197)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Go back"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{disabled:t.addButtonDisabled,type:"tertiary-no-background"},on:{click:t.onClickAddToContact},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,905113861)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add"))+"\n\t\t\t")])],1):t._e()],1)],1)}),[],!1,null,"5bad26b0",null).exports,Vr=r(44141),Hr={};Hr.styleTagTransform=g(),Hr.setAttributes=h(),Hr.insert=p().bind(null,"head"),Hr.domAPI=u(),Hr.insertStyleElement=A(),c()(Vr.Z,Hr),Vr.Z&&Vr.Z.locals&&Vr.Z.locals;var Qr=(0,I.Z)({name:"MessageLoadingSkeleton"},(function(){return this._self._c,this._m(0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-loading-skeleton"},[e("div",{staticClass:"message-loading-skeleton__body"},[e("div",{staticClass:"message-loading-skeleton__body__line-one"},[t._v("\n\t\t\t\t\n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-two"},[t._v("\n\t\t\t\t\n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-three"},[t._v("\n\t\t\t\t\n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-four"},[t._v("\n\t\t\t\t\n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-five"},[t._v("\n\t\t\t\t\n\t\t")]),t._v(" "),e("div",{staticClass:"message-loading-skeleton__body__line-six"},[t._v("\n\t\t\t\t\n\t\t")])])])}],!1,null,"3e38ab00",null).exports,Kr=r(7329),Jr=r(89995),Xr=r.n(Jr),to={name:"CalendarImport",components:{Actions:o.O3,ActionButton:o.Js,IconAdd:Yt.Z,IconLoading:o.lb},props:{calendars:{type:Array,required:!0},handler:{type:Function,required:!0}},computed:{cals:function(){var t=this;return this.calendars.map((function(e){return t.$set(e,"loading",!1),e}))}},methods:{onImport:function(t){t.loading=!0,this.handler(t).catch(console.error.bind(this)).then((function(){t.loading=!1}))}},itineraryDateTime:function(t){return"string"==typeof t?t:t["@value"]},addIcalTimeProperty:function(t,e,n){var r=_t()(this.itineraryDateTime(e)).format(),o=t.updatePropertyWithValue(n,le().Time.fromDateTimeString(r));"string"!=typeof e&&o.setParameter("TZID",e.timezone)}},eo=to,no=(0,I.Z)(eo,(function(){var t=this,e=t._self._c;return t.calendars.length?e("Actions",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,2388353250)},[t._v(" "),t._l(t.cals,(function(n,r){return e("ActionButton",{key:r,on:{click:function(e){return t.onImport(n)}},scopedSlots:t._u([{key:"icon",fn:function(){return[n.loading?e("IconLoading",{attrs:{size:20}}):e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t"+t._s(t.t("mail","Import into {calendar}",{calendar:n.displayname}))+"\n\t")])}))],2):t._e()}),[],!1,null,"d2c71462",null).exports,ro={name:"EventReservation",components:{CalendarImport:no},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{eventName:function(){return this.data.reservationFor.name},time:function(){if("startDate"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.startDate)).format("LT")},date:function(){if("startDate"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.startDate)).format("L")},location:function(){if("location"in this.data.reservationFor&&"name"in this.data.reservationFor.location)return this.data.reservationFor.location.name},canImport:function(){return"startDate"in this.data.reservationFor}},methods:{getEndDateTime:function(t){return"endDate"in this.data.reservationFor?_t()(no.itineraryDateTime(this.data.reservationFor.endDate)).format():"startDate"in this.data.reservationFor?_t()(no.itineraryDateTime(this.data.reservationFor.startDate)).add(2,"hours").format():void 0},handleImport:function(e){var n=new(le().Component)("VEVENT");n.updatePropertyWithValue("SUMMARY",this.eventName);var r=_t()(no.itineraryDateTime(this.data.reservationFor.startDate)).format();n.updatePropertyWithValue("DTSTART",le().Time.fromDateTimeString(r));var o=this.getEndDateTime(this.data.reservationFor);n.updatePropertyWithValue("DTEND",le().Time.fromDateTimeString(o)),"location"in this.data.reservationFor&&(n.updatePropertyWithValue("LOCATION",this.data.reservationFor.location.name),"geo"in this.data.reservationFor.location&&n.updatePropertyWithValue("GEO","".concat(this.data.reservationFor.location.geo.latitude,";").concat(this.data.reservationFor.location.geo.longitude))),n.updatePropertyWithValue("PRODID","Nextcloud Mail"),n.updatePropertyWithValue("UID",he()(this.messageId+this.eventName));var a=new(le().Component)("VCALENDAR");return a.addSubcomponent(n),w.Z.debug("generated calendar event from event reservation data",{ical:a.toString()}),Le(e.url)(a.toString()).then((function(){w.Z.debug("event successfully imported"),(0,U.showSuccess)(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((function(e){w.Z.error("Could not import event",{error:e}),(0,U.showError)(t("mail","Could not create event"))}))}}},oo=r(75375),ao={};ao.styleTagTransform=g(),ao.setAttributes=h(),ao.insert=p().bind(null,"head"),ao.domAPI=u(),ao.insertStyleElement=A(),c()(oo.Z,ao),oo.Z&&oo.Z.locals&&oo.Z.locals;var io=(0,I.Z)(ro,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"event"},[e("div",{staticClass:"event-name"},[t._v("\n\t\t\t"+t._s(t.eventName)+"\n\t\t")]),t._v(" "),t.location?e("div",{staticClass:"venue"},[t._v("\n\t\t\t"+t._s(t.location)+"\n\t\t")]):t._e(),t._v(" "),t.date?e("div",[t._v("\n\t\t\t"+t._s(t.date)+"\n\t\t")]):t._e(),t._v(" "),t.time?e("div",[t._v("\n\t\t\t"+t._s(t.time)+"\n\t\t")]):t._e()]),t._v(" "),t.canImport?e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"397d55d8",null).exports,so=r(31493),co=r(39429),lo={name:"FlightReservation",components:{AirplaneIcon:so.Z,ArrowIcon:co.default,CalendarImport:no},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime:function(){if("departureTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.departureTime)).format("LT")},departureDate:function(){if("departureTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.departureTime)).format("L")},arrivalTime:function(){if("arrivalTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("LT")},arrivalDate:function(){if("arrivalTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("L")},flightNumber:function(){return this.data.reservationFor.airline.iataCode+this.data.reservationFor.flightNumber},reservation:function(){if("reservationNumber"in this.data)return this.data.reservationNumber},canImport:function(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor}},methods:{handleImport:function(e){var n=new(le().Component)("VEVENT");n.updatePropertyWithValue("SUMMARY",t("mail","Flight {flightNr} from {depAirport} to {arrAirport}",{flightNr:this.flightNumber,depAirport:this.data.reservationFor.departureAirport.iataCode,arrAirport:this.data.reservationFor.arrivalAirport.iataCode})),no.addIcalTimeProperty(n,this.data.reservationFor.departureTime,"DTSTART"),no.addIcalTimeProperty(n,this.data.reservationFor.arrivalTime,"DTEND"),n.updatePropertyWithValue("PRODID","Nextcloud Mail"),n.updatePropertyWithValue("UID",he()(this.messageId+this.flightNumber));var r=new(le().Component)("VCALENDAR");return r.addSubcomponent(n),w.Z.debug("generated calendar event from flight reservation data",{ical:r.toString()}),Le(e.url)(r.toString()).then((function(){w.Z.debug("event successfully imported"),(0,U.showSuccess)(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((function(e){w.Z.error("Could not import event",{error:e}),(0,U.showError)(t("mail","Could not create event"))}))}}},uo=r(77626),po={};po.styleTagTransform=g(),po.setAttributes=h(),po.insert=p().bind(null,"head"),po.domAPI=u(),po.insertStyleElement=A(),c()(uo.Z,po),uo.Z&&uo.Z.locals&&uo.Z.locals;var fo=(0,I.Z)(lo,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"departure"},[e("div",{staticClass:"iata"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureAirport.iataCode)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"airport"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureAirport.name)+"\n\t\t")]),t._v(" "),t.departureDate?e("div",[t._v("\n\t\t\t"+t._s(t.departureDate)+"\n\t\t")]):t._e(),t._v(" "),t.departureTime?e("div",[t._v("\n\t\t\t"+t._s(t.departureTime)+"\n\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"connection"},[e("div",[e("AirplaneIcon",{attrs:{title:t.t("mail","Airplane")}})],1),t._v(" "),e("div",[t._v(t._s(t.flightNumber))]),t._v(" "),t.reservation?e("div",[t._v("\n\t\t\t"+t._s(t.t("mail","Reservation {id}",{id:t.reservation}))+"\n\t\t")]):e("div",[e("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),e("div",{staticClass:"arrival"},[e("div",{staticClass:"iata"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalAirport.iataCode)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"airport"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalAirport.name)+"\n\t\t")]),t._v(" "),t.arrivalDate?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalDate)+"\n\t\t")]):t._e(),t._v(" "),t.arrivalTime?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalTime)+"\n\t\t")]):t._e()]),t._v(" "),e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}})],1)}),[],!1,null,"2a317718",null).exports,ho=r(35764),mo={name:"TrainReservation",components:{ArrowIcon:co.default,CalendarImport:no,TrainIcon:ho.Z},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime:function(){if("departureTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.departureTime)).format("LT")},departureDate:function(){return"departureTime"in this.data.reservationFor?_t()(no.itineraryDateTime(this.data.reservationFor.departureTime)).format("L"):"departureDay"in this.data.reservationFor?_t()(this.data.reservationFor.departureDay).format("L"):void 0},arrivalTime:function(){if("arrivalTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("LT")},arrivalDate:function(){if("arrivalTime"in this.data.reservationFor)return _t()(no.itineraryDateTime(this.data.reservationFor.arrivalTime)).format("L")},trainNumber:function(){return this.data.reservationFor.trainNumber},canImport:function(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor||"departureDay"in this.data.reservationFor}},methods:{handleImport:function(e){var n=new(le().Component)("VEVENT");if("trainNumber"in this.data.reservationFor?n.updatePropertyWithValue("SUMMARY",t("mail","{trainNr} from {depStation} to {arrStation}",{trainNr:this.data.reservationFor.trainNumber,depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})):n.updatePropertyWithValue("SUMMARY",t("mail","Train from {depStation} to {arrStation}",{depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})),"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor)no.addIcalTimeProperty(n,this.data.reservationFor.departureTime,"DTSTART"),no.addIcalTimeProperty(n,this.data.reservationFor.arrivalTime,"DTEND");else if("departureDay"in this.data.reservationFor){var r=_t()(this.data.reservationFor.departureDay).format();n.updatePropertyWithValue("DTSTART",le().Time.fromDateTimeString(r))}n.updatePropertyWithValue("PRODID","Nextcloud Mail"),n.updatePropertyWithValue("UID",he()(this.messageId+this.departureTime));var o=new(le().Component)("VCALENDAR");return o.addSubcomponent(n),w.Z.debug("generated calendar event from train reservation data",{ical:o.toString()}),Le(e.url)(o.toString()).then((function(){w.Z.debug("event successfully imported"),(0,U.showSuccess)(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((function(e){w.Z.error("Could not import event",{error:e}),(0,U.showError)(t("mail","Could not create event"))}))}}},Ao=r(78213),vo={};vo.styleTagTransform=g(),vo.setAttributes=h(),vo.insert=p().bind(null,"head"),vo.domAPI=u(),vo.insertStyleElement=A(),c()(Ao.Z,vo),Ao.Z&&Ao.Z.locals&&Ao.Z.locals;var go=(0,I.Z)(mo,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reservation"},[e("div",{staticClass:"departure"},[e("div",{staticClass:"station"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.departureStation.name)+"\n\t\t")]),t._v(" "),t.departureDate?e("div",[t._v("\n\t\t\t"+t._s(t.departureDate)+"\n\t\t")]):t._e(),t._v(" "),t.departureTime?e("div",[t._v("\n\t\t\t"+t._s(t.departureTime)+"\n\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"connection"},[e("div",[e("TrainIcon",{attrs:{title:t.t("mail","Train")}})],1),t._v(" "),e("div",[t._v(t._s(t.trainNumber))]),t._v(" "),e("div",[e("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),e("div",{staticClass:"arrival"},[e("div",{staticClass:"station"},[t._v("\n\t\t\t"+t._s(t.data.reservationFor.arrivalStation.name)+"\n\t\t")]),t._v(" "),t.arrivalDate?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalDate)+"\n\t\t")]):t._e(),t._v(" "),t.arrivalTime?e("div",[t._v("\n\t\t\t"+t._s(t.arrivalTime)+"\n\t\t")]):t._e()]),t._v(" "),t.canImport?e("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"08dee74f",null).exports,yo=Xr()(Ie),Co={name:"Itinerary",components:{EventReservation:io,FlightReservation:fo,TrainReservation:go},props:{entries:{type:Array,required:!0},messageId:{type:String,required:!0}},data:function(){return{calendars:[]}},mounted:function(){var t=this;yo().then((function(e){return t.calendars=e})).catch((function(t){return w.Z.error("Could not load calendars",{error:t})}))}},bo=(0,I.Z)(Co,(function(){var t=this,e=t._self._c;return e("div",[t._l(t.entries,(function(n,r){return["EventReservation"===n["@type"]?e("EventReservation",{key:r,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):"FlightReservation"===n["@type"]?e("FlightReservation",{key:r,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):"TrainReservation"===n["@type"]?e("TrainReservation",{key:r,attrs:{data:n,calendars:t.calendars,"message-id":t.messageId}}):e("span",{key:r},[t._v(t._s(t.t("mail","Itinerary for {type} is not supported yet",{type:n["@type"]})))])]}))],2)}),[],!1,null,null,null).exports,xo=r(65358);function wo(t,e,n){var r=(0,K.generateUrl)("/apps/mail/api/messages/{id}/attachment/{attachmentId}",{id:t,attachmentId:e});return Q.Z.post(r,{targetPath:n})}var _o=r(3378),ko=r(39914),Eo=r(34829),Io={name:"MessageAttachment",components:{PopoverMenu:o.Rs,Actions:o.O3,ActionButton:o.Js,IconAdd:Yt.Z,IconLoading:o.lb,IconSave:Eo.default,IconDownload:He.Z},mixins:[ko.mixin],props:{id:{type:String,required:!0},fileName:{type:String,default:(0,Dr.translate)("mail","Unnamed"),required:!1},url:{type:String,required:!0},size:{type:Number,required:!0},mime:{type:String,required:!0},mimeUrl:{type:String,required:!0},isImage:{type:Boolean,default:!1},isCalendarEvent:{type:Boolean,default:!1},canPreview:{type:Boolean,default:!1}},data:function(){return{savingToCloud:!1,loadingCalendars:!1,calendars:[],showCalendarPopover:!1}},computed:{name:function(){return"message/rfc822"===this.mime?(0,Dr.translate)("mail","Embedded message"):this.fileName},label:function(){return"message/rfc822"===this.mime?(0,Dr.translate)("mail","Embedded message")+" ("+(0,_o.s)(this.size)+")":this.fileName+" ("+(0,_o.s)(this.size)+")"},calendarMenuEntries:function(){var t=this;return this.calendars.map((function(e){return{text:e.displayname,action:t.importCalendar(e.url)}}))},boundariesElement:function(){return document.querySelector("#content-vue")}},methods:{humanReadable:function(t){return(0,_o.s)(t)},saveToCloud:function(){var t=this,e=this.$route.params.threadId;return(0,U.getFilePickerBuilder)((0,Dr.translate)("mail","Choose a folder to store the attachment in")).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").setModal(!0).setType(1).allowDirectories(!0).build().pick().then((function(e){return t.savingToCloud=!0,e})).then(function(t,e){return function(n){return wo(t,e,n)}}(e,this.id)).then((function(){return w.Z.info("saved")})).catch((function(t){return w.Z.error("not saved",{error:t})})).then((function(){return t.savingToCloud=!1}))},download:function(){window.location=this.url},loadCalendars:function(){var t=this;this.loadingCalendars=!0,Ie().then((function(e){t.calendars=e,t.showCalendarPopover=!0,t.loadingCalendars=!1}))},closeCalendarPopover:function(){this.showCalendarPopover=!1},importCalendar:function(t){var e=this;return function(){(function(t){return Q.Z.get(t).then((function(t){return t.data}))})(e.url).then(Le(t)).then((function(){return w.Z.info("calendar imported")})).catch((function(t){return w.Z.error("import error",{error:t})})).then((function(){return e.showCalendarPopover=!1}))}}}},So=r(52883),Lo={};Lo.styleTagTransform=g(),Lo.setAttributes=h(),Lo.insert=p().bind(null,"head"),Lo.domAPI=u(),Lo.insertStyleElement=A(),c()(So.Z,Lo),So.Z&&So.Z.locals&&So.Z.locals;var To=(0,I.Z)(Io,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"attachment",class:{"message-attachment--can-preview":t.canPreview}},[e("div",{staticClass:"mail-attachment-img--wrapper",on:{click:function(e){return t.$emit("open",e)}}},[t.isImage?e("img",{staticClass:"mail-attached-image",attrs:{src:t.url}}):e("img",{staticClass:"attachment-icon",attrs:{src:t.mimeUrl}})]),t._v(" "),e("div",{staticClass:"mail-attached--content",on:{click:function(e){return t.$emit("open",e)}}},[e("span",{staticClass:"attachment-name",attrs:{title:t.label}},[t._v(t._s(t.name)+"\n\t\t")]),t._v(" "),e("span",{staticClass:"attachment-size"},[t._v(t._s(t.humanReadable(t.size)))])]),t._v(" "),e("Actions",{attrs:{"boundaries-element":t.boundariesElement}},[t.isCalendarEvent?e("ActionButton",{staticClass:"attachment-import calendar",attrs:{disabled:t.loadingCalendars},on:{click:function(e){return e.stopPropagation(),t.loadCalendars.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loadingCalendars?t.loadingCalendars?e("IconLoading",{attrs:{size:20}}):t._e():e("IconAdd",{attrs:{size:20}})]},proxy:!0}],null,!1,3426611203)},[t._v("\n\t\t\t"+t._s(t.t("mail","Import into calendar"))+"\n\t\t")]):t._e(),t._v(" "),e("ActionButton",{staticClass:"attachment-download",on:{click:t.download},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDownload",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Download attachment"))+"\n\t\t")]),t._v(" "),e("ActionButton",{staticClass:"attachment-save-to-cloud",attrs:{disabled:t.savingToCloud},on:{click:function(e){return e.stopPropagation(),t.saveToCloud.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.savingToCloud?t.savingToCloud?e("IconLoading",{attrs:{size:20}}):t._e():e("IconSave",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Save to Files"))+"\n\t\t")]),t._v(" "),e("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside",value:t.closeCalendarPopover,expression:"closeCalendarPopover"}],staticClass:"popovermenu bubble attachment-import-popover hidden",class:{open:t.showCalendarPopover}},[e("PopoverMenu",{attrs:{menu:t.calendarMenuEntries},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}])})],1)],1)],1)}),[],!1,null,"015650ab",null),Do=To.exports,Bo=r(45279),Oo=r(41622),Mo=r(50009),Po={name:"MessageAttachments",components:{MessageAttachment:Do,IconLoading:o.lb,Download:He.Z,CloudDownload:Bo.Z,ChevronDown:Oo.default,ChevronUp:Mo.Z},props:{envelope:{required:!0,type:Object},attachments:{type:Array,required:!0}},data:function(){return{visible:0,savingToCloud:!1,showPreview:!1,attachmentImageURL:"",hasNextLine:!1,isToggled:!1}},computed:{fileInfos:function(){return this.attachments.map((function(t){return{filename:t.downloadUrl,source:t.downloadUrl,basename:(0,xo.EZ)(t.downloadUrl),mime:t.mime,etag:"fixme",hasPreview:!1,fileid:parseInt(t.id,10)}}))},previewableFileInfos:function(){return this.fileInfos.filter((function(t){return(t.mime.startsWith("image/")||t.mime.startsWith("video/")||t.mime.startsWith("audio/")||"application/pdf"===t.mime)&&OCA.Viewer.mimetypes.includes(t.mime)}))},moreThanOne:function(){return this.attachments.length>1},zipUrl:function(){return(0,K.generateUrl)("/apps/mail/api/messages/{id}/attachments",{id:this.envelope.databaseId})}},mounted:function(){var t=null;this.visible=0,this.$nextTick((function(){var e=this;this.$refs.attachments&&this.$refs.attachments.some((function(n,r){var o=n.$el.getBoundingClientRect().top;return null!==t&&t!==o?(e.isToggled=!0,e.hasNextLine=!0,!0):(t=o,e.visible++,!1)}))}))},methods:{canPreview:function(t){return this.previewableFileInfos.includes(t)},saveAll:function(){var e=this,n=(0,U.getFilePickerBuilder)(t("mail","Choose a folder to store the attachments in")).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").setModal(!0).setType(1).allowDirectories(!0).build(),r=this.$route.params.threadId;return n.pick().then((function(t){return e.savingToCloud=!0,t})).then(function(t){return function(e){return function(t,e){return wo(t,0,e)}(t,e)}}(r)).then((function(){return w.Z.info("saved")})).catch((function(t){return w.Z.error("not saved",{error:t})})).then((function(){return e.savingToCloud=!1}))},downloadZip:function(){window.location=this.zipUrl},showViewer:function(t){this.canPreview(t)&&this.previewableFileInfos.includes(t)&&OCA.Viewer.open({fileInfo:t,list:this.previewableFileInfos})}}},jo=r(7007),No={};No.styleTagTransform=g(),No.setAttributes=h(),No.insert=p().bind(null,"head"),No.domAPI=u(),No.insertStyleElement=A(),c()(jo.Z,No),jo.Z&&jo.Z.locals&&jo.Z.locals;var Fo,Zo=(0,I.Z)(Po,(function(){var t=this,e=t._self._c;return t.attachments.length>0?e("div",{staticClass:"mail-message-attachments",class:t.hasNextLine?"has-next-line":""},[e("div",{staticClass:"mail-message-attachments--wrapper",class:!0===t.hasNextLine&&!0===t.isToggled?"hide":""},[e("div",{staticClass:"attachments"},t._l(t.attachments,(function(n,r){return e("MessageAttachment",{key:n.id,ref:"attachments",refInFor:!0,attrs:{id:n.id,"file-name":n.fileName,size:n.size,url:n.downloadUrl,"is-image":n.isImage,"is-calendar-event":n.isCalendarEvent,mime:n.mime,"mime-url":n.mimeUrl,"can-preview":t.canPreview(t.fileInfos[r])},on:{open:function(e){return t.showViewer(t.fileInfos[r])}}})})),1)]),t._v(" "),t.hasNextLine?e("div",{staticClass:"show-more-attachments",on:{click:function(e){t.isToggled=!t.isToggled}}},[t.isToggled?e("ChevronDown",{attrs:{size:24}}):t._e(),t._v(" "),t.isToggled?t._e():e("ChevronUp",{attrs:{size:24}}),t._v(" "),t.isToggled?e("span",[t._v("\n\t\t\t"+t._s(t.n("mail","View {count} more attachment","View {count} more attachments",t.attachments.length-t.visible,{count:t.attachments.length-t.visible}))+"\n\t\t")]):e("span",[t._v("\n\t\t\t"+t._s(t.t("mail","View fewer attachments"))+"\n\t\t")])],1):t._e(),t._v(" "),t.moreThanOne?e("p",{staticClass:"attachments-button-wrapper"},[e("span",{staticClass:"attachment-link",attrs:{disabled:t.savingToCloud},on:{click:t.saveAll}},[t.savingToCloud?e("IconLoading",{staticClass:"spin",attrs:{size:18}}):e("CloudDownload",{attrs:{size:18}}),t._v("\n\t\t\t"+t._s(t.t("mail","Save all to Files"))+"\n\t\t")],1),t._v(" "),e("span",{staticClass:"attachment-link",on:{click:t.downloadZip}},[e("Download",{attrs:{size:18}}),t._v("\n\t\t\t"+t._s(t.t("mail","Download Zip"))+"\n\t\t")],1)]):t._e()]):t._e()}),[],!1,null,null,null).exports;function Go(t){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(t)}function zo(){zo=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Go(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Ro(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var $o=function(){var t,e=(t=zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Fo){t.next=2;break}return t.abrupt("return",Fo);case 2:if(!(Fo=window.mailvelope)){t.next=6;break}return w.Z.debug("mailvelope found statically"),t.abrupt("return",Fo);case 6:return w.Z.debug("loading mailvelope dynamically"),t.next=9,new Promise((function(t){window.addEventListener("mailvelope",(function(){return t(window.mailvelope)}),!1)}));case 9:return Fo=t.sent,w.Z.debug("mailvelope found dynamically"),t.abrupt("return",Fo);case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Ro(a,r,o,i,s,"next",t)}function s(t){Ro(a,r,o,i,s,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}(),Uo=r(64648);function qo(t){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qo(t)}function Yo(){Yo=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==qo(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Wo(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var Vo={name:"MdnRequest",props:{message:{required:!0,type:Object}},data:function(){return{hasMdnRequest:this.message.dispositionNotificationTo&&this.message.dispositionNotificationTo.length>0,loading:!1}},computed:{mdnSent:function(){return this.message.flags.mdnsent}},methods:{sendMdn:function(){var e,n=this;return(e=Yo().mark((function e(){return Yo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,w.Z.debug("send return receipt"),e.prev=2,e.next=5,(0,Uo.t3)(n.message.databaseId);case 5:n.$store.commit("flagEnvelope",{envelope:n.message,flag:"mdnsent",value:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),w.Z.error("could not send mdn",e.t0),(0,U.showError)(t("mail","Could not send mdn"));case 12:n.loading=!1;case 13:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(t){Wo(a,r,o,i,s,"next",t)}function s(t){Wo(a,r,o,i,s,"throw",t)}i(void 0)}))})()}}},Ho=Vo,Qo=r(54563),Ko={};Ko.styleTagTransform=g(),Ko.setAttributes=h(),Ko.insert=p().bind(null,"head"),Ko.domAPI=u(),Ko.insertStyleElement=A(),c()(Qo.Z,Ko),Qo.Z&&Qo.Z.locals&&Qo.Z.locals;var Jo=(0,I.Z)(Ho,(function(){var t=this,e=t._self._c;return t.hasMdnRequest&&!t.mdnSent?e("div",{staticClass:"mail-message-has-mdn-request"},[t._v("\n\t"+t._s(t.t("mail","The sender of this message has asked to be notified when you read this message."))+"\n\t"),e("button",{attrs:{disabled:t.loading},on:{click:t.sendMdn}},[t._v("\n\t\t"+t._s(t.t("mail","Notify the sender"))+"\n\t")])]):t.mdnSent?e("div",{staticClass:"mail-message-has-mdn-request"},[t._v("\n\t"+t._s(t.t("mail","You sent a read confirmation to the sender of this message."))+"\n")]):t._e()}),[],!1,null,"3bf60f28",null).exports;function Xo(t){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xo(t)}function ta(){ta=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Xo(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function ea(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var na={name:"MessageEncryptedBody",components:{MdnRequest:Jo},props:{body:{type:String,required:!0},from:{type:String,required:!1,default:void 0},message:{required:!0,type:Object}},data:function(){return{mailvelope:!1}},mounted:function(){var t,e=this;return(t=ta().mark((function t(){return ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$o();case 2:e.mailvelope=t.sent,e.mailvelope.createDisplayContainer("#mail-content",e.body,void 0,{senderAddress:e.from});case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){ea(a,r,o,i,s,"next",t)}function s(t){ea(a,r,o,i,s,"throw",t)}i(void 0)}))})()}},ra=na,oa=r(16262),aa={};aa.styleTagTransform=g(),aa.setAttributes=h(),aa.insert=p().bind(null,"head"),aa.domAPI=u(),aa.insertStyleElement=A(),c()(oa.Z,aa),oa.Z&&oa.Z.locals&&oa.Z.locals;var ia=(0,I.Z)(ra,(function(){var t=this,e=t._self._c;return e("div",[t.mailvelope?e("div",{attrs:{id:"mail-content"}},[e("MdnRequest",{attrs:{message:t.message}})],1):e("span",[t._v(t._s(t.t("mail","This message is encrypted with PGP. Install Mailvelope to decrypt it.")))])])}),[],!1,null,"812ccd96",null).exports,sa=r(15303),ca=r(66917),la=r(75743),ua=r(56501),da=r(68420);function pa(t){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(t)}function fa(){fa=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==pa(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function ha(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function ma(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){ha(a,r,o,i,s,"next",t)}function s(t){ha(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Aa=new ca.Z,va={name:"MessageHTMLBody",components:{MdnRequest:Jo,Actions:o.O3,ActionButton:o.Js,IconImage:ua.Z,IconMail:Z.Z,IconDomain:da.Z},props:{url:{type:String,required:!0},fullHeight:{type:Boolean,required:!1,default:!1},message:{required:!0,type:Object}},data:function(){return{hasBlockedContent:!1,isSenderTrusted:this.message.isSenderTrusted}},computed:{sender:function(){var t;return null===(t=this.message.from[0])||void 0===t?void 0:t.email},domain:function(){var t;return null===(t=this.sender)||void 0===t?void 0:t.split("@").pop()}},beforeMount:function(){Aa.on("beforeprint",this.onBeforePrint)},mounted:function(){(0,sa.iframeResizer)({log:!1,heightCalculationMethod:"taggedElement"},this.$refs.iframe)},beforeDestroy:function(){Aa.off("beforeprint",this.onBeforePrint),this.$refs.iframe.iFrameResizer.close()},methods:{getIframeDoc:function(){var t=this.$refs.iframe;return t.contentDocument||t.contentWindow.document},onMessageFrameLoad:function(){var t=this.getIframeDoc();this.hasBlockedContent=t.querySelectorAll("[data-original-src]").length>0||t.querySelectorAll("[data-original-style]").length>0||t.querySelectorAll("style[data-original-content]").length>0,this.$emit("load"),this.isSenderTrusted&&this.displayIframe()},onBeforePrint:function(){this.$refs.iframe.style.setProperty("height","".concat(this.getIframeDoc().body.scrollHeight,"px"),"important")},displayIframe:function(){var t=this.getIframeDoc();w.Z.debug("showing external images"),t.querySelectorAll("[data-original-src]").forEach((function(t){t.style.display=null,t.setAttribute("src",t.getAttribute("data-original-src"))})),t.querySelectorAll("[data-original-style]").forEach((function(t){return t.setAttribute("style",t.getAttribute("data-original-style"))})),t.querySelectorAll("style[data-original-content]").forEach((function(t){t.innerHTML=t.getAttribute("data-original-content")})),this.hasBlockedContent=!1},onShowBlockedContent:function(){var t=this;return ma(fa().mark((function e(){return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.displayIframe(),e.next=3,(0,la.s)(t.message.from[0].email,"individual",!0);case 3:case"end":return e.stop()}}),e)})))()},onShowBlockedContentForDomain:function(){var t=this;return ma(fa().mark((function e(){return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.displayIframe(),e.next=3,(0,la.s)(t.domain,"domain",!0);case 3:case"end":return e.stop()}}),e)})))()}}},ga=va,ya=r(87131),Ca={};Ca.styleTagTransform=g(),Ca.setAttributes=h(),Ca.insert=p().bind(null,"head"),Ca.domAPI=u(),Ca.insertStyleElement=A(),c()(ya.Z,Ca),ya.Z&&ya.Z.locals&&ya.Z.locals;var ba=(0,I.Z)(ga,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"html-message-body"},[e("MdnRequest",{attrs:{message:t.message}}),t._v(" "),t.hasBlockedContent?e("div",{staticStyle:{color:"#000000"},attrs:{id:"mail-message-has-blocked-content"}},[t._v("\n\t\t"+t._s(t.t("mail","The images have been blocked to protect your privacy."))+"\n\t\t"),e("Actions",{attrs:{type:"tertiary","menu-title":t.t("mail","Show images")}},[e("ActionButton",{on:{click:t.displayIframe},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconImage",{attrs:{size:20}})]},proxy:!0}],null,!1,1558549604)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Show images temporarily"))+"\n\t\t\t")]),t._v(" "),t.sender?e("ActionButton",{on:{click:t.onShowBlockedContent},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail",{attrs:{size:20}})]},proxy:!0}],null,!1,212336778)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Always show images from {sender}",{sender:t.sender}))+"\n\t\t\t")]):t._e(),t._v(" "),t.domain?e("ActionButton",{on:{click:t.onShowBlockedContentForDomain},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDomain",{attrs:{size:20}})]},proxy:!0}],null,!1,1878072675)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Always show images from {domain}",{domain:t.domain}))+"\n\t\t\t")]):t._e()],1)],1):t._e(),t._v(" "),e("div",{class:{scroll:!t.fullHeight},attrs:{id:"message-container"}},[e("iframe",{ref:"iframe",staticClass:"message-frame",attrs:{title:t.t("mail","Message frame"),src:t.url,seamless:""},on:{load:t.onMessageFrameLoad}})])],1)}),[],!1,null,"08404f42",null).exports,xa=/(.+\n\r?)+(\n\r?)+/,wa={name:"MessagePlainTextBody",components:{MdnRequest:Jo},props:{body:{type:String,required:!0},signature:{type:String,default:function(){}},message:{required:!0,type:Object}},computed:{enhancedBody:function(){return this.body.replace(/(^&gt;.*\n)+/gm,(function(e){return'<details class="quoted-text"><summary>'.concat(t("mail","Quoted text"),"</summary>").concat(e,"</details>")}))},signatureSummaryAndBody:function(){var t=this.signature.trim().match(xa);if(t&&t[0])return{summary:t[0],body:this.signature.substring(t[0].length)};var e=this.signature.trim().split(/\r?\n/);return{summary:e[0],body:e.slice(1).join("\n")}},signatureSummary:function(){return console.info(this.signature.match(xa)),this.signatureSummaryAndBody.summary}},methods:{nl2br:function(t){return t.replace(/(\r\n|\n\r|\n|\r)/g,"<br />")}}},_a=wa,ka=r(76598),Ea={};Ea.styleTagTransform=g(),Ea.setAttributes=h(),Ea.insert=p().bind(null,"head"),Ea.domAPI=u(),Ea.insertStyleElement=A(),c()(ka.Z,Ea),ka.Z&&ka.Z.locals&&ka.Z.locals;var Ia=r(29250),Sa={};Sa.styleTagTransform=g(),Sa.setAttributes=h(),Sa.insert=p().bind(null,"head"),Sa.domAPI=u(),Sa.insertStyleElement=A(),c()(Ia.Z,Sa),Ia.Z&&Ia.Z.locals&&Ia.Z.locals;var La=(0,I.Z)(_a,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"mail-content"}},[e("MdnRequest",{attrs:{message:t.message}}),t._v(" "),e("div",{attrs:{id:"message-container"},domProps:{innerHTML:t._s(t.nl2br(t.enhancedBody))}}),t._v(" "),t.signature?e("details",{staticClass:"mail-signature"},[e("summary",{domProps:{innerHTML:t._s(t.nl2br(t.signatureSummaryAndBody.summary))}}),t._v(" "),e("span",{domProps:{innerHTML:t._s(t.nl2br(t.signatureSummaryAndBody.body))}})]):t._e()],1)}),[],!1,null,"5820b73d",null).exports,Ta=r(34637),Da=r(50246);function Ba(t){return t.startsWith("mailto:")?t.substr(7):t}function Oa(t){return function(t){if(Array.isArray(t))return Ma(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ma(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pa(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function ja(t){var e=t.timezoneId;if(e&&"floating"!==e)return(0,ae.hV)(e)}var Na={name:"EventData",components:{AccountMultipleIcon:Ta.Z,CalendarIcon:at.Z,MapMarkerIcon:Da.Z},props:{event:{type:Object,required:!0}},computed:{title:function(){return this.event.title||this.t("mail","Untitled event")},startDate:function(){return this.event.isAllDay()?_t()(this.event.startDate.jsDate).format("ll"):_t()(this.event.startDate.jsDate).format("ll LT")},endDate:function(){var t,e=this.event.startDate.jsDate,n=this.event.endDate.jsDate;if(this.event.isAllDay()){if(n.setDate(n.getDate()-1),Pa(e,n))return;t=_t()(n).format("ll")}else t=Pa(e,n)?_t()(n).format("LT"):_t()(n).format("ll LT");return t},startTimezone:function(){return ja(this.event.startDate)},endTimezone:function(){return ja(this.event.endDate)},location:function(){return this.event.location},attendees:function(){for(var t=[],e=0,n=[].concat(Oa(this.event.getPropertyIterator("ORGANIZER")),Oa(this.event.getAttendeeIterator()));e<n.length;e++){var r,o=n[e],a=null!==(r=o.commonName)&&void 0!==r?r:Ba(o.email),i=o.isOrganizer(),s=(i?"organizer_":"attendee_")+a;t.push({name:a,isOrganizer:i,key:s})}return t}}},Fa=r(34902),Za={};Za.styleTagTransform=g(),Za.setAttributes=h(),Za.insert=p().bind(null,"head"),Za.domAPI=u(),Za.insertStyleElement=A(),c()(Fa.Z,Za),Fa.Z&&Fa.Z.locals&&Fa.Z.locals;var Ga=(0,I.Z)(Na,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"event-data"},[e("h2",{staticClass:"event-data__heading"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),t._v(" "),e("div",{staticClass:"event-data__row event-data__row--date"},[e("CalendarIcon",{staticClass:"event-data__row__icon",attrs:{size:20}}),t._v(" "),e("div",[t._v("\n\t\t\t"+t._s(t.startDate)+"\n\t\t\t"),t.startTimezone&&t.startTimezone!==t.endTimezone?e("span",{staticClass:"muted"},[t._v("\n\t\t\t\t"+t._s(t.startTimezone)+"\n\t\t\t")]):t._e(),t._v(" "),t.endDate?[e("span",[t._v(" - ")]),t._v("\n\t\t\t\t"+t._s(t.endDate)+"\n\t\t\t\t"),t.endTimezone?e("span",{staticClass:"muted"},[t._v(t._s(t.endTimezone))]):t._e()]:t._e()],2)],1),t._v(" "),t.location?e("div",{staticClass:"event-data__row event-data__row--location"},[e("MapMarkerIcon",{staticClass:"event-data__row__icon",attrs:{size:20}}),t._v(" "),e("span",[t._v(t._s(t.location))])],1):t._e(),t._v(" "),e("div",{staticClass:"event-data__row event-data__row--participants"},[e("AccountMultipleIcon",{staticClass:"event-data__row__icon",attrs:{size:20}}),t._v(" "),e("ul",t._l(t.attendees,(function(n){var r=n.name,o=n.isOrganizer,a=n.key;return e("li",{key:a},[t._v("\n\t\t\t\t"+t._s(r)+"\n\t\t\t\t"),o?e("span",{staticClass:"muted"},[t._v(t._s(t.t("mail","(organizer)")))]):t._e()])})),0)],1)])}),[],!1,null,"853d0690",null).exports,za=r(20629),Ra=r(3781);function $a(){return Math.random().toString(16).slice(2)}var Ua=r(83027);function qa(t){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qa(t)}function Ya(){Ya=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==qa(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Wa(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Va(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Wa(a,r,o,i,s,"next",t)}function s(t){Wa(a,r,o,i,s,"throw",t)}i(void 0)}))}}function Ha(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ha(Object(n),!0).forEach((function(e){Ka(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ka(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ja(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xa="NEEDS-ACTION",ti="ACCEPTED",ei="TENTATIVE",ni="DECLINED";function ri(t,e){if(t){e=Ba(e);var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ja(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ja(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}(t.getAttendeeIterator());try{for(r.s();!(n=r.n()).done;){var o=n.value;if(Ba(o.email)===e)return o}}catch(t){r.e(t)}finally{r.f()}}}var oi={name:"Imip",components:{EventData:Ga,Button:o.P2,CloseIcon:fr.default,CalendarIcon:at.Z,CalendarPickerOption:Oe,Multiselect:o.Z2},props:{scheduling:{type:Object,required:!0}},data:function(){return{NEEDS_ACTION:Xa,ACCEPTED:ti,TENTATIVE:ei,DECLINED:ni,commentFieldId:$a(),targetCalendarPickerId:$a(),showMoreOptions:!1,loading:!1,existingEvent:void 0,existingEventFetched:!1,targetCalendar:void 0,comment:""}},computed:Qa(Qa({},(0,za.Se)({currentUserPrincipalEmail:"getCurrentUserPrincipalEmail",clonedCalendars:"getClonedCalendars"})),{},{method:function(){return this.scheduling.method},isRequest:function(){return"REQUEST"===this.method},isReply:function(){return"REPLY"===this.method},isCancel:function(){return"CANCEL"===this.method},isExistingEvent:function(){return!!this.existingEvent},wasProcessed:function(){return!!this.existingParticipationStatus&&this.existingParticipationStatus!==Xa},attachedVCalendar:function(){var t=(0,ae.wJ)().getParserForFileType("text/calendar");t.parse(this.scheduling.contents);var e=t.getItemIterator().next().value;return null!=e?e:void 0},attachedVEvent:function(){var t,e;return null!==(t=null===(e=this.attachedVCalendar)||void 0===e?void 0:e.getFirstComponent("VEVENT"))&&void 0!==t?t:void 0},existingVCalendar:function(){if(this.existingEvent){var t=(0,ae.wJ)().getParserForFileType("text/calendar");t.parse(this.existingEvent.data);var e=t.getItemIterator().next().value;return null!=e?e:void 0}},existingVEvent:function(){var t,e;return null!==(t=null===(e=this.existingVCalendar)||void 0===e?void 0:e.getFirstComponent("VEVENT"))&&void 0!==t?t:void 0},eventIsInFuture:function(){return this.attachedVEvent.startDate.jsDate.getTime()>(new Date).getTime()},userIsAttendee:function(){return!!ri(this.attachedVEvent,this.currentUserPrincipalEmail)},existingParticipationStatus:function(){var t,e=ri(this.existingVEvent,this.currentUserPrincipalEmail);return null!==(t=null==e?void 0:e.participationStatus)&&void 0!==t?t:void 0},replyStatusMessage:function(){var t,e,n=null===(t=this.attachedVEvent)||void 0===t?void 0:t.getAttendeeList();if(!n||1!==n.length)return this.t("mail","This event was updated");var r=n[0],o=r.participationStatus,a=null!==(e=r.commonName)&&void 0!==e?e:r.email;return o===ti?this.t("mail","{attendeeName} accepted your invitation",{attendeeName:a}):o===ei?this.t("mail","{attendeeName} tentatively accepted your invitation",{attendeeName:a}):o===ni?this.t("mail","{attendeeName} declined your invitation",{attendeeName:a}):this.t("mail","{attendeeName} reacted to your invitation",{attendeeName:a})},calendarsForPicker:function(){return this.clonedCalendars.map((function(t){var e,n;return{displayname:t.displayname,color:null!==(e=t.color)&&void 0!==e?e:ve(null!==(n=t.displayname)&&void 0!==n?n:""),order:t.order,components:{vevent:!0},writable:-1!==t.currentUserPrivilegeSet.indexOf("{DAV:}write"),url:t.url,dav:t}})).filter((function(t){return t.components.vevent&&!0===t.writable}))}}),watch:{attachedVEvent:{immediate:!0,handler:function(){var t=this;return Va(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchExistingEvent(t.attachedVEvent.uid);case 2:case"end":return e.stop()}}),e)})))()}},clonedCalendars:{immediate:!0,handler:function(){var t=this;return Va(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchExistingEvent(t.attachedVEvent.uid);case 2:case"end":return e.stop()}}),e)})))()}},calendarsForPicker:{immediate:!0,handler:function(t){t.length>0&&!this.targetCalendar&&(this.targetCalendar=t[0])}}},methods:{accept:function(){var t=this;return Va(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveEventWithParticipationStatus(ti);case 2:case"end":return e.stop()}}),e)})))()},acceptTentatively:function(){var t=this;return Va(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveEventWithParticipationStatus(ei);case 2:case"end":return e.stop()}}),e)})))()},decline:function(){var t=this;return Va(Ya().mark((function e(){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveEventWithParticipationStatus(ni);case 2:case"end":return e.stop()}}),e)})))()},saveEventWithParticipationStatus:function(t){var e=this;return Va(Ya().mark((function n(){var r,o,a,i,s;return Ya().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.isExistingEvent?e.existingVCalendar:e.attachedVCalendar,a=o.getFirstComponent("VEVENT"),i=ri(a,e.currentUserPrincipalEmail)){n.next=5;break}return n.abrupt("return");case 5:if(s=null===(r=e.targetCalendar)||void 0===r?void 0:r.dav){n.next=8;break}return n.abrupt("return");case 8:if(i.participationStatus=t,e.comment&&(i.setParameter(new ae.d2("X-RESPONSE-COMMENT",e.comment)),a.addProperty(new ae.Z9("COMMENT",e.comment))),e.loading=!0,n.prev=11,!e.isExistingEvent){n.next=18;break}return e.existingEvent.data=o.toICS(),n.next=16,e.existingEvent.update();case 16:n.next=20;break;case 18:return n.next=20,s.createVObject(o.toICS());case 20:e.showMoreOptions=!1,n.next=27;break;case 23:n.prev=23,n.t0=n.catch(11),(0,U.showError)(e.t("mail","Failed to save your participation status")),w.Z.error("Failed to save event to calendar",{error:n.t0,attendee:i,calendar:s,vEvent:a,vCalendar:o,existingEvent:e.existingEvent});case 27:return n.prev=27,e.loading=!1,n.finish(27);case 30:return e.existingEventFetched=!1,n.next=33,e.fetchExistingEvent(a.uid);case 33:case"end":return n.stop()}}),n,null,[[11,23,27,30]])})))()},fetchExistingEvent:function(t){var e=this;return Va(Ya().mark((function n(){var r,o,a;return Ya().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.existingEventFetched){n.next=2;break}return n.abrupt("return");case 2:return r=(0,Ua.Z)(5),o=e.clonedCalendars.map(function(){var e=Va(Ya().mark((function e(n){return Ya().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r((function(){return n.calendarQuery([{name:[Ra.namespaces.IETF_CALDAV,"comp-filter"],attributes:[["name","VCALENDAR"]],children:[{name:[Ra.namespaces.IETF_CALDAV,"comp-filter"],attributes:[["name","VEVENT"]],children:[{name:[Ra.namespaces.IETF_CALDAV,"prop-filter"],attributes:[["name","UID"]],children:[{name:[Ra.namespaces.IETF_CALDAV,"text-match"],value:t}]}]}]}])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.t0=un.xHg,n.next=7,Promise.all(o);case 7:n.t1=n.sent,(a=(0,n.t0)(n.t1)).length>1&&w.Z.warn("Fetched more than one event for iMIP invitation",{results:a}),e.existingEvent=a[0],e.existingEventFetched=!0;case 12:case"end":return n.stop()}}),n)})))()}}},ai=oi,ii=r(45793),si={};si.styleTagTransform=g(),si.setAttributes=h(),si.insert=p().bind(null,"head"),si.domAPI=u(),si.insertStyleElement=A(),c()(ii.Z,si),ii.Z&&ii.Z.locals&&ii.Z.locals;var ci={name:"Message",components:{Itinerary:bo,MessageAttachments:Zo,MessageEncryptedBody:ia,MessageHTMLBody:ba,MessagePlainTextBody:La,Imip:(0,I.Z)(ai,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"imip"},[t.isRequest?e("div",{staticClass:"imip__type"},[t.existingEventFetched?[t.wasProcessed&&t.existingParticipationStatus===t.ACCEPTED?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You accepted this invitation"))+"\n\t\t\t")]):t.wasProcessed&&t.existingParticipationStatus===t.TENTATIVE?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You tentatively accepted this invitation"))+"\n\t\t\t")]):t.wasProcessed&&t.existingParticipationStatus===t.DECLINED?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You declined this invitation"))+"\n\t\t\t")]):t.wasProcessed&&t.existingParticipationStatus!==t.NEEDS_ACTION?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You already reacted to this invitation"))+"\n\t\t\t")]):t.userIsAttendee?e("span",[t._v("\n\t\t\t\t"+t._s(t.t("mail","You have been invited to an event"))+"\n\t\t\t")]):t._e()]:t._e()],2):t.isReply?e("div",{staticClass:"imip__type"},[e("CalendarIcon",{attrs:{size:20}}),t._v(" "),e("span",[t._v(t._s(t.replyStatusMessage))])],1):t.isCancel?e("div",{staticClass:"imip__type"},[e("CloseIcon",{attrs:{size:20,"fill-color":"red"}}),t._v(" "),e("span",[t._v(t._s(t.t("mail","This event was cancelled")))])],1):t._e(),t._v(" "),e("EventData",{attrs:{event:t.attachedVEvent}}),t._v(" "),t.showMoreOptions?e("div",{staticClass:"imip__more-options"},[t.isExistingEvent?t._e():e("div",{staticClass:"imip__more-options__row imip__more-options__row--calendar"},[e("label",{attrs:{for:"targetCalendarPickerId"}},[t._v(t._s(t.t("mail","Save to")))]),t._v(" "),e("div",{staticClass:"imip__more-options__row--calendar__multiselect"},[t.calendarsForPicker.length>1?e("Multiselect",{attrs:{id:t.targetCalendarPickerId,label:"displayname","track-by":"url","allow-empty":!1,options:t.calendarsForPicker},scopedSlots:t._u([{key:"option",fn:function(n){var r=n.option;return[e("CalendarPickerOption",t._b({},"CalendarPickerOption",r,!1))]}},{key:"singleLabel",fn:function(n){var r=n.option;return[e("CalendarPickerOption",t._b({attrs:{"display-icon":!0}},"CalendarPickerOption",r,!1))]}}],null,!1,2046873210),model:{value:t.targetCalendar,callback:function(e){t.targetCalendar=e},expression:"targetCalendar"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"imip__more-options__row imip__more-options__row--comment"},[e("label",{attrs:{for:"commentFieldId"}},[t._v(t._s(t.t("mail","Comment")))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{id:t.commentFieldId,rows:"3"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])]):t._e(),t._v(" "),t.isRequest&&t.userIsAttendee?[!t.wasProcessed&&t.eventIsInFuture&&t.existingEventFetched?e("div",{staticClass:"imip__actions imip__actions--buttons"},[e("Button",{attrs:{type:"secondary",loading:t.loading},on:{click:t.accept}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Accept"))+"\n\t\t\t")]),t._v(" "),e("Button",{attrs:{type:"tertiary",loading:t.loading},on:{click:t.decline}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Decline"))+"\n\t\t\t")]),t._v(" "),e("Button",{attrs:{type:"tertiary",loading:t.loading},on:{click:t.acceptTentatively}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Tentatively accept"))+"\n\t\t\t")]),t._v(" "),t.showMoreOptions?t._e():e("Button",{attrs:{type:"tertiary"},on:{click:function(e){t.showMoreOptions=!0}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More options"))+"\n\t\t\t")])],1):t.eventIsInFuture?t._e():e("p",{staticClass:"imip__actions imip__actions--hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","This event is in the past."))+"\n\t\t")])]:t._e()],2)}),[],!1,null,"a2165bee",null).exports},props:{envelope:{required:!0,type:Object},message:{required:!0,type:Object},fullHeight:{required:!1,type:Boolean,default:!1}},computed:{from:function(){return 0===this.message.from.length?"?":this.message.from[0].label||this.message.from[0].email},htmlUrl:function(){return(0,K.generateUrl)("/apps/mail/api/messages/{id}/html",{id:this.envelope.databaseId})},isEncrypted:function(){return We(this.message.hasHtmlBody?(0,Kr.dy)(this.message.body):(0,Kr.Oh)(this.message.body))},itineraries:function(){var t;return null!==(t=this.message.itineraries)&&void 0!==t?t:[]}}},li=r(1240),ui={};ui.styleTagTransform=g(),ui.setAttributes=h(),ui.insert=p().bind(null,"head"),ui.domAPI=u(),ui.insertStyleElement=A(),c()(li.Z,ui),li.Z&&li.Z.locals&&li.Z.locals;var di=(0,I.Z)(ci,(function(){var t=this,e=t._self._c;return e("div",{class:[t.message.hasHtmlBody?"mail-message-body mail-message-body-html":"mail-message-body"],attrs:{role:"region","aria-label":t.t("mail","Message body")}},[t.itineraries.length>0?e("div",{staticClass:"message-itinerary"},[e("Itinerary",{attrs:{entries:t.itineraries,"message-id":t.message.messageId}})],1):t._e(),t._v(" "),t.message.scheduling.length>0?e("div",{staticClass:"message-imip"},t._l(t.message.scheduling,(function(t){return e("Imip",{key:t.id,attrs:{scheduling:t}})})),1):t._e(),t._v(" "),t.message.hasHtmlBody?e("MessageHTMLBody",{attrs:{url:t.htmlUrl,message:t.message,"full-height":t.fullHeight},on:{load:function(e){return t.$emit("load",e)}}}):t.isEncrypted?e("MessageEncryptedBody",{attrs:{body:t.message.body,from:t.from,message:t.message}}):e("MessagePlainTextBody",{attrs:{body:t.message.body,signature:t.message.signature,message:t.message}}),t._v(" "),e("MessageAttachments",{attrs:{attachments:t.message.attachments,envelope:t.envelope}}),t._v(" "),e("div",{attrs:{id:"reply-composer"}})],1)}),[],!1,null,"6f922626",null).exports,pi=r(52300),fi=r(22117),hi=r(64637);function mi(t){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function Ai(){Ai=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==mi(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function vi(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function gi(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){vi(a,r,o,i,s,"next",t)}function s(t){vi(a,r,o,i,s,"throw",t)}i(void 0)}))}}var yi={name:"MenuEnvelope",components:{Actions:o.O3,ActionButton:o.Js,ActionLink:o.ih,AlertOctagonIcon:q.Z,CalendarBlankIcon:fi.Z,ChevronLeft:st.default,CheckIcon:it.default,DotsHorizontalIcon:ut.default,DownloadIcon:He.Z,EventModal:$e,InformationIcon:F.Z,Modal:o.Jc,MoveModal:Pt,OpenInNewIcon:jt.Z,PlusIcon:Yt.Z,ReplyIcon:Zt.Z,ReplyAllIcon:hi.Z,ShareIcon:dn.Z,TagIcon:Wt.Z,TagModal:oe,ImportantIcon:Rt.Z},props:{envelope:{type:Object,required:!0},mailbox:{type:Object,required:!1,default:void 0},isSelected:{type:Boolean,default:!1},withReply:{type:Boolean,default:!0},withSelect:{type:Boolean,default:!0},withShowSource:{type:Boolean,default:!0}},data:function(){var t,e;return{debug:(null===(t=window)||void 0===t||null===(e=t.OC)||void 0===e?void 0:e.debug)||!1,rawMessage:"",showSourceModal:!1,showMoveModal:!1,showEventModal:!1,showTagModal:!1,moreActionsOpen:!1,forwardMessages:this.envelope.databaseId}},computed:{account:function(){var t,e=null!==(t=this.envelope.accountId)&&void 0!==t?t:this.mailbox.accountId;return this.$store.getters.getAccount(e)},hasMultipleRecipients:function(){this.account||console.error("account is undefined",{accountId:this.envelope.accountId});var t=(0,Ct.oB)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},threadingFile:function(){return"data:text/plain;base64,".concat(pi.DS.encode(JSON.stringify({subject:this.envelope.subject,messageId:this.envelope.messageId,inReplyTo:this.envelope.inReplyTo,references:this.envelope.references,threadRootId:this.envelope.threadRootId},null,2)))},threadingFileName:function(){return"".concat(this.envelope.databaseId,".json")},showFavoriteIconVariant:function(){return this.envelope.flags.flagged},showImportantIconVariant:function(){return this.envelope.flags.seen},isImportant:function(){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some((function(t){return"$label1"===t.imapLabel}))},exportMessageLink:function(){return(0,K.generateUrl)("/apps/mail/api/messages/{id}/export",{id:this.envelope.databaseId})}},methods:{onForward:function(){this.$store.dispatch("showMessageComposer",{reply:{mode:"forward",data:this.envelope}})},onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.envelope)},onToggleImportant:function(){this.$store.dispatch("toggleEnvelopeImportant",this.envelope)},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",{envelope:this.envelope})},onToggleJunk:function(){this.$store.dispatch("toggleEnvelopeJunk",this.envelope)},toggleSelected:function(){this.$emit("update:selected")},forwardSelectedAsAttachment:function(){var t=this;return gi(Ai().mark((function e(){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.forwardedMessages=[t.envelope.databaseId],e.next=3,t.$store.dispatch("showMessageComposer",{forwardedMessages:t.forwardedMessages});case 3:case"end":return e.stop()}}),e)})))()},onShowSourceModal:function(){var t=this;return gi(Ai().mark((function e(){var n;return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.Z.get((0,K.generateUrl)("/apps/mail/api/messages/{id}/source",{id:t.envelope.databaseId}));case 2:n=e.sent,t.rawMessage=n.data.source,t.showSourceModal=!0;case 5:case"end":return e.stop()}}),e)})))()},onCloseSourceModal:function(){this.showSourceModal=!1},onMove:function(){this.$emit("move")},onOpenMoveModal:function(){this.showMoveModal=!0},onCloseMoveModal:function(){this.showMoveModal=!1},onOpenEventModal:function(){this.showEventModal=!0},onOpenTagModal:function(){this.showTagModal=!0},onReply:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.dispatch("showMessageComposer",{reply:{mode:t?"reply":"replyAll",data:this.envelope}})},onCloseTagModal:function(){this.showTagModal=!1},onOpenEditAsNew:function(){var t=this;return gi(Ai().mark((function e(){return Ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("showMessageComposer",{templateMessageId:t.envelope.databaseId,data:t.envelope});case 2:case"end":return e.stop()}}),e)})))()}}},Ci=yi,bi=r(13607),xi={};xi.styleTagTransform=g(),xi.setAttributes=h(),xi.insert=p().bind(null,"head"),xi.domAPI=u(),xi.insertStyleElement=A(),c()(bi.Z,xi),bi.Z&&bi.Z.locals&&bi.Z.locals;var wi=(0,I.Z)(Ci,(function(){var t=this,e=t._self._c;return e("div",[e("Actions",{attrs:{"menu-align":"right",event:""},nativeOn:{click:function(t){t.preventDefault()}}},[t.moreActionsOpen?t._e():[e("ActionButton",{staticClass:"action--primary",attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleImportant.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ImportantIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4006335173)},[t._v("\n\t\t\t\t"+t._s(t.isImportant?t.t("mail","Unimportant"):t.t("mail","Important"))+"\n\t\t\t")]),t._v(" "),t.withReply?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onReply},scopedSlots:t._u([{key:"icon",fn:function(){return[t.hasMultipleRecipients?e("ReplyAllIcon",{attrs:{title:t.t("mail","Reply all"),size:20}}):e("ReplyIcon",{attrs:{title:t.t("mail","Reply"),size:20}})]},proxy:!0}],null,!1,1812719128)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Reply"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasMultipleRecipients?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return t.onReply(!0)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ReplyIcon",{attrs:{title:t.t("mail","Reply to sender only"),size:20}})]},proxy:!0}],null,!1,1847095553)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Reply to sender only"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onForward},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward"),size:20}})]},proxy:!0}],null,!1,3681882419)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Forward"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleJunk.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlertOctagonIcon",{attrs:{title:t.envelope.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"),size:20}})]},proxy:!0}],null,!1,3018406441)},[t._v("\n\t\t\t\t"+t._s(t.envelope.flags.$junk?t.t("mail","Mark not spam"):t.t("mail","Mark as spam"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenTagModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TagIcon",{attrs:{title:t.t("mail","Edit tags"),size:20}})]},proxy:!0}],null,!1,1760434282)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit tags"))+"\n\t\t\t")]),t._v(" "),t.withSelect?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.toggleSelected.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{title:t.isSelected?t.t("mail","Unselect"):t.t("mail","Select"),size:20}})]},proxy:!0}],null,!1,3004720510)},[t._v("\n\t\t\t\t"+t._s(t.isSelected?t.t("mail","Unselect"):t.t("mail","Select"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{title:t.t("mail","Move message"),size:20}})]},proxy:!0}],null,!1,3082800176)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Move message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.moreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{title:t.t("mail","More actions"),size:20}})]},proxy:!0}],null,!1,2458825807)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t")])],t._v(" "),t.moreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.moreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","More actions"),size:20}}),t._v("\n\t\t\t\t\t"+t._s(t.t("mail","More actions"))+"\n\t\t\t\t")]},proxy:!0}],null,!1,2293545807)}),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.forwardSelectedAsAttachment.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ShareIcon",{attrs:{title:t.t("mail","Forward message as attachment"),size:20}})]},proxy:!0}],null,!1,1446130195)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Forward message as attachment"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.onOpenEditAsNew},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PlusIcon",{attrs:{title:t.t("mail","Edit as new message"),size:20}})]},proxy:!0}],null,!1,2673016614)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Edit as new message"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){e.preventDefault(),t.showEventModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarBlankIcon",{attrs:{title:t.t("mail","Create event"),size:20}})]},proxy:!0}],null,!1,3283461621)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Create event"))+"\n\t\t\t")]),t._v(" "),t.withShowSource?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onShowSourceModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("InformationIcon",{attrs:{title:t.t("mail","View source"),size:20}})]},proxy:!0}],null,!1,3604652729)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","View source"))+"\n\t\t\t")]):t._e(),t._v(" "),e("ActionLink",{attrs:{"close-after-click":!0,href:t.exportMessageLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2598526839)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Download message"))+"\n\t\t\t")]),t._v(" "),t.debug?e("ActionLink",{attrs:{download:t.threadingFileName,href:t.threadingFile,"close-after-click":!0},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DownloadIcon",{attrs:{title:t.t("mail","Download thread data for debugging"),size:20}})]},proxy:!0}],null,!1,1608243158)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Download thread data for debugging"))+"\n\t\t\t")]):t._e()]:t._e()],2),t._v(" "),t.showSourceModal?e("Modal",{staticClass:"source-modal",on:{close:t.onCloseSourceModal}},[e("div",{staticClass:"source-modal-content"},[e("div",{staticClass:"section"},[e("h2",[t._v(t._s(t.t("mail","Message source")))]),t._v(" "),e("pre",{staticClass:"message-source"},[t._v(t._s(t.rawMessage))])])])]):t._e(),t._v(" "),t.showMoveModal?e("MoveModal",{attrs:{account:t.account,envelopes:[t.envelope]},on:{move:t.onMove,close:t.onCloseMoveModal}}):t._e(),t._v(" "),t.showEventModal?e("EventModal",{attrs:{envelope:t.envelope},on:{close:function(e){t.showEventModal=!1}}}):t._e(),t._v(" "),t.showTagModal?e("TagModal",{attrs:{account:t.account,envelope:t.envelope},on:{close:t.onCloseTagModal}}):t._e()],1)}),[],!1,null,"44f96cc8",null),_i=wi.exports,ki={name:"Moment",props:{timestamp:{type:Number,required:!0},format:{type:String,default:"LLL"}},computed:{title:function(){return _t().unix(this.timestamp).format(this.format)},formatted:function(){return kt(new Date(1e3*this.timestamp))}}},Ei=(0,I.Z)(ki,(function(){var t=this;return(0,t._self._c)("span",{attrs:{"data-timestamp":1e3*t.timestamp,title:t.title}},[t._v(t._s(t.formatted))])}),[],!1,null,null,null).exports;function Ii(t){return Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(t)}function Si(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Li(){Li=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Ii(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Ti(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Di(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Ti(a,r,o,i,s,"next",t)}function s(t){Ti(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Bi={name:"ThreadEnvelope",components:{Avatar:ot,ButtonVue:o.P2,Error:Pn,IconFavorite:Ft.default,JunkIcon:qt,MessageLoadingSkeleton:Qr,MenuEnvelope:_i,Moment:Ei,Message:di,ReplyIcon:Zt.Z,ReplyAllIcon:hi.Z,StarOutline:Nt.default,EmailRead:Gt.Z,EmailUnread:Z.Z,DeleteIcon:ct.Z,ArchiveIcon:lt.Z},props:{envelope:{required:!0,type:Object},mailboxId:{required:!1,type:[String,Number],default:void 0},expanded:{required:!1,type:Boolean,default:!1},fullHeight:{required:!1,type:Boolean,default:!1},withSelect:{type:Boolean,default:!0}},data:function(){return{loading:0,error:void 0,message:void 0,importantSvg:pt(),seenTimer:void 0,LOADING_BODY:2,LOADING_DONE:0,LOADING_MESSAGE:1}},computed:{account:function(){return this.$store.getters.getAccount(this.envelope.accountId)},hasMultipleRecipients:function(){this.account||console.error("account is undefined",{accountId:this.envelope.accountId});var t=(0,Ct.oB)(this.envelope,{label:this.account.name,email:this.account.emailAddress});return t.to.concat(t.cc).length>1},route:function(){return{name:"message",params:{mailboxId:this.mailboxId||this.envelope.mailboxId,threadId:this.envelope.databaseId}}},isEncrypted:function(){return this.envelope.previewText&&Ve(this.envelope.previewText)},isImportant:function(){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).find((function(t){return"$label1"===t.imapLabel}))},tags:function(){return this.$store.getters.getEnvelopeTags(this.envelope.databaseId).filter((function(t){return"$label1"!==t.imapLabel&&!(t.displayName.toLowerCase()in Ht)}))},showSubline:function(){return!this.expanded&&!!this.envelope.previewText},showArchiveButton:function(){return null!==this.account.archiveMailboxId},junkFavoritePosition:function(){return this.showSubline&&this.tags.length>0},junkFavoritePositionWithTagSubline:function(){return!this.showSubline&&this.tags.length>0},showFavoriteIconVariant:function(){return this.envelope.flags.flagged},showImportantIconVariant:function(){return this.envelope.flags.seen}},watch:{expanded:function(t){t?this.fetchMessage():(this.message=void 0,this.loading=0)}},mounted:function(){var t=this;return Di(Li().mark((function e(){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.expanded){e.next=4;break}return e.next=3,t.fetchMessage();case 3:t.$nextTick((function(){return t.scrollToCurrentEnvelope()}));case 4:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){void 0!==this.seenTimer&&(w.Z.info("Navigating away before seenTimer delay, will not mark message as seen/read"),clearTimeout(this.seenTimer))},methods:{fetchMessage:function(){var t=this;return Di(Li().mark((function e(){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=1,t.error=void 0,w.Z.debug("fetching thread message ".concat(t.envelope.databaseId)),e.prev=3,e.next=6,t.$store.dispatch("fetchMessage",t.envelope.databaseId);case 6:t.message=e.sent,w.Z.debug("message ".concat(t.envelope.databaseId," fetched"),{message:t.message}),t.envelope.flags.seen||(w.Z.info("Starting timer to mark message as seen/read"),t.seenTimer=setTimeout((function(){t.$store.dispatch("toggleEnvelopeSeen",{envelope:t.envelope}),t.seenTimer=void 0}),2e3)),t.message.hasHtmlBody?t.loading=2:t.loading=0,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),t.error=e.t0,t.loading=0,w.Z.error("Could not fetch message",{error:e.t0});case 17:if(!t.message||t.message.itineraries){e.next=20;break}return e.next=20,t.fetchItineraries();case 20:case"end":return e.stop()}}),e,null,[[3,12]])})))()},fetchItineraries:function(){var t=this;return Di(Li().mark((function e(){var n;return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.message.hasHtmlBody||0!==t.message.attachments.length){e.next=2;break}return e.abrupt("return");case 2:return w.Z.debug("Fetching itineraries for message ".concat(t.envelope.databaseId)),e.prev=3,e.next=6,t.$store.dispatch("fetchItineraries",t.envelope.databaseId);case 6:n=e.sent,w.Z.debug("Itineraries of message ".concat(t.envelope.databaseId," fetched"),{itineraries:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),w.Z.error("Could not fetch itineraries of message ".concat(t.envelope.databaseId),{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},scrollToCurrentEnvelope:function(){var t=document.querySelector("#header").clientHeight,e=document.querySelector("#mail-thread-header").clientHeight,n=this.$el.getBoundingClientRect().top-t-e;window.scrollTo({top:n})},onReply:function(){this.$store.dispatch("showMessageComposer",{reply:{mode:this.hasMultipleRecipients?"replyAll":"reply",data:this.envelope}})},onToggleImportant:function(){this.$store.dispatch("toggleEnvelopeImportant",this.envelope)},onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.envelope)},onToggleJunk:function(){this.$store.dispatch("toggleEnvelopeJunk",this.envelope)},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",{envelope:this.envelope})},onDelete:function(){var e=this;return Di(Li().mark((function n(){var r;return Li().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.withSelect&&e.$emit("unselect"),e.$emit("delete",e.envelope.databaseId),w.Z.info("deleting message ".concat(e.envelope.databaseId)),n.prev=3,n.next=6,e.$store.dispatch("deleteMessage",{id:e.envelope.databaseId});case 6:n.next=15;break;case 8:return n.prev=8,n.t0=n.catch(3),n.t1=U.showError,n.next=13,(0,It.d)(n.t0,(Si(r={},Et.Z.getName(),(function(){return t("mail","No trash mailbox configured")})),Si(r,"default",(function(e){return w.Z.error("could not delete message",e),t("mail","Could not delete message")})),r));case 13:n.t2=n.sent,(0,n.t1)(n.t2);case 15:case"end":return n.stop()}}),n,null,[[3,8]])})))()},onArchive:function(){var e=this;return Di(Li().mark((function n(){return Li().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.withSelect&&e.$emit("unselect"),e.$emit("archive",e.envelope.databaseId),w.Z.info("archiving message ".concat(e.envelope.databaseId)),n.prev=3,n.next=6,e.$store.dispatch("moveMessage",{id:e.envelope.databaseId,destMailboxId:e.account.archiveMailboxId});case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(3),w.Z.error("could not archive message",n.t0),n.abrupt("return",t("mail","Could not archive message"));case 12:case"end":return n.stop()}}),n,null,[[3,8]])})))()}}},Oi=r(31416),Mi={};Mi.styleTagTransform=g(),Mi.setAttributes=h(),Mi.insert=p().bind(null,"head"),Mi.domAPI=u(),Mi.insertStyleElement=A(),c()(Oi.Z,Mi),Oi.Z&&Oi.Z.locals&&Oi.Z.locals;var Pi=(0,I.Z)(Bi,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"envelope",class:{"envelope--expanded":t.expanded}},[e("div",{staticClass:"envelope__header"},[t.envelope.from&&t.envelope.from[0]?e("Avatar",{attrs:{email:t.envelope.from[0].email,"display-name":t.envelope.from[0].label,"disable-tooltip":!0,size:40}}):t._e(),t._v(" "),t.isImportant?e("div",{staticClass:"app-content-list-item-star icon-important",attrs:{"data-starred":t.isImportant?"true":"false"},domProps:{innerHTML:t._s(t.importantSvg)},on:{click:function(e){return e.preventDefault(),t.onToggleImportant.apply(null,arguments)}}}):t._e(),t._v(" "),t.envelope.flags.flagged?e("IconFavorite",{staticClass:"app-content-list-item-star favorite-icon-style",class:{"junk-favorite-position":t.junkFavoritePosition,"junk-favorite-position-with-tag-subline":t.junkFavoritePositionWithTagSubline},attrs:{"fill-color":"#f9cf3d",size:18,"data-starred":t.envelope.flags.flagged?"true":"false"},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged.apply(null,arguments)}}}):t._e(),t._v(" "),t.envelope.flags.$junk?e("JunkIcon",{staticClass:"app-content-list-item-star junk-icon-style",class:{"junk-favorite-position":t.junkFavoritePosition,"junk-favorite-position-with-tag-subline":t.junkFavoritePositionWithTagSubline},attrs:{size:18,"data-starred":t.envelope.flags.$junk?"true":"false"},on:{click:function(e){return e.preventDefault(),t.onToggleJunk.apply(null,arguments)}}}):t._e(),t._v(" "),e("router-link",{staticClass:"left",class:{seen:t.envelope.flags.seen},attrs:{to:t.route,event:""},nativeOn:{click:function(e){return e.preventDefault(),t.$emit("toggle-expand",e)}}},[e("div",{staticClass:"sender"},[t._v("\n\t\t\t\t"+t._s(t.envelope.from&&t.envelope.from[0]?t.envelope.from[0].label:"")+"\n\t\t\t")]),t._v(" "),t.showSubline?e("div",{staticClass:"subline"},[e("span",{staticClass:"preview"},[t._v("\n\t\t\t\t\t"+t._s(t.isEncrypted?t.t("mail","Encrypted message"):t.envelope.previewText)+"\n\t\t\t\t")])]):t._e(),t._v(" "),t._l(t.tags,(function(n){return e("div",{key:n.id,staticClass:"tag-group"},[e("div",{staticClass:"tag-group__bg",style:{"background-color":n.color}}),t._v(" "),e("span",{staticClass:"tag-group__label",style:{color:n.color}},[t._v(t._s(n.displayName)+" ")])])}))],2),t._v(" "),e("div",{staticClass:"right"},[e("Moment",{staticClass:"timestamp",attrs:{timestamp:t.envelope.dateInt}}),t._v(" "),t.expanded?[e("ButtonVue",{class:{primary:t.expanded},attrs:{title:t.hasMultipleRecipients?t.t("mail","Reply all"):t.t("mail","Reply"),type:"tertiary-no-background"},on:{click:t.onReply},scopedSlots:t._u([{key:"icon",fn:function(){return[t.hasMultipleRecipients?e("ReplyAllIcon",{attrs:{size:20}}):e("ReplyIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1928057497)}),t._v(" "),e("ButtonVue",{staticClass:"action--primary",attrs:{type:"tertiary-no-background",title:t.envelope.flags.flagged?t.t("mail","Mark as unfavorite"):t.t("mail","Mark as favorite"),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showFavoriteIconVariant?e("StarOutline",{attrs:{size:20}}):e("IconFavorite",{attrs:{size:20}})]},proxy:!0}],null,!1,1876880570)}),t._v(" "),e("ButtonVue",{staticClass:"action--primary",attrs:{type:"tertiary-no-background",title:t.envelope.flags.seen?t.t("mail","Mark as unread"):t.t("mail","Mark as read"),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onToggleSeen.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.showImportantIconVariant?e("EmailRead",{attrs:{size:20}}):e("EmailUnread",{attrs:{size:20}})]},proxy:!0}],null,!1,939729496)}),t._v(" "),t.showArchiveButton?e("ButtonVue",{attrs:{"close-after-click":!0,type:"tertiary-no-background"},on:{click:function(e){return e.preventDefault(),t.onArchive.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArchiveIcon",{attrs:{title:t.t("mail","Archive message"),size:20}})]},proxy:!0}],null,!1,3586051918)}):t._e(),t._v(" "),e("ButtonVue",{attrs:{"close-after-click":!0,type:"tertiary-no-background"},on:{click:function(e){return e.preventDefault(),t.onDelete.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete message"),size:20}})]},proxy:!0}],null,!1,698101614)}),t._v(" "),e("MenuEnvelope",{staticClass:"app-content-list-item-menu",attrs:{envelope:t.envelope,"with-reply":!1,"with-select":!1,"with-show-source":!0},on:{delete:function(e){return t.$emit("delete",t.envelope.databaseId)}}})]:t._e()],2)],1),t._v(" "),t.loading!==t.LOADING_DONE?e("MessageLoadingSkeleton"):t._e(),t._v(" "),t.message&&t.loading!==t.LOADING_MESSAGE?e("Message",{directives:[{name:"show",rawName:"v-show",value:t.loading===t.LOADING_DONE,expression:"loading === LOADING_DONE"}],attrs:{envelope:t.envelope,message:t.message,"full-height":t.fullHeight},on:{load:function(e){t.loading=t.LOADING_DONE}}}):t.error?e("Error",{attrs:{error:t.error.message||t.t("mail","Not found"),message:"",data:t.error,"auto-margin":!0,role:"alert"}}):t._e()],1)}),[],!1,null,"347bd6c8",null),ji=Pi.exports;function Ni(t){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ni(t)}function Fi(){Fi=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Ni(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Zi(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Gi(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Zi(a,r,o,i,s,"next",t)}function s(t){Zi(a,r,o,i,s,"throw",t)}i(void 0)}))}}var zi={name:"Thread",components:{RecipientBubble:Wr,AppContentDetails:o.ZJ,Error:Pn,Loading:Zn,ThreadEnvelope:ji,Popover:o.Fh},data:function(){return{loading:!0,message:void 0,errorMessage:"",error:void 0,expandedThreads:[],participantsToDisplay:999,resizeDebounced:Tr()(500,this.updateParticipantsToDisplay)}},computed:{moreParticipantsString:function(){return"+".concat(this.threadParticipants.length-this.participantsToDisplay)},threadId:function(){return parseInt(this.$route.params.threadId,10)},thread:function(){var t=this.$store.getters.getEnvelope(this.threadId);if(void 0===t)return[];var e=this.$store.getters.getEnvelopesByThreadRootId(t.accountId,t.threadRootId);if(0===e.length)return[];var n=this.$store.getters.getMailbox(t.mailboxId),r=this.$store.getters.getMailboxes(n.accountId).find((function(t){return"trash"===t.specialRole}));return void 0===r?e:n.databaseId===r.databaseId?e.filter((function(t){return t.mailboxId===r.databaseId})):e.filter((function(t){return t.mailboxId!==r.databaseId}))},threadParticipants:function(){var t=this.thread.flatMap((function(t){return t.from.concat(t.to).concat(t.cc)}));return(0,un.mNm)((0,un.vgT)("email"),t)},threadSubject:function(){var t=this.thread;return 0===t.length?(console.warn("thread is empty"),""):t[0].subject||this.t("mail","No subject")}},watch:{$route:function(t,e){e.name!==t.name||e.params.mailboxId!==t.params.mailboxId||e.params.threadId!==t.params.threadId||e.params.filter!==t.params.filter?(w.Z.debug("navigated to another thread",{to:t,from:e}),this.resetThread()):w.Z.debug("navigated but the thread is still the same")}},created:function(){this.resetThread(),window.addEventListener("resize",this.resizeDebounced)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeDebounced)},methods:{updateParticipantsToDisplay:function(){if(this.$refs.avatarHeader&&this.threadParticipants){for(var t=this.$refs.avatarHeader,e=t.clientWidth-100,n=0,r=0,o=0;n<e&&r<this.threadParticipants.length;)void 0!==t.childNodes[o].clientWidth?(n+=t.childNodes[o].clientWidth,r++,o++):o+=3;this.participantsToDisplay=n>e?r>1?r-1:0===r?1:r:this.threadParticipants.length}},toggleExpand:function(t){1!==this.thread.length&&(this.expandedThreads.includes(t)?(console.debug("collapse thread ".concat(t)),this.expandedThreads=this.expandedThreads.filter((function(e){return e!==t}))):(console.debug("expand thread ".concat(t)),this.expandedThreads.push(t)))},onMove:function(t){t===this.threadId?this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId}}):(this.expandedThreads=this.expandedThreads.filter((function(e){return e!==t})),this.fetchThread())},resetThread:function(){var t=this;return Gi(Fi().mark((function e(){return Fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.expandedThreads=[t.threadId],t.errorMessage="",t.error=void 0,e.next=5,t.fetchThread();case 5:t.updateParticipantsToDisplay();case 6:case"end":return e.stop()}}),e)})))()},fetchThread:function(){var e=this;return Gi(Fi().mark((function n(){var r,o,a;return Fi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,e.errorMessage="",e.error=void 0,r=e.threadId,n.prev=4,n.next=7,e.$store.dispatch("fetchThread",r);case 7:if(o=n.sent,w.Z.debug("thread for envelope ".concat(r," fetched"),{thread:o}),r===parseInt(e.$route.params.threadId,10)){n.next=12;break}return w.Z.debug("User navigated away, loaded envelope won't be shown nor flagged as seen",{oldId:r,newId:e.$route.params.threadId}),n.abrupt("return");case 12:if(0!==o.length){n.next=17;break}return w.Z.info("thread could not be found and is empty",{threadId:r}),e.errorMessage=(void 0,(i=[(0,Dr.translate)("mail","Could not load your message"),(0,Dr.translate)("mail","Could not load the desired message"),(0,Dr.translate)("mail","Could not load the message")])[Math.floor(Math.random()*i.length)]+" "+Br[Math.floor(Math.random()*Br.length)]),e.loading=!1,n.abrupt("return");case 17:e.loading=!1,n.next=24;break;case 20:n.prev=20,n.t0=n.catch(4),w.Z.error("could not load envelope thread",{threadId:r,error:n.t0}),403===(null===n.t0||void 0===n.t0||null===(a=n.t0.response)||void 0===a?void 0:a.status)?(e.error=t("mail","Could not load your message thread"),e.errorMessage=t("mail","The thread doesn't exist or has been deleted"),e.loading=!1):e.errorMessage=t("mail","Could not load your message thread");case 24:case"end":return n.stop()}var i}),n,null,[[4,20]])})))()}}},Ri=r(11305),$i={};$i.styleTagTransform=g(),$i.setAttributes=h(),$i.insert=p().bind(null,"head"),$i.domAPI=u(),$i.insertStyleElement=A(),c()(Ri.Z,$i),Ri.Z&&Ri.Z.locals&&Ri.Z.locals;var Ui=(0,I.Z)(zi,(function(){var t=this,e=t._self._c;return e("AppContentDetails",{attrs:{id:"mail-message"}},[t.loading&&0===t.thread.length?e("Loading",{attrs:{hint:t.t("mail","Loading thread")}}):t.error?e("Error",{attrs:{error:t.error&&t.error.message?t.error.message:t.t("mail","Not found"),message:t.errorMessage}}):[e("div",{attrs:{id:"mail-thread-header"}},[e("div",{attrs:{id:"mail-thread-header-fields"}},[e("h2",{attrs:{title:t.threadSubject}},[t._v("\n\t\t\t\t\t"+t._s(t.threadSubject)+"\n\t\t\t\t")]),t._v(" "),t.thread.length?e("div",{ref:"avatarHeader",staticClass:"avatar-header"},[t._l(t.threadParticipants.slice(0,t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,attrs:{email:t.email,label:t.label}})})),t._v(" "),t.threadParticipants.length>t.participantsToDisplay?e("Popover",{staticClass:"avatar-more"},[e("span",{staticClass:"avatar-more",attrs:{slot:"trigger"},slot:"trigger"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.moreParticipantsString)+"\n\t\t\t\t\t\t")]),t._v(" "),t._l(t.threadParticipants.slice(t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,attrs:{email:t.email,label:t.label}})}))],2):t._e(),t._v(" "),t._l(t.threadParticipants.slice(t.participantsToDisplay),(function(t){return e("RecipientBubble",{key:t.email,staticClass:"avatar-hidden",attrs:{email:t.email,label:t.label}})}))],2):t._e()])]),t._v(" "),t._l(t.thread,(function(n){return e("ThreadEnvelope",{key:n.databaseId,attrs:{envelope:n,"mailbox-id":t.$route.params.mailboxId,expanded:t.expandedThreads.includes(n.databaseId),"full-height":1===t.thread.length},on:{delete:function(e){return t.$emit("delete",n.databaseId)},move:function(e){return t.onMove(n.databaseId)},"toggle-expand":function(e){return t.toggleExpand(n.databaseId)}}})}))]],2)}),[],!1,null,null,null).exports,qi=r(98238),Yi=r(31738);function Wi(t){return Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wi(t)}function Vi(){Vi=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Wi(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Hi(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var Qi={name:"MailboxThread",directives:{infiniteScroll:N},components:{AppContent:o.Mb,AppContentList:o.Yx,ButtonVue:o.P2,IconInfo:F.Z,Mailbox:Xn,NoMessageSelected:Sr,Popover:o.Fh,SectionTitle:S,SearchMessages:Er,Thread:Ui},mixins:[i()],props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:function(){return{importantInfo:t("mail","Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time."),bus:new L.ZP,searchQuery:void 0,shortkeys:{del:["del"],arch:["a"],flag:["s"],next:["arrowright"],prev:["arrowleft"],refresh:["r"],unseen:["u"]},priorityImportantQuery:Yi.Rg,priorityOtherQuery:Yi.o,startMailboxTimer:void 0}},computed:{unifiedAccount:function(){return this.$store.getters.getAccount(qi.y9)},unifiedInbox:function(){return this.$store.getters.getMailbox(qi.e0)},hasEnvelopes:function(){return this.$store.getters.getEnvelopes(this.mailbox.databaseId,this.searchQuery).length>0},hasImportantEnvelopes:function(){return this.$store.getters.getEnvelopes(this.unifiedInbox.databaseId,this.appendToSearch(Yi.Rg)).length>0},showThread:function(){return(!0===this.mailbox.isPriorityInbox||this.hasEnvelopes)&&"message"===this.$route.name},query:function(){return"starred"===this.$route.params.filter?this.searchQuery?this.searchQuery+" is:starred":"is:starred":this.searchQuery},isThreadShown:function(){return!!this.$route.params.threadId}},watch:{$route:function(){this.handleMailto()},mailbox:function(){clearTimeout(this.startMailboxTimer),setTimeout(this.saveStartMailbox,5e3)}},created:function(){this.handleMailto()},mounted:function(){setTimeout(this.saveStartMailbox,5e3)},beforeUnmount:function(){clearTimeout(this.startMailboxTimer)},methods:{deleteMessage:function(t){this.bus.$emit("delete",t)},onScroll:function(t){w.Z.debug("scroll",{event:t}),this.bus.$emit("load-more")},onShortcut:function(t){this.bus.$emit("shortcut",t)},appendToSearch:function(t){return void 0===this.searchQuery?t:this.searchQuery+" "+t},hideMessage:function(){var t;this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(t=this.$route.params)||void 0===t?void 0:t.filter}})},handleMailto:function(){var t;"message"===this.$route.name&&"mailto"===this.$route.params.threadId&&(0!==this.$route.params.accountId&&"0"!==this.$route.params.accountId&&(t=parseInt(this.$route.params.accountId,10)),this.$store.dispatch("showMessageComposer",{data:{accountId:t,to:this.stringToRecipients(this.$route.query.to),cc:this.stringToRecipients(this.$route.query.cc),subject:this.$route.query.subject||"",body:this.$route.query.body?(0,Kr.qY)(this.$route.query.body):(0,Kr.dy)("")}}))},saveStartMailbox:function(){var t,e=this;return(t=Vi().mark((function t(){return Vi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.getters.getPreference("start-mailbox-id")!==e.mailbox.databaseId){t.next=3;break}return t.abrupt("return");case 3:return w.Z.debug("Saving mailbox ".concat(e.mailbox.databaseId," as start mailbox")),t.prev=4,t.next=7,e.$store.dispatch("savePreference",{key:"start-mailbox-id",value:e.mailbox.databaseId});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),w.Z.warn("Could not update start mailbox id",{error:t.t0});case 12:case"end":return t.stop()}}),t,null,[[4,9]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Hi(a,r,o,i,s,"next",t)}function s(t){Hi(a,r,o,i,s,"throw",t)}i(void 0)}))})()},stringToRecipients:function(t){return void 0===t?[]:[{label:t,email:t}]},onUpdateSearchQuery:function(t){this.searchQuery=t}}},Ki=Qi,Ji=r(84567),Xi={};Xi.styleTagTransform=g(),Xi.setAttributes=h(),Xi.insert=p().bind(null,"head"),Xi.domAPI=u(),Xi.insertStyleElement=A(),c()(Ji.Z,Xi),Ji.Z&&Ji.Z.locals&&Ji.Z.locals;var ts=(0,I.Z)(Ki,(function(){var t=this,e=t._self._c;return e("AppContent",{attrs:{"pane-config-key":"mail","show-details":t.isThreadShown},on:{"update:showDetails":t.hideMessage}},[e("div",{class:{header__button:!t.showThread||!t.isMobile},attrs:{slot:"list"},slot:"list"},[t.showThread&&t.isMobile?t._e():e("SearchMessages",{attrs:{mailbox:t.mailbox},on:{"search-changed":t.onUpdateSearchQuery}}),t._v(" "),e("AppContentList",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.onScroll,expression:"onScroll"},{name:"shortkey",rawName:"v-shortkey.once",value:t.shortkeys,expression:"shortkeys",modifiers:{once:!0}}],staticClass:"envelope-list",attrs:{"infinite-scroll-immediate-check":"false","show-details":t.showThread,"infinite-scroll-disabled":!1,"infinite-scroll-distance":10,role:"heading","aria-level":2},nativeOn:{shortkey:function(e){return t.onShortcut.apply(null,arguments)}}},[t.mailbox.isPriorityInbox?[e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImportantEnvelopes,expression:"hasImportantEnvelopes"}],staticClass:"app-content-list-item"},[e("SectionTitle",{staticClass:"important",attrs:{name:t.t("mail","Important")}}),t._v(" "),e("Popover",{attrs:{trigger:"hover focus"}},[e("ButtonVue",{staticClass:"button",attrs:{slot:"trigger",type:"tertiary-no-background","aria-label":t.t("mail","Important info")},slot:"trigger",scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:20}})]},proxy:!0}])}),t._v(" "),e("p",{staticClass:"important-info"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.importantInfo)+"\n\t\t\t\t\t\t")])],1)],1),t._v(" "),e("Mailbox",{directives:[{name:"show",rawName:"v-show",value:t.hasImportantEnvelopes,expression:"hasImportantEnvelopes"}],staticClass:"nameimportant",attrs:{account:t.unifiedAccount,mailbox:t.unifiedInbox,"search-query":t.appendToSearch(t.priorityImportantQuery),paginate:"manual","is-priority-inbox":!0,"initial-page-size":8,collapsible:!0,bus:t.bus}}),t._v(" "),e("SectionTitle",{directives:[{name:"show",rawName:"v-show",value:t.hasImportantEnvelopes,expression:"hasImportantEnvelopes"}],staticClass:"app-content-list-item other",attrs:{name:t.t("mail","Other")}}),t._v(" "),e("Mailbox",{staticClass:"nameother",attrs:{account:t.unifiedAccount,mailbox:t.unifiedInbox,"open-first":!1,"search-query":t.appendToSearch(t.priorityOtherQuery),"is-priority-inbox":!0,bus:t.bus}})]:e("Mailbox",{attrs:{account:t.account,mailbox:t.mailbox,"search-query":t.query,bus:t.bus,"open-first":"drafts"!==t.mailbox.specialRole}})],2)],1),t._v(" "),t.showThread?e("Thread",{on:{delete:t.deleteMessage}}):t.hasEnvelopes&&!t.isMobile?e("NoMessageSelected"):t._e()],1)}),[],!1,null,"3916af53",null),es=ts.exports,ns=r(21711),rs=r.n(ns),os=r(45668),as=r.n(os),is=r(59197),ss=r(88846),cs=r.n(ss),ls=r(76059),us=r.n(ls),ds=r(37667),ps=r.n(ds);function fs(t){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fs(t)}function hs(){hs=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==fs(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function ms(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function As(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){ms(a,r,o,i,s,"next",t)}function s(t){ms(a,r,o,i,s,"throw",t)}i(void 0)}))}}function vs(t){return gs.apply(this,arguments)}function gs(){return(gs=As(hs().mark((function t(e){var n,r;return hs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe("files").stat(e,{data:'<?xml version="1.0"?>\n\t\t\t<d:propfind\n\t\t\txmlns:d="DAV:"\n\t\t\txmlns:oc="http://owncloud.org/ns"\n\t\t\txmlns:nc="http://nextcloud.org/ns">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t\t<oc:fileid />\n\t\t\t\t\t<nc:has-preview />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>',details:!0});case 2:return r=t.sent,t.abrupt("return",null==r||null===(n=r.data)||void 0===n?void 0:n.props);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ys(t){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(t)}function Cs(){Cs=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==ys(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function bs(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var xs=function(){var e,n=(e=Cs().mark((function e(n,r){var o;return Cs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.Z.post((0,K.generateOcsUrl)("apps/files_sharing/api/v1/",2)+"shares",{shareType:3,path:n,shareWith:r});case 3:return o=e.sent,e.abrupt("return",o.data.ocs.data.url);case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.ocs&&e.t0.response.data.ocs.meta&&e.t0.response.data.ocs.meta.message)){e.next=15;break}throw console.error("Error while sharing file: ".concat(e.t0.response.data.ocs.meta.message||"Unknown error")),(0,U.showError)(e.t0.response.data.ocs.meta.message),e.t0;case 15:throw console.error("Error while sharing file: Unknown error"),(0,U.showError)(t("mail","Error while sharing file")),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(t){bs(a,r,o,i,s,"next",t)}function s(t){bs(a,r,o,i,s,"throw",t)}i(void 0)}))});return function(t,e){return n.apply(this,arguments)}}(),ws=r(84701),_s={name:"ComposerAttachment",components:{Close:fr.default,Cloud:ws.Z},props:{bus:{type:Object,required:!0},attachment:{type:Object,required:!0},uploading:{type:Boolean,default:!1}},data:function(){return{progress:0,sizeString:"",finished:!1}},computed:{previewURL:function(){return this.attachment.hasPreview&&this.attachment.id>0?(0,K.generateUrl)("/core/preview?fileId=".concat(this.attachment.id,"&x=100&y=100&a=0")):""},getIcon:function(){return OC.MimeType.getIconUrl(this.attachment.fileType)},extension:function(){return this.attachment.fileName.split(".").pop()}},methods:{onDelete:function(t){this.$emit("on-delete-attachment",t)}}},ks=r(33706),Es={};Es.styleTagTransform=g(),Es.setAttributes=h(),Es.insert=p().bind(null,"head"),Es.domAPI=u(),Es.insertStyleElement=A(),c()(ks.Z,Es),ks.Z&&ks.Z.locals&&ks.Z.locals;var Is=(0,I.Z)(_s,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"composer-attachment",class:{"composer-attachment--with-error":t.attachment.error}},[e("div",{staticClass:"attachment-preview"},[!1!==t.attachment.imageBlobURL?e("img",{staticClass:"attachment-preview-image",attrs:{src:t.attachment.imageBlobURL}}):t.attachment.hasPreview?e("img",{staticClass:"attachment-preview-image",attrs:{src:t.previewURL}}):e("img",{staticClass:"attachment-preview-image",attrs:{src:t.getIcon}}),t._v(" "),"cloud"===t.attachment.type?e("span",{staticClass:"cloud-attachment-icon"},[e("Cloud",{attrs:{size:16}})],1):t._e()]),t._v(" "),e("div",{staticClass:"attachment-inner"},[e("span",{staticClass:"new-message-attachment-name"},[t._v("\n\t\t\t"+t._s(t.attachment.displayName?t.attachment.displayName:t.attachment.fileName)+"\n\t\t")]),t._v(" "),t.attachment.finished?e("span",{staticClass:"new-message-attachment-size"},[t._v(t._s(t.attachment.sizeString))]):e("span",{staticClass:"attachments-upload-progress"},[e("span",{staticClass:"attachments-upload-progress--bar",style:"width:"+t.attachment.percent+"%"})])]),t._v(" "),e("button",{on:{click:function(e){return t.onDelete(t.attachment)}}},[e("Close",{attrs:{size:24}})],1)])}),[],!1,null,"47464ade",null).exports;function Ss(t){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ss(t)}function Ls(){Ls=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Ss(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Ts(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ds(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Ts(a,r,o,i,s,"next",t)}function s(t){Ts(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Bs=["image/gif","image/jpeg","image/pjpeg","image/png","image/webp"],Os={name:"ComposerAttachments",components:{ComposerAttachment:Is,ChevronDown:Oo.default,ChevronUp:Mo.Z},props:{value:{type:Array,required:!0},bus:{type:Object,required:!0},uploadSizeLimit:{type:Number,default:0}},data:function(){return{uploading:!1,uploads:{},attachments:[],isToggle:!1,hasNextLine:!1}},computed:{hasAttachmentErrors:function(){return this.attachments.some((function(t){return t.error}))},uploadProgress:function(){var t=0,e=0;for(var n in this.uploads)t+=this.uploads[n].uploaded,e+=this.uploads[n].total;return(t/e*100).toFixed(1)},total:function(){var t=0;for(var e in this.uploads)t+=this.uploads[e].total;return t}},watch:{attachments:function(){this.$nextTick((function(){var t=this,e=null;this.$refs.attachments.some((function(n,r){var o=n.$el.getBoundingClientRect().top;return null!==e&&e!==o?(t.hasNextLine||(t.isToggle=!0,t.hasNextLine=!0),!0):(e=o,t.$refs.attachments.length===r+1&&(t.hasNextLine=!1,t.isToggle=!1,!0))}))}))}},created:function(){var t=this;this.bus.$on("on-add-local-attachment",this.onAddLocalAttachment),this.bus.$on("on-add-cloud-attachment",this.onAddCloudAttachment),this.bus.$on("on-add-cloud-attachment-link",this.onAddCloudAttachmentLink),this.value.map((function(e){return t.attachments.push({id:e.id,fileName:e.fileName,displayName:as()("/",e.fileName),total:e.size,finished:!0,sizeString:t.formatBytes(e.size),imageBlobURL:e.isImage?e.downloadUrl:e.mimeUrl}),e}))},methods:{onAddLocalAttachment:function(){this.$refs.localAttachments.click()},emitNewAttachments:function(t){this.$emit("input",this.value.concat(t))},totalSizeOfUpload:function(){return Object.values(this.value).reduce((function(t,e){return"local"===!e.type?t:t+e.size}),0)},onLocalAttachmentSelected:function(t){var e=this;this.uploading=!0,L.ZP.set(this,"uploads",{});var n=ps()(us()("size"),Object.values(t.target.files)),r=n+this.totalSizeOfUpload();if(w.Z.debug("checking upload size limit",{existingUploads:this.totalSizeOfUpload(),toUpload:n,limit:this.uploadSizeLimit,newTotal:r}),this.uploadSizeLimit&&r>this.uploadSizeLimit)return this.showAttachmentFileSizeWarning(t.target.files.length),void(this.uploading=!1);var o=cs()((function(t){var n,r=new AbortController;e.attachments.push({fileName:t.name,fileType:t.type,imageBlobURL:e.generatePreview(t),displayName:as()("/",t.name),progress:null,percent:0,total:t.size,finished:!1,error:!1,hasPreview:!1,controller:r}),L.ZP.set(e.uploads,t.name,{total:t.size,uploaded:0});try{return function(t,e,n){var r=(0,K.generateUrl)("/apps/mail/api/attachments"),o=new FormData,a={onUploadProgress:function(t){return e(t,t.loaded,t.total)}};return n&&(a.signal=n.signal),o.append("attachment",t),Q.Z.post(r,o,a).then((function(t){return t.data})).then((function(e){var n=e.id;return{file:t,id:n}}))}(t,(n=t.name,function(t,r){e.uploads[n].uploaded=r,e.attachments.map((function(t,o){return t.displayName===n&&(e.attachments[o].progress=r,e.changeProgress(t,r)),t}))}),r).catch((function(){e.attachments.some((function(n){return n.displayName===t.name&&!n.error&&(e.$set(n,"error",!0),!0)}))})).then((function(t){var n=t.file,r=t.id;w.Z.info("uploaded"),e.attachments.some((function(t,o){return t.displayName===n.name&&(e.attachments[o].id=r,e.attachments[o].finished=!0,!0)})),e.emitNewAttachments([{fileName:n.name,displayName:as()("/",n.name),id:r,size:n.size,type:"local"}])}))}catch(e){w.Z.error("Could not upload file",{file:t,error:e})}}),t.target.files),a=Promise.all(o).catch((function(t){return w.Z.error("could not upload all attachments",{error:t})})).then((function(){return e.uploading=!1}));return this.$emit("upload",a),a},onAddCloudAttachment:function(){var t=this;return Ds(Ls().mark((function e(){var n,r,o,a,i;return Ls().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,U.getFilePickerBuilder)((0,Dr.translate)("mail","Choose a file to add as attachment")).setMultiSelect(!0).build(),e.prev=1,e.next=4,n.pick((0,Dr.translate)("mail","Choose a file to add as attachment"));case 4:return r=e.sent,e.next=7,Promise.all(r.map(vs));case 7:if(o=e.sent,a=o.reduce((function(t,e){return t+e.size}),0),i=a+t.totalSizeOfUpload(),!(t.uploadSizeLimit&&i>t.uploadSizeLimit)){e.next=13;break}return t.showAttachmentFileSizeWarning(r.length),e.abrupt("return");case 13:t.emitNewAttachments(r.map((function(e,n){var r={fileName:e,displayName:as()("/",e),type:"cloud",size:o[n].size},a={finished:!0,imageBlobURL:t.generatePreview(r),total:o[n].size,sizeString:t.formatBytes(o[n].size),hasPreview:o[n]["has-preview"],id:o[n].fileid,uploaded:0};return t.attachments.push(Object.assign(a,r)),r}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),w.Z.error("could not choose a file as attachment",{error:e.t0});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))()},onAddCloudAttachmentLink:function(){var t=this;return Ds(Ls().mark((function e(){var n,r,o;return Ls().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,U.getFilePickerBuilder)((0,Dr.translate)("mail","Choose a file to share as a link")).build(),e.prev=1,e.next=4,n.pick((0,Dr.translate)("mail","Choose a file to share as a link"));case 4:return r=e.sent,e.next=7,xs(r,(0,de.IH)());case 7:o=e.sent,t.appendToBodyAtCursor('<a href="'.concat(o,'">').concat(o,"</a>")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),w.Z.error("could not choose a file as attachment link",{error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},showAttachmentFileSizeWarning:function(t){(0,U.showWarning)((0,Dr.translatePlural)("mail","The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.","The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.",t,{size:(0,_o.s)(this.uploadSizeLimit)}))},onDelete:function(t){t.finished||t.controller.abort();var e=t.fileName,n=(t.displayName,t.id),r=(t.total,t.type),o=this.attachments.filter((function(e){return e!==t}));this.attachments=o,this.$emit("input",this.value.filter((function(t){return"cloud"===r?t.fileName!==e:t.id!==n})))},appendToBodyAtCursor:function(t){this.bus.$emit("append-to-body-at-cursor",t)},formatBytes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 B";var n=1024,r=e<0?0:e,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,a)).toFixed(r))+" "+o[a]},changeProgress:function(t,e){var n=this;this.attachments.map((function(r,o){if(t.fileName===r.fileName&&!r.finished){var a=e<=r.total?e:r.total;n.$set(r,"progress",a),n.$set(r,"sizeString",n.formatBytes(a)),n.$set(r,"percent",a/r.total*100).toFixed(1),t.total<=a&&n.$set(r,"finished",!0)}return r}))},generatePreview:function(t){return!!this.isImage(t)&&URL.createObjectURL(t)},isImage:function(t){return t.type&&-1!==Bs.indexOf(t.type)}}},Ms=Os,Ps=r(75390),js={};js.styleTagTransform=g(),js.setAttributes=h(),js.insert=p().bind(null,"head"),js.domAPI=u(),js.insertStyleElement=A(),c()(Ps.Z,js),Ps.Z&&Ps.Z.locals&&Ps.Z.locals;var Ns=(0,I.Z)(Ms,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"new-message-attachments"},[t.hasNextLine?e("div",{staticClass:"new-message-attachments--counter",class:{"new-message-attachments--counter--with-errors":t.hasAttachmentErrors},on:{click:function(e){t.isToggle=!t.isToggle}}},[e("span",[t._v("\n\t\t\t"+t._s(t.n("mail","{count} attachment","{count} attachments",t.attachments.length,{count:t.attachments.length}))+" ("+t._s(t.formatBytes(t.totalSizeOfUpload()))+")\n\t\t")]),t._v(" "),t.isToggle?e("ChevronUp",{attrs:{size:24}}):t._e(),t._v(" "),t.isToggle?t._e():e("ChevronDown",{attrs:{size:24}})],1):t._e(),t._v(" "),e("ul",{staticClass:"new-message-attachments--list",class:{hide:t.isToggle,active:!t.isToggle&&t.hasNextLine}},t._l(t.attachments,(function(n){return e("ComposerAttachment",{key:n.id,ref:"attachments",refInFor:!0,attrs:{bus:t.bus,attachment:n,uploading:t.uploading},on:{"on-delete-attachment":function(e){return t.onDelete(n)}}})})),1),t._v(" "),e("input",{ref:"localAttachments",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.onLocalAttachmentSelected}})])}),[],!1,null,"1a5f00a0",null).exports,Fs=r(86119),Zs=r(19695),Gs={name:"RecipientListItem",components:{ListItemIcon:o.Ic,Close:fr.default},props:{option:{type:Object,required:!0}},methods:{removeRecipient:function(t,e){this.$emit("remove-recipient",t,e)}}},zs=r(53521),Rs={};Rs.styleTagTransform=g(),Rs.setAttributes=h(),Rs.insert=p().bind(null,"head"),Rs.domAPI=u(),Rs.insertStyleElement=A(),c()(zs.Z,Rs),zs.Z&&zs.Z.locals&&zs.Z.locals;var $s=(0,I.Z)(Gs,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"multiselect__tag multiselect__tag--recipient"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:t.option.label,"avatar-size":24}}),t._v(" "),e("Close",{staticClass:"delete-recipient",attrs:{size:20},on:{click:function(e){return e.preventDefault(),t.removeRecipient(t.option)}}})],1)}),[],!1,null,"f8efac8e",null).exports,Us=r(90446),qs=r(13312),Ys=r(38213);function Ws(t){return Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(t)}function Vs(){Vs=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Ws(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Hs(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Qs(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Hs(a,r,o,i,s,"next",t)}function s(t){Hs(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Ks={name:"MailvelopeEditor",props:{value:{type:String,required:!0},recipients:{type:Array,required:!0},quotedText:{type:Object,required:!1,default:function(){}},isReplyOrForward:{type:Boolean,default:!1}},data:function(){return{editor:void 0}},mounted:function(){var t=this;return Qs(Vs().mark((function e(){var n,r,o;return Vs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!!t.quotedText&&We(t.quotedText),o=t.isReplyOrForward?null===(n=t.quotedText)||void 0===n?void 0:n.value:void 0,e.next=4,window.mailvelope.createEditorContainer("#mailvelope-composer",void 0,{quotedMail:r?o:void 0});case 4:t.editor=e.sent;case 5:case"end":return e.stop()}}),e)})))()},methods:{pull:function(){var t=this;return Qs(Vs().mark((function e(){var n,r;return Vs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.recipients.map((function(t){return t.email})),w.Z.info("encrypting message",{recipients:n}),e.next=4,t.editor.encrypt(n);case 4:r=e.sent,w.Z.info("message encryted",{armored:r}),t.$emit("input",r);case 7:case"end":return e.stop()}}),e)})))()}}},Js=r(30980),Xs={};Xs.styleTagTransform=g(),Xs.setAttributes=h(),Xs.insert=p().bind(null,"head"),Xs.domAPI=u(),Xs.insertStyleElement=A(),c()(Js.Z,Xs),Js.Z&&Js.Z.locals&&Js.Z.locals;var tc=(0,I.Z)(Ks,(function(){return(0,this._self._c)("div",{attrs:{id:"mailvelope-composer"}})}),[],!1,null,"0be7aff6",null).exports,ec=r(90941),nc=r(16639),rc=r(67727),oc=r(7844),ac=r(77274),ic=r(11130);function sc(t){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(t)}function cc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return lc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lc(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uc(){uc=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==sc(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function dc(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function pc(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){dc(a,r,o,i,s,"next",t)}function s(t){dc(a,r,o,i,s,"throw",t)}i(void 0)}))}}function fc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fc(Object(n),!0).forEach((function(e){mc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ac=Ar()(vr,500);L.ZP.use(is);var vc=Object.seal({EDITING:0,UPLOADING:1,SENDING:2,ERROR:3,WARNING:4,FINISHED:5,DISCARDING:6,DISCARDED:7}),gc={name:"Composer",components:{MailvelopeEditor:tc,Actions:o.O3,ActionButton:o.Js,ActionCheckbox:o.Bt,ActionInput:o.Iw,ActionRadio:o.Iz,ButtonVue:o.P2,ComposerAttachments:Ns,ChevronLeft:st.default,Delete:ct.Z,Download:He.Z,IconUpload:Fs.Z,IconFolder:Eo.default,IconPublic:Zs.Z,IconCheck:it.default,Loading:Zn,Multiselect:o.Z2,TextEditor:Ys.Z,EmptyContent:o.SL,ListItemIcon:o.Ic,RecipientListItem:$s,Send:oc.Z,SendClock:ac.Z,UnfoldMoreHorizontal:Us.Z,UnfoldLessHorizontal:qs.Z,IconHtml:ua.Z,IconClose:fr.default},props:{fromAccount:{type:Number,default:function(){}},fromAlias:{type:Number,default:void 0},to:{type:Array,default:function(){return[]}},cc:{type:Array,default:function(){return[]}},bcc:{type:Array,default:function(){return[]}},subject:{type:String,default:""},body:{type:Object,default:function(){return(0,Kr.dy)("")}},editorBody:{type:String,default:""},draftId:{type:Number,default:void 0},draft:{type:Function,required:!0},send:{type:Function,required:!0},inReplyToMessageId:{type:String,default:void 0},replyTo:{type:Object,required:!1,default:function(){}},forwardFrom:{type:Object,required:!1,default:function(){}},forwardedMessages:{type:Array,required:!1,default:function(){return[]}},sendAt:{type:Number,default:void 0},attachmentsData:{type:Array,default:function(){return[]}}},data:function(){var t,e,n,r,o=new Date;return o.setHours(o.getHours()+1),{showCC:this.cc.length>0,showBCC:this.bcc.length>0,selectedAlias:-1,autocompleteRecipients:this.to.concat(this.cc).concat(this.bcc),newRecipients:[],subjectVal:this.subject,bodyVal:this.editorBody,attachments:this.attachmentsData,noReply:this.to.some((function(t){var e,n;return(null===(e=t.email)||void 0===e?void 0:e.startsWith("noreply@"))||(null===(n=t.email)||void 0===n?void 0:n.startsWith("no-reply@"))})),draftsPromise:Promise.resolve(this.draftId),attachmentsPromise:Promise.resolve(),canSaveDraft:!0,savingDraft:void 0,saveDraftDebounced:Tr()(1e4,this.saveDraft),state:vc.EDITING,errorText:void 0,STATES:vc,selectTo:this.to,selectCc:this.cc,selectBcc:this.bcc,bus:new L.ZP,encrypt:!1,mailvelope:{available:!1,keyRing:void 0,keysMissing:[]},editorMode:"html"!==(null===(t=this.body)||void 0===t?void 0:t.format)?qi.GZ:qi.bu,addShareLink:(0,Dr.translate)("mail","Add share link from {productName} Files",{productName:null!==(e=null===(n=OC)||void 0===n||null===(r=n.theme)||void 0===r?void 0:r.name)&&void 0!==e?e:"Nextcloud"}),requestMdn:!1,changeSignature:!1,loadingIndicatorTo:!1,loadingIndicatorCc:!1,loadingIndicatorBcc:!1,isActionsOpen:!1,isMoreActionsOpen:!1,selectedDate:o,sendAtVal:this.sendAt,firstDayDatetimePicker:0===(0,Dr.getFirstDay)()?7:(0,Dr.getFirstDay)(),formatter:{stringify:function(t){return t?_t()(t).format("LLL"):""},parse:function(t){return t?_t()(t,"LLL").toDate():null}},autoLimit:!0}},computed:hc(hc({},(0,za.Se)(["isScheduledSendingDisabled"])),{},{aliases:function(){var t=0;return this.$store.getters.accounts.filter((function(t){return!t.isUnified})).flatMap((function(e){return[{id:e.id,aliasId:null,selectId:t++,editorMode:e.editorMode,signature:e.signature,name:e.name,emailAddress:e.emailAddress,signatureAboveQuote:e.signatureAboveQuote},e.aliases.map((function(n){return{id:e.id,aliasId:n.id,selectId:t++,editorMode:e.editorMode,signature:n.signature,name:n.name,emailAddress:n.alias,signatureAboveQuote:e.signatureAboveQuote}}))]})).flat()},allRecipients:function(){return this.selectTo.concat(this.selectCc).concat(this.selectBcc)},attachmentSizeLimit:function(){return this.$store.getters.getPreference("attachment-size-limit")},selectableRecipients:function(){return this.newRecipients.concat(this.autocompleteRecipients).map((function(t){return hc(hc({},t),{},{label:t.label||t.email})}))},isForward:function(){return void 0!==this.forwardFrom},isReply:function(){return void 0!==this.replyTo},canSend:function(){return(!this.encrypt||!this.mailvelope.keysMissing.length)&&(this.selectTo.length>0||this.selectCc.length>0||this.selectBcc.length>0)},editorPlainText:function(){return this.editorMode===qi.GZ},submitButtonTitle:function(){return this.sendAtVal?(0,Dr.translate)("mail","Send later")+" ".concat(this.convertToLocalDate(this.sendAtVal)):this.mailvelope.available?this.encrypt?(0,Dr.translate)("mail","Encrypt and send"):(0,Dr.translate)("mail","Send unencrypted"):(0,Dr.translate)("mail","Send")},dateTomorrowMorning:function(){var t=new Date;return t.setTime(t.getTime()+864e5),t.setHours(9,0,0,0)},dateTomorrowAfternoon:function(){var t=new Date;return t.setTime(t.getTime()+864e5),t.setHours(14,0,0,0)},dateMondayMorning:function(){var t=new Date;return t.setHours(9,0,0,0),t.setDate(t.getDate()+(7-t.getDay())%7+1)},customSendTime:function(){return new Date(this.selectedDate).getTime()},showAmPm:function(){return-1!==_t()().locale((0,Dr.getLocale)()).localeData().longDateFormat("LT").toLowerCase().indexOf("a")},isSendAtTomorrowMorning:function(){return!(!this.sendAtVal||Math.floor(this.dateTomorrowMorning/1e3)!==Math.floor(this.sendAtVal/1e3))},isSendAtTomorrowAfternoon:function(){return!(!this.sendAtVal||Math.floor(this.dateTomorrowAfternoon/1e3)!==Math.floor(this.sendAtVal/1e3))},isSendAtMondayMorning:function(){return!(!this.sendAtVal||Math.floor(this.dateMondayMorning/1e3)!==Math.floor(this.sendAtVal/1e3))},isSendAtCustom:function(){return!(!this.sendAtVal||this.isSendAtTomorrowMorning||this.isSendAtTomorrowAfternoon||this.isSendAtMondayMorning)}}),watch:{"$route.params.threadId":function(){this.reset()},allRecipients:function(){this.checkRecipientsKeys()},aliases:function(t){var e=this;if(console.debug("aliases changed"),-1!==this.selectedAlias){var n=t.find((function(t){return t.id===e.selectedAlias.id&&t.aliasId===e.selectedAlias.aliasId}));void 0===n?this.onAliasChange(t[0]):this.onAliasChange(n)}}},beforeMount:function(){var t=this;return pc(uc().mark((function e(){return uc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setAlias(),t.initBody(),e.t0=t,e.next=5,$o();case 5:return e.t1=e.sent,e.next=8,e.t0.onMailvelopeLoaded.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e)})))()},mounted:function(){var t,e=this;this.isReply||this.$nextTick((function(){return e.$refs.toLabel.$el.focus()})),void 0!==(null===(t=this.forwardFrom)||void 0===t?void 0:t.attachments)&&this.forwardFrom.attachments.forEach((function(t){e.attachments.push({fileName:t.fileName,displayName:as()("/",t.fileName),id:t.id,messageId:e.forwardFrom.databaseId,type:"message-attachment"})}));var n=[];this.forwardedMessages&&!rs()(this.forwardedMessages)?n=[this.forwardedMessages]:this.forwardedMessages&&rs()(this.forwardedMessages)&&(n=this.forwardedMessages),n.forEach((function(t){var n=e.$store.getters.getEnvelope(t);n?e.attachments.push({displayName:n.subject+".eml",id:t,type:"message"}):(0,U.showError)((0,Dr.translate)("mail","Message {id} could not be found",{id:t}))})),this.sendAt&&this.isSendAtCustom&&(this.selectedDate=new Date(this.sendAt))},beforeDestroy:function(){window.removeEventListener("mailvelope",this.onMailvelopeLoaded)},methods:{setAlias:function(){var t=this,e=this.selectedAlias;this.fromAccount&&this.fromAlias?this.selectedAlias=this.aliases.find((function(e){return e.id===t.fromAccount&&e.aliasId===t.fromAlias})):this.fromAccount?this.selectedAlias=this.aliases.find((function(e){return e.id===t.fromAccount&&!e.aliasId})):this.selectedAlias=this.aliases[0],-1!==e||this.body&&""!==this.body.value||(this.editorMode=this.selectedAlias.editorMode)},checkRecipientsKeys:function(){var t=this;return pc(uc().mark((function e(){var n,r;return uc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.encrypt&&t.mailvelope.available){e.next=2;break}return e.abrupt("return");case 2:return n=t.allRecipients.map((function(t){return t.email})),e.next=5,t.mailvelope.keyRing.validKeyForAddress(n);case 5:r=e.sent,w.Z.debug("recipients keys validated",{recipients:n,keysValid:r}),t.mailvelope.keysMissing=n.filter((function(t){return!1===r[t]}));case 8:case"end":return e.stop()}}),e)})))()},initBody:function(){var t;t=this.replyTo?(0,Ct.Gx)(this.editorPlainText?(0,Kr.UK)(this.body):(0,Kr.vb)(this.body),this.replyTo.from[0],this.replyTo.dateInt,"top"===this.$store.getters.getPreference("reply-mode","top")).value:this.forwardFrom?(0,Ct.Gx)(this.editorPlainText?(0,Kr.UK)(this.body):(0,Kr.vb)(this.body),this.forwardFrom.from[0],this.forwardFrom.dateInt,"top"===this.$store.getters.getPreference("reply-mode","top")).value:this.bodyVal,this.bodyVal=(0,Kr.dy)(t).value},getMessageData:function(t){var e;return{account:this.selectedAlias.id,accountId:this.selectedAlias.id,aliasId:this.selectedAlias.aliasId,to:this.selectTo,cc:this.selectCc,bcc:this.selectBcc,draftId:t,subject:this.subjectVal,body:this.encrypt?(0,Kr.Oh)(this.bodyVal):(0,Kr.dy)(this.bodyVal),attachments:this.attachments,inReplyToMessageId:null!==(e=this.inReplyToMessageId)&&void 0!==e?e:this.replyTo?this.replyTo.messageId:void 0,isHtml:!this.encrypt&&!this.editorPlainText,requestMdn:this.requestMdn,sendAt:this.sendAtVal?Math.floor(this.sendAtVal/1e3):void 0}},saveDraft:function(t){var e=this;return this.savingDraft=!0,this.draftsPromise=this.draftsPromise.then((function(n){var r=t(n);return n||r.subject||r.body||r.cc||r.bcc||r.to||r.sendAt?e.draft(r):(w.Z.debug("Nothing substantial to save, ignoring draft save"),e.savingDraft=!1,n)})).then((function(t){return e.canSaveDraft=!0,t})).catch(function(){var t=pc(uc().mark((function t(n){var r;return uc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,It.d)(n,(mc(r={},nc.Z.getName(),(function(){return!1})),mc(r,"default",(function(){return!0})),r));case 2:e.canSaveDraft=!1;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(t){return e.savingDraft=!1,t})),this.draftsPromise},callSaveDraft:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t?this.saveDraftDebounced.apply(this,n):this.saveDraft.apply(this,n)},onSave:function(){this.callSaveDraft(!1,this.getMessageData)},insertSignature:function(){var t;t=this.changeSignature?ic.tj:ic.LQ,this.$refs.editor.editorExecute("insertSignature",t,(0,Kr.vb)((0,Kr.qY)(this.selectedAlias.signature)).value,this.selectedAlias.signatureAboveQuote),this.changeSignature=!1},onEditorInput:function(t){this.bodyVal=t,this.callSaveDraft(!0,this.getMessageData)},onEditorReady:function(t){this.bodyVal=t.getData(),this.insertSignature()},onChangeSendLater:function(t){this.sendAtVal=t?Number.parseInt(t,10):void 0},convertToLocalDate:function(t){return new Date(t).toLocaleString((0,Dr.getCanonicalLocale)(),{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},onAliasChange:function(t){w.Z.debug("changed alias",{alias:t}),this.selectedAlias=t,this.changeSignature=!0,this.editorMode===qi.GZ&&t.editorMode===qi.bu?this.editorMode=qi.bu:this.insertSignature()},onAddLocalAttachment:function(){this.bus.$emit("on-add-local-attachment"),this.callSaveDraft(!0,this.getMessageData)},onAddCloudAttachment:function(){this.bus.$emit("on-add-cloud-attachment"),this.callSaveDraft(!0,this.getMessageData)},onAddCloudAttachmentLink:function(){this.bus.$emit("on-add-cloud-attachment-link")},onAutocomplete:function(t,e){var n=this;void 0!==t&&""!==t&&(this.loadingIndicatorTo="to"===e,this.loadingIndicatorCc="cc"===e,this.loadingIndicatorBcc="bcc"===e,Ac(t).then((function(t){"to"===e?n.loadingIndicatorTo=!1:"cc"===e?n.loadingIndicatorCc=!1:"bcc"===e&&(n.loadingIndicatorBcc=!1),n.autocompleteRecipients=yr()("email")(n.autocompleteRecipients.concat(t))})))},onAttachmentsUploading:function(t){var e=this;this.attachmentsPromise=this.attachmentsPromise.then((function(){return t})).then((function(){return e.callSaveDraft(!0,e.getMessageData)})).then((function(){return w.Z.debug("attachments uploaded")})).catch((function(t){return w.Z.error("could not upload attachments",{error:t})}))},onMailvelopeLoaded:function(t){var e=this;return pc(uc().mark((function n(){return uc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.encrypt=We(e.body),e.mailvelope.available=!0,w.Z.info("Mailvelope loaded",{encrypt:e.encrypt,isPgpgMessage:We(e.body),keyRing:e.mailvelope.keyRing}),n.next=5,t.getKeyring();case 5:return e.mailvelope.keyRing=n.sent,n.next=8,e.checkRecipientsKeys();case 8:case"end":return n.stop()}}),n)})))()},onNewToAddr:function(t){this.onNewAddr(t,this.selectTo)},onNewCcAddr:function(t){this.onNewAddr(t,this.selectCc)},onNewBccAddr:function(t){this.onNewAddr(t,this.selectBcc)},onNewAddr:function(t,e){var n={label:t,email:t};this.newRecipients.push(n),e.push(n),this.callSaveDraft(!0,this.getMessageData)},onSend:function(t){var e=arguments,n=this;return pc(uc().mark((function t(){var r,o;return uc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.length>1&&void 0!==e[1]&&e[1],!n.encrypt){t.next=5;break}return w.Z.debug("get encrypted message from mailvelope"),t.next=5,n.$refs.mailvelopeEditor.pull();case 5:return n.state=vc.UPLOADING,t.next=8,n.attachmentsPromise.then((function(){return n.state=vc.SENDING})).then((function(){return n.draftsPromise})).then(n.getMessageData).then((function(t){return n.send(hc(hc({},t),{},{force:r}))})).then((function(){return w.Z.info("message sent")})).then((function(){return n.state=vc.FINISHED})).catch(function(){var t=pc(uc().mark((function t(e){var r,o,a;return uc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w.Z.error("could not send message",{error:e}),t.next=3,(0,It.d)(e,(mc(r={},ec.Z.getName(),(function(){return[(0,Dr.translate)("mail","No sent mailbox configured. Please pick one in the account settings."),vc.ERROR]})),mc(r,rc.Z.getName(),(function(){return[(0,Dr.translate)("mail","You are trying to send to many recipients in To and/or Cc. Consider using Bcc to hide recipient addresses."),vc.WARNING]})),mc(r,"default",(function(t){if(t&&t.toString)return[t.toString(),vc.ERROR]})),r));case 3:o=t.sent,a=cc(o,2),n.errorText=a[0],n.state=a[1];case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:o=n.$store.getters.getAccount(n.selectedAlias.id),parseInt(n.$route.params.mailboxId,10)===o.sentMailboxId&&setTimeout((function(){n.$store.dispatch("syncEnvelopes",{mailboxId:o.sentMailboxId,query:"",init:!1})}),500);case 10:case"end":return t.stop()}}),t)})))()},onForceSend:function(){var t=this;return pc(uc().mark((function e(){return uc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onSend(null,!0);case 2:case"end":return e.stop()}}),e)})))()},reset:function(){var t=this;this.draftsPromise=Promise.resolve(),this.selectTo=[],this.selectCc=[],this.selectBcc=[],this.subjectVal="",this.bodyVal="<p></p><p></p>",this.attachments=[],this.errorText=void 0,this.state=vc.EDITING,this.autocompleteRecipients=[],this.newRecipients=[],this.requestMdn=!1,this.changeSignature=!1,this.savingDraft=void 0,this.sendAtVal=void 0,this.setAlias(),this.initBody(),L.ZP.nextTick((function(){t.$refs.toLabel.$el.focus()}))},formatAliases:function(t){return t.name?"".concat(t.name," <").concat(t.emailAddress,">"):t.emailAddress},discardDraft:function(){var t=this;return pc(uc().mark((function e(){var n;return uc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.draftsPromise;case 2:n=e.sent,t.$emit("discard-draft",n);case 4:case"end":return e.stop()}}),e)})))()},disabledDatetimepickerDate:function(t){var e=new Date;return e.setHours(0,0,0),e.setSeconds(e.getSeconds()-1),t.getTime()<=e},disabledDatetimepickerTime:function(t){var e=new Date,n=new Date(e.getTime());return t.getTime()<=n},onRemoveRecipient:function(t,e){switch(e){case"to":this.removeRecipientTo(t);break;case"cc":this.removeRecipientCc(t);break;case"bcc":this.removeRecipientBcc(t)}},removeRecipient:function(t,e){return e.filter((function(e){return e.email!==t.email}))},removeRecipientTo:function(t){this.selectTo=this.removeRecipient(t,this.selectTo)},removeRecipientCc:function(t){this.selectCc=this.removeRecipient(t,this.selectCc)},removeRecipientBcc:function(t){this.selectBcc=this.removeRecipient(t,this.selectBcc)},toggleViewMode:function(){this.autoLimit=!this.autoLimit,this.showCC=!(this.showCC&&0===this.selectCc.length&&this.autoLimit),this.showBCC=!(this.showBCC&&0===this.selectBcc.length&&this.autoLimit)},setEditorModeHtml:function(){this.editorMode=qi.bu},setEditorModeText:function(){var t=this;OC.dialogs.confirmDestructive((0,Dr.translate)("mail","Any existing formatting (for example bold, italic, underline or inline images) will be removed."),(0,Dr.translate)("mail","Turn off formatting"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:(0,Dr.translate)("mail","Turn off and remove formatting"),confirmClasses:"error",cancel:(0,Dr.translate)("mail","Keep formatting")},(function(e){e&&(t.editorMode=qi.GZ)}))}}},yc=gc,Cc=r(79396),bc={};bc.styleTagTransform=g(),bc.setAttributes=h(),bc.insert=p().bind(null,"head"),bc.domAPI=u(),bc.insertStyleElement=A(),c()(Cc.Z,bc),Cc.Z&&Cc.Z.locals&&Cc.Z.locals;var xc=(0,I.Z)(yc,(function(){var t=this,e=t._self._c;return t.state===t.STATES.EDITING?e("div",{staticClass:"message-composer"},[e("div",{staticClass:"composer-fields composer-fields__from mail-account"},[e("label",{staticClass:"from-label",attrs:{for:"from"}},[t._v("\n\t\t\t"+t._s(t.t("mail","From"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{attrs:{id:"from",value:t.selectedAlias,options:t.aliases,label:"name","track-by":"selectId",searchable:!1,"custom-label":t.formatAliases,placeholder:t.t("mail","Select account"),"clear-on-select":!1},on:{select:t.onAliasChange}})],1)]),t._v(" "),e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"to-label",attrs:{for:"to"}},[t._v("\n\t\t\t"+t._s(t.t("mail","To"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{ref:"toLabel",class:{opened:!t.autoLimit},attrs:{id:"to",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address "),"clear-on-select":!0,"close-on-select":!1,"show-no-options":!1,"preserve-search":!0,"hide-selected":!0,loading:t.loadingIndicatorTo,"auto-limit":t.autoLimit},on:{input:function(e){return t.callSaveDraft(!0,t.getMessageData)},tag:t.onNewToAddr,"search-change":function(e){return t.onAutocomplete(e,"to")}},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("RecipientListItem",{attrs:{option:r},on:{"remove-recipient":function(e){return t.onRemoveRecipient(r,"to")}}})]}},{key:"option",fn:function(t){var n=t.option;return[e("div",{staticClass:"multiselect__tag multiselect__tag-custom"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:n.label,subtitle:n.email,"avatar-size":24}})],1)]}}],null,!1,2096561271),model:{value:t.selectTo,callback:function(e){t.selectTo=e},expression:"selectTo"}}),t._v(" "),e("button",{class:{active:!t.autoLimit},attrs:{title:t.t("mail","Toggle recipients list mode")},on:{click:function(e){return e.preventDefault(),t.toggleViewMode.apply(null,arguments)}}},[t.autoLimit?e("UnfoldMoreHorizontal",{attrs:{size:24}}):e("UnfoldLessHorizontal",{attrs:{size:24}})],1)],1)]),t._v(" "),t.showCC?e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"cc-label",attrs:{for:"cc"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Cc"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{class:{opened:!t.autoLimit},attrs:{id:"cc",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address "),"clear-on-select":!0,"show-no-options":!1,"preserve-search":!0,loading:t.loadingIndicatorCc,"auto-limit":t.autoLimit,"hide-selected":!0},on:{input:function(e){return t.callSaveDraft(!0,t.getMessageData)},tag:t.onNewCcAddr,"search-change":function(e){return t.onAutocomplete(e,"cc")}},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("RecipientListItem",{attrs:{option:r},on:{"remove-recipient":function(e){return t.onRemoveRecipient(r,"cc")}}})]}},{key:"option",fn:function(t){var n=t.option;return[e("div",{staticClass:"multiselect__tag multiselect__tag-custom"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:n.label,subtitle:n.email,"avatar-size":24}})],1)]}}],null,!1,4162477772),model:{value:t.selectCc,callback:function(e){t.selectCc=e},expression:"selectCc"}},[t._v(" "),t._v(" "),e("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.t("mail","")))])])],1)]):t._e(),t._v(" "),t.showBCC?e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"bcc-label",attrs:{for:"bcc"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Bcc"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"composer-fields--custom"},[e("Multiselect",{class:{opened:!t.autoLimit},attrs:{id:"bcc",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address "),"show-no-options":!1,"clear-on-select":!0,"preserve-search":!0,loading:t.loadingIndicatorBcc,"hide-selected":!0},on:{input:function(e){return t.callSaveDraft(!0,t.getMessageData)},tag:t.onNewBccAddr,"search-change":function(e){return t.onAutocomplete(e,"bcc")}},scopedSlots:t._u([{key:"tag",fn:function(n){var r=n.option;return[e("RecipientListItem",{attrs:{option:r},on:{"remove-recipient":function(e){return t.onRemoveRecipient(r,"bcc")}}})]}},{key:"option",fn:function(t){var n=t.option;return[e("div",{staticClass:"multiselect__tag multiselect__tag-custom"},[e("ListItemIcon",{attrs:{"no-margin":!0,title:n.label,subtitle:n.email,"avatar-size":24}})],1)]}}],null,!1,2659337166),model:{value:t.selectBcc,callback:function(e){t.selectBcc=e},expression:"selectBcc"}},[t._v(" "),t._v(" "),e("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.t("mail","No contacts found.")))])])],1)]):t._e(),t._v(" "),e("div",{staticClass:"composer-fields"},[e("label",{staticClass:"subject-label hidden-visually",attrs:{for:"subject"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subject"))+"\n\t\t")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.subjectVal,expression:"subjectVal"}],staticClass:"subject",attrs:{id:"subject",type:"text",name:"subject",autocomplete:"off",placeholder:t.t("mail","Subject ")},domProps:{value:t.subjectVal},on:{input:[function(e){e.target.composing||(t.subjectVal=e.target.value)},function(e){return t.callSaveDraft(!0,t.getMessageData)}]}})]),t._v(" "),t.noReply?e("div",{staticClass:"warning noreply-warning"},[t._v("\n\t\t"+t._s(t.t("mail","This message came from a noreply address so your reply will probably not be read."))+"\n\t")]):t._e(),t._v(" "),t.encrypt&&t.mailvelope.keysMissing.length?e("div",{staticClass:"warning noreply-warning"},[t._v("\n\t\t"+t._s(t.t("mail","The following recipients do not have a PGP key: {recipients}.",{recipients:t.mailvelope.keysMissing.join(", ")}))+"\n\t")]):t._e(),t._v(" "),e("div",{staticClass:"composer-fields message-editor"},[t.encrypt?e("MailvelopeEditor",{ref:"mailvelopeEditor",attrs:{value:t.bodyVal,recipients:t.allRecipients,"quoted-text":t.body,"is-reply-or-forward":t.isReply||t.isForward},on:{input:t.onEditorInput}}):e("TextEditor",{key:t.editorMode,ref:"editor",staticClass:"message-body",attrs:{value:t.bodyVal,html:!t.editorPlainText,name:"body",placeholder:t.t("mail","Write message "),focus:t.isReply,bus:t.bus},on:{input:t.onEditorInput,ready:t.onEditorReady}})],1),t._v(" "),e("ComposerAttachments",{attrs:{bus:t.bus,"upload-size-limit":t.attachmentSizeLimit},on:{upload:t.onAttachmentsUploading},model:{value:t.attachments,callback:function(e){t.attachments=e},expression:"attachments"}}),t._v(" "),e("div",{staticClass:"composer-actions-right composer-actions"},[e("div",{staticClass:"composer-actions--primary-actions"},[e("p",{staticClass:"composer-actions-draft-status"},[!0===t.savingDraft?e("span",{staticClass:"draft-status"},[t._v(t._s(t.t("mail","Saving draft ")))]):t.canSaveDraft?!1===t.savingDraft?e("span",{staticClass:"draft-status"},[t._v(t._s(t.t("mail","Draft saved")))]):t._e():e("span",{staticClass:"draft-status"},[t._v(t._s(t.t("mail","Error saving draft")))])]),t._v(" "),t.savingDraft||t.canSaveDraft?t._e():e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary"},on:{click:t.onSave},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Download",{attrs:{size:20,title:t.t("mail","Save draft")}})]},proxy:!0}],null,!1,2227301918)}),t._v(" "),!1===t.savingDraft?e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary"},on:{click:t.discardDraft},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete",{attrs:{size:20,title:t.t("mail","Discard & close draft")}})]},proxy:!0}],null,!1,3896853704)}):t._e()],1),t._v(" "),e("div",{staticClass:"composer-actions--secondary-actions"},[e("Actions",{attrs:{open:t.isActionsOpen},on:{"update:open":function(e){t.isActionsOpen=e},close:function(e){t.isMoreActionsOpen=!1}}},[t.isMoreActionsOpen?t._e():[e("ActionButton",{on:{click:t.onAddLocalAttachment},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconUpload",{attrs:{size:20}})]},proxy:!0}],null,!1,337456192)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Upload attachment"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionButton",{on:{click:t.onAddCloudAttachment},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolder",{attrs:{sizse:20}})]},proxy:!0}],null,!1,3154190694)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Add attachment from Files"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{disabled:t.encrypt},on:{click:t.onAddCloudAttachmentLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconPublic",{attrs:{size:20}})]},proxy:!0}],null,!1,1361450402)},[t._v("\n\t\t\t\t\t\t"+t._s(t.addShareLink)+"\n\t\t\t\t\t")]),t._v(" "),t.isScheduledSendingDisabled?t._e():e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.isMoreActionsOpen=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("SendClock",{attrs:{size:20,title:t.t("mail","Send later")}})]},proxy:!0}],null,!1,1769650344)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Send later"))+"\n\t\t\t\t\t")]),t._v(" "),!t.encrypt&&t.editorPlainText?e("ActionButton",{on:{click:function(e){return t.setEditorModeHtml()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconHtml",{attrs:{size:20}})]},proxy:!0}],null,!1,811545534)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Enable formatting"))+"\n\t\t\t\t\t")]):t._e(),t._v(" "),t.encrypt||t.editorPlainText?t._e():e("ActionButton",{on:{click:function(e){return t.setEditorModeText()}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconClose",{attrs:{size:20}})]},proxy:!0}],null,!1,2888946197)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Disable formatting"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:t.requestMdn},on:{check:function(e){t.requestMdn=!0},uncheck:function(e){t.requestMdn=!1}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Request a read receipt"))+"\n\t\t\t\t\t")]),t._v(" "),t.mailvelope.available?e("ActionCheckbox",{attrs:{checked:t.encrypt},on:{change:function(e){t.isActionsOpen=!1},check:function(e){t.encrypt=!0},uncheck:function(e){t.encrypt=!1}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Encrypt message with Mailvelope"))+"\n\t\t\t\t\t")]):t._e()],t._v(" "),t.isMoreActionsOpen?[e("ActionButton",{attrs:{"close-after-click":!1},on:{click:function(e){t.isMoreActionsOpen=!1}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ChevronLeft",{attrs:{title:t.t("mail","Send later"),size:20}}),t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Send later"))+"\n\t\t\t\t\t\t")]},proxy:!0}],null,!1,2922837455)}),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio",attrs:{value:void 0,name:"sendLater",checked:!t.sendAtVal},on:{change:function(e){return t.onChangeSendLater(void 0)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Send now"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio send-action-radio--multiline",attrs:{value:t.dateTomorrowMorning,name:"sendLater",checked:t.isSendAtTomorrowMorning},on:{change:function(e){return t.onChangeSendLater(t.dateTomorrowMorning)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Tomorrow morning"))+" - "+t._s(t.convertToLocalDate(t.dateTomorrowMorning))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio send-action-radio--multiline",attrs:{value:t.dateTomorrowAfternoon,name:"sendLater",checked:t.isSendAtTomorrowAfternoon},on:{change:function(e){return t.onChangeSendLater(t.dateTomorrowAfternoon)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Tomorrow afternoon"))+" - "+t._s(t.convertToLocalDate(t.dateTomorrowAfternoon))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio send-action-radio--multiline",attrs:{value:t.dateMondayMorning,name:"sendLater",checked:t.isSendAtMondayMorning},on:{change:function(e){return t.onChangeSendLater(t.dateMondayMorning)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Monday morning"))+" - "+t._s(t.convertToLocalDate(t.dateMondayMorning))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionRadio",{staticClass:"send-action-radio",attrs:{name:"sendLater",checked:t.isSendAtCustom,value:t.customSendTime},on:{change:function(e){return t.onChangeSendLater(t.customSendTime)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Custom date and time"))+"\n\t\t\t\t\t")]),t._v(" "),e("ActionInput",{attrs:{type:"datetime-local","first-day-of-week":t.firstDayDatetimePicker,use12h:t.showAmPm,formatter:t.formatter,format:"YYYY-MM-DD HH:mm",icon:"","minute-step":5,"show-second":!1,"disabled-date":t.disabledDatetimepickerDate,"disabled-time":t.disabledDatetimepickerTime},on:{change:function(e){return t.onChangeSendLater(t.customSendTime)}},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Enter a date"))+"\n\t\t\t\t\t")])]:t._e()],2),t._v(" "),e("ButtonVue",{attrs:{disabled:!t.canSend,"native-type":"submit",type:"primary"},on:{click:t.onSend},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Send",{attrs:{title:t.submitButtonTitle,size:20}})]},proxy:!0}],null,!1,366794848)},[t._v("\n\t\t\t\t"+t._s(t.submitButtonTitle)+"\n\t\t\t")])],1)])],1):t.state===t.STATES.UPLOADING?e("Loading",{attrs:{hint:t.t("mail","Uploading attachments "),role:"alert"}}):t.state===t.STATES.SENDING?e("Loading",{staticClass:"sending-hint",attrs:{hint:t.t("mail","Sending "),role:"alert"}}):t.state===t.STATES.ERROR?e("EmptyContent",{staticClass:"centered-content",attrs:{title:t.t("mail","Error sending your message"),role:"alert"},scopedSlots:t._u([{key:"action",fn:function(){return[e("ButtonVue",{attrs:{type:"tertiary"},on:{click:function(e){t.state=t.STATES.EDITING}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Go back"))+"\n\t\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary"},on:{click:t.onSend}},[t._v("\n\t\t\t"+t._s(t.t("mail","Retry"))+"\n\t\t")])]},proxy:!0}])},[t.errorText?e("p",[t._v("\n\t\t"+t._s(t.errorText)+"\n\t")]):t._e()]):t.state===t.STATES.WARNING?e("EmptyContent",{attrs:{title:t.t("mail","Warning sending your message"),role:"alert"}},[t.errorText?e("p",[t._v("\n\t\t"+t._s(t.errorText)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary"},on:{click:function(e){t.state=t.STATES.EDITING}}},[t._v("\n\t\t"+t._s(t.t("mail","Go back"))+"\n\t")]),t._v(" "),e("ButtonVue",{attrs:{type:"tertiary"},on:{click:t.onForceSend}},[t._v("\n\t\t"+t._s(t.t("mail","Send anyway"))+"\n\t")])],1):e("EmptyContent",{attrs:{title:t.sendAtVal?t.t("mail","Message will be sent at")+" "+t.convertToLocalDate(t.sendAtVal):t.t("mail","Message sent!")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconCheck",{attrs:{size:20}})]},proxy:!0}])})}),[],!1,null,"73987fda",null),wc=xc.exports;function _c(t){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(t)}function kc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ec(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kc(Object(n),!0).forEach((function(e){Ic(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ic(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Lc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Lc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tc(){Tc=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==_c(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Dc(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Bc(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Dc(a,r,o,i,s,"next",t)}function s(t){Dc(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Oc={name:"NewMessageModal",components:{Modal:o.Jc,Composer:wc},data:function(){return{original:void 0}},computed:{modalTitle:function(){return"outbox"===this.composerMessage.type?(0,Dr.translate)("mail","Edit message"):void 0!==this.composerData.draftId?(0,Dr.translate)("mail","Draft"):this.composerData.replyTo?(0,Dr.translate)("mail","Reply"):this.composerData.forwardFrom?(0,Dr.translate)("mail","Forward"):(0,Dr.translate)("mail","New message")},composerMessage:function(){return this.$store.getters.composerMessage},composerData:function(){var t;return null===(t=this.$store.getters.composerMessage)||void 0===t?void 0:t.data},forwardedMessages:function(){var t,e,n;return null!==(t=null===(e=this.composerMessage)||void 0===e||null===(n=e.options)||void 0===n?void 0:n.forwardedMessages)&&void 0!==t?t:[]}},methods:{toHtml:Kr.vb,plain:Kr.Oh,saveDraft:function(t){var e=this;return Bc(Tc().mark((function n(){var r,o,a,i;return Tc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.composerMessage){n.next=3;break}return w.Z.info("Ignoring draft because there is no message anymore",{data:t}),n.abrupt("return");case 3:if("outbox"!==e.composerMessage.type){n.next=9;break}return r=e.getDataForServer(t),n.next=7,e.$store.dispatch("outbox/updateMessage",{message:r,id:e.composerData.id});case 7:n.next=19;break;case 9:return o=e.getDataForServer(t,!0),n.next=12,(0,Uo.DO)(t.account,o);case 12:return a=n.sent,i=a.id,e.$store.commit("removeEnvelope",{id:t.draftId}),e.$store.commit("removeMessage",{id:t.draftId}),n.next=18,e.$store.dispatch("fetchEnvelope",i);case 18:return n.abrupt("return",i);case 19:case"end":return n.stop()}}),n)})))()},getDataForServer:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{accountId:t.account,subject:t.subject,body:t.isHtml?t.body.value:(0,Kr.UK)(t.body).value,editorBody:t.body.value,isHtml:t.isHtml,to:e?t.to.map(this.recipientToRfc822).join(", "):t.to,cc:e?t.cc.map(this.recipientToRfc822).join(", "):t.cc,bcc:e?t.bcc.map(this.recipientToRfc822).join(", "):t.bcc,attachments:t.attachments,aliasId:t.aliasId,inReplyToMessageId:t.inReplyToMessageId,sendAt:t.sendAt}},sendMessage:function(t){var e=this;return Bc(Tc().mark((function n(){var r,o,a,i,s;return Tc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:w.Z.debug("sending message",{data:t}),r=(new Date).getTime(),o=Sc(t.attachments);try{for(o.s();!(a=o.n()).done;)(i=a.value).type||(i.type="local")}catch(t){o.e(t)}finally{o.f()}if((s=e.getDataForServer(Ec(Ec({},t),{},{sendAt:t.sendAt?t.sendAt:Math.floor((r+qi.X1)/1e3)}))).sendAt<Math.floor((r+qi.X1)/1e3)&&(s.sendAt=Math.floor((r+qi.X1)/1e3)),e.composerData.id){n.next=11;break}return n.next=9,e.$store.dispatch("outbox/enqueueMessage",{message:s});case 9:n.next=13;break;case 11:return n.next=13,e.$store.dispatch("outbox/updateMessage",{message:s,id:e.composerData.id});case 13:(!t.sendAt||t.sendAt<Math.floor((r+qi.X1)/1e3))&&e.$store.dispatch("outbox/sendMessageWithUndo",{id:e.composerData.id}),t.draftId&&(e.$store.commit("removeEnvelope",{id:t.draftId}),e.$store.commit("removeMessage",{id:t.draftId})),e.$emit("close");case 16:case"end":return n.stop()}}),n)})))()},recipientToRfc822:function(t){return t.email===t.label||""===t.label||0===t.email.search(/^[a-zA-Z]+:/)?t.email:'"'.concat(t.label,'" <').concat(t.email,">")},discardDraft:function(t){var e=this;return Bc(Tc().mark((function n(){var r;return Tc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r="outbox"===e.composerMessage.type)&&(t=e.composerMessage.data.id),e.$emit("close"),n.prev=3,!r){n.next=9;break}return n.next=7,e.$store.dispatch("outbox/deleteMessage",{id:t});case 7:n.next=11;break;case 9:return n.next=11,e.$store.dispatch("deleteMessage",{id:t});case 11:(0,U.showSuccess)((0,Dr.translate)("mail","Message discarded")),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(3),console.error(n.t0),(0,U.showError)((0,Dr.translate)("mail","Could not discard message"));case 18:case"end":return n.stop()}}),n,null,[[3,14]])})))()},convertEditorBody:function(t){return t.editorBody?t.editorBody:t.body?(0,Kr.vb)(t.body).value:""}}},Mc=Oc,Pc=r(34793),jc={};jc.styleTagTransform=g(),jc.setAttributes=h(),jc.insert=p().bind(null,"head"),jc.domAPI=u(),jc.insertStyleElement=A(),c()(Pc.Z,jc),Pc.Z&&Pc.Z.locals&&Pc.Z.locals;var Nc=(0,I.Z)(Mc,(function(){var t=this,e=t._self._c;return e("Modal",{attrs:{size:"normal",title:t.modalTitle},on:{close:function(e){return t.$emit("close",{restoreOriginalSendAt:!0})}}},[e("Composer",{attrs:{"from-account":t.composerData.accountId,"from-alias":t.composerData.aliasId,to:t.composerData.to,cc:t.composerData.cc,bcc:t.composerData.bcc,subject:t.composerData.subject,"attachments-data":t.composerData.attachments,body:t.composerData.body,"editor-body":t.convertEditorBody(t.composerData),"in-reply-to-message-id":t.composerData.inReplyToMessageId,"reply-to":t.composerData.replyTo,"forward-from":t.composerData.forwardFrom,"draft-id":t.composerData.draftId,"send-at":1e3*t.composerData.sendAt,draft:t.saveDraft,send:t.sendMessage,"forwarded-messages":t.forwardedMessages},on:{"discard-draft":t.discardDraft}})],1)}),[],!1,null,"1d73321b",null).exports,Fc=r(3515),Zc={name:"OutboxMessageContent",components:{IconMail:Z.Z,NcEmptyContent:z()}},Gc=(0,I.Z)(Zc,(function(){var t=this,e=t._self._c;return e("NcEmptyContent",{attrs:{title:t.t("mail","Pending or not sent messages will show up here")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconMail",{attrs:{size:65}})]},proxy:!0}])})}),[],!1,null,"c2bd6942",null).exports;function zc(t){return function(t){if(Array.isArray(t))return Rc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Rc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rc(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $c={computed:{recipients:function(){var t,e,n=null!==(t=this.message.to)&&void 0!==t?t:[],r=null!==(e=this.message.cc)&&void 0!==e?e:[];return[].concat(zc(n),zc(r))},avatarDisplayName:function(){var t,e,n,r;return null!==(t=null!==(e=null===(n=this.recipients[0])||void 0===n?void 0:n.label)&&void 0!==e?e:null===(r=this.recipients[0])||void 0===r?void 0:r.email)&&void 0!==t?t:"?"},avatarEmail:function(){var t,e;return null!==(t=null===(e=this.recipients[0])||void 0===e?void 0:e.email)&&void 0!==t?t:""}}};function Uc(t){return Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(t)}function qc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qc(Object(n),!0).forEach((function(e){Wc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vc(){Vc=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Uc(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function Hc(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Qc(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){Hc(a,r,o,i,s,"next",t)}function s(t){Hc(a,r,o,i,s,"throw",t)}i(void 0)}))}}var Kc={name:"OutboxMessageListItem",components:{ListItem:o.hx,Avatar:ot,ActionButton:o.Js,IconDelete:ct.Z,Send:oc.Z},mixins:[$c],props:{message:{type:Object,required:!0}},computed:{selected:function(){return this.$route.params.messageId===this.message.id},title:function(){var t=function(t){return t.label},e=this.message.to.map(t).concat(this.message.cc.map(t)).concat(this.message.bcc.map(t));return new Intl.ListFormat((0,Dr.getLanguage)(),{type:"conjunction"}).format(e)},details:function(){return this.message.failed?this.t("mail","Message could not be sent"):this.message.sendAt?_t().unix(this.message.sendAt).fromNow():""},subjectForSubtitle:function(){return this.message.subject||this.t("mail","No subject")}},methods:{deleteMessage:function(){var t=this;return Qc(Vc().mark((function e(){return Vc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("outbox/deleteMessage",{id:t.message.id});case 3:(0,U.showSuccess)((0,Dr.translate)("mail","Message deleted")),e.next=13;break;case 6:return e.prev=6,e.t0=e.catch(0),e.t1=U.showError,e.next=11,(0,It.d)(e.t0,{default:function(t){return w.Z.error("could not delete message",t),(0,Dr.translate)("mail","Could not delete message")}});case 11:e.t2=e.sent,(0,e.t1)(e.t2);case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))()},sendMessageNow:function(){var t=this;return Qc(Vc().mark((function e(){var n;return Vc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yc(Yc({},t.message),{},{failed:!1,sendAt:((new Date).getTime()+qi.X1)/1e3}),e.next=3,t.$store.dispatch("outbox/updateMessage",{message:n,id:n.id});case 3:return e.next=5,t.$store.dispatch("outbox/sendMessageWithUndo",{id:n.id});case 5:case"end":return e.stop()}}),e)})))()},openModal:function(){var t=this;return Qc(Vc().mark((function e(){return Vc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("showMessageComposer",{type:"outbox",data:Yc(Yc({},t.message),{},{body:t.message.isHtml?(0,Kr.dy)(t.message.body):(0,Kr.Oh)(t.message.body)})});case 2:case"end":return e.stop()}}),e)})))()}}},Jc=r(42254),Xc={};Xc.styleTagTransform=g(),Xc.setAttributes=h(),Xc.insert=p().bind(null,"head"),Xc.domAPI=u(),Xc.insertStyleElement=A(),c()(Jc.Z,Xc),Jc.Z&&Jc.Z.locals&&Jc.Z.locals;var tl=(0,I.Z)(Kc,(function(){var t=this,e=t._self._c;return e("ListItem",{staticClass:"outbox-message",class:{selected:t.selected},attrs:{title:t.title,details:t.details},on:{click:t.openModal},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Avatar",{attrs:{"display-name":t.avatarDisplayName,email:t.avatarEmail}})]},proxy:!0},{key:"subtitle",fn:function(){return[t._v("\n\t\t"+t._s(t.subjectForSubtitle)+"\n\t")]},proxy:!0}])},[t._v(" "),t._v(" "),e("template",{slot:"actions"},[e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.sendMessageNow},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Send",{attrs:{title:t.t("mail","Send now"),size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Send now"))+"\n\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.deleteMessage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete"))+"\n\t\t")])],1)],2)}),[],!1,null,"544e29da",null).exports;function el(t){return el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(t)}function nl(){nl=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==el(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function rl(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function ol(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){rl(a,r,o,i,s,"next",t)}function s(t){rl(a,r,o,i,s,"throw",t)}i(void 0)}))}}var al={name:"Outbox",components:{AppContent:o.Mb,AppContentList:o.Yx,Error:Pn,LoadingSkeleton:En,EmptyMailbox:$,OutboxMessageListItem:tl,OutboxMessageContent:Gc},data:function(){return{error:!1,loading:!1,refreshInterval:void 0}},computed:{isMessageShown:function(){return!!this.$route.params.messageId},currentMessage:function(){return this.isMessageShown?this.$store.getters["outbox/getMessage"](this.$route.params.messageId):null},messages:function(){return this.$store.getters["outbox/getAllMessages"]}},created:function(){var t=this;this.refreshInterval=setInterval(ol(nl().mark((function e(){return nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchMessages();case 2:case"end":return e.stop()}}),e)}))),6e4)},mounted:function(){var t=this;return ol(nl().mark((function e(){return nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchMessages();case 2:case"end":return e.stop()}}),e)})))()},destroyed:function(){clearInterval(this.refreshInterval)},methods:{hideMessage:function(){this.$router.push({name:"outbox"})},fetchMessages:function(){var t=this;return ol(nl().mark((function e(){return nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=!1,e.prev=2,e.next=5,t.$store.dispatch("outbox/fetchMessages");case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),t.error=!0,w.Z.error("Failed to fetch outbox messages",{error:e.t0});case 11:t.loading=!1;case 12:case"end":return e.stop()}}),e,null,[[2,7]])})))()}}},il=r(88143),sl={};sl.styleTagTransform=g(),sl.setAttributes=h(),sl.insert=p().bind(null,"head"),sl.domAPI=u(),sl.insertStyleElement=A(),c()(il.Z,sl),il.Z&&il.Z.locals&&il.Z.locals;var cl=(0,I.Z)(al,(function(){var t=this,e=t._self._c;return e("AppContent",{attrs:{"pane-config-key":"mail","show-details":t.isMessageShown},on:{"update:showDetails":t.hideMessage},scopedSlots:t._u([{key:"list",fn:function(){return[e("AppContentList",[t.error?e("Error",{attrs:{error:t.t("mail","Could not open outbox"),message:"",role:"alert"}}):t.loading?e("LoadingSkeleton"):0===t.messages.length?e("EmptyMailbox"):t._l(t.messages,(function(t){return e("OutboxMessageListItem",{key:t.id,attrs:{message:t}})}))],2)]},proxy:!0}])},[e("OutboxMessageContent")],1)}),[],!1,null,"41dab610",null).exports;function ll(t){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(t)}function ul(){ul=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),s=new k(o||[]);return r(i,"_invoke",{value:b(t,n,s)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function p(){}function f(){}function h(){}var m={};c(m,a,(function(){return this}));var A=Object.getPrototypeOf,v=A&&A(A(E([])));v&&v!==e&&n.call(v,a)&&(m=v);var g=h.prototype=p.prototype=Object.create(m);function y(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(r,a,i,s){var c=u(t[r],t,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==ll(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function b(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=x(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(C.prototype),c(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new C(l(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},y(g),c(g,s,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function dl(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var pl={name:"Home",components:{Content:o.qF,MailboxThread:es,Navigation:Fc.Z,NewMessageModal:Nc,Outbox:cl},mixins:[i()],computed:{activeAccount:function(){var t;return this.$store.getters.getAccount(null===(t=this.activeMailbox)||void 0===t?void 0:t.accountId)},activeMailbox:function(){return this.$store.getters.getMailbox(this.$route.params.mailboxId)},menu:function(){return this.buildMenu()}},created:function(){var t=this.$store.getters.accounts,e=this.$store.getters.getPreference("start-mailbox-id");if(e&&!this.$store.getters.getMailbox(e)&&(e=null),"home"===this.$route.name&&t.length>1&&e)w.Z.debug("Loading start mailbox",{id:e}),this.$router.replace({name:"mailbox",params:{mailboxId:e}});else if("home"===this.$route.name&&t.length>1){var n=t[0],r=this.$store.getters.getMailboxes(n.id)[0];console.debug("loading first mailbox of first account",n.id,r.databaseId),this.$router.replace({name:"mailbox",params:{mailboxId:r.databaseId}})}else if("home"===this.$route.name&&1===t.length)w.Z.debug("the only account we have is the unified one -> show the setup page"),this.$router.replace({name:"setup"});else if("mailto"===this.$route.name){if(0===t.length)return void console.error("cannot handle mailto:, no accounts configured");var o=t[0],a=this.$store.getters.getMailboxes(o.id)[0];console.debug("loading composer with first account and mailbox",o.id,a.id),this.$router.replace({name:"message",params:{mailboxId:a.databaseId,threadId:"mailto"},query:{to:this.$route.query.to,cc:this.$route.query.cc,bcc:this.$route.query.bcc,subject:this.$route.query.subject,body:this.$route.query.body}})}},methods:{hideMessage:function(){var t;this.$router.replace({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:null===(t=this.$route.params)||void 0===t?void 0:t.filter}})},onCloseModal:function(t){var e,n=this;return(e=ul().mark((function e(){return ul().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("closeMessageComposer",null!=t?t:{});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(t){dl(a,r,o,i,s,"next",t)}function s(t){dl(a,r,o,i,s,"throw",t)}i(void 0)}))})()}}},fl=pl,hl=r(60957),ml={};ml.styleTagTransform=g(),ml.setAttributes=h(),ml.insert=p().bind(null,"head"),ml.domAPI=u(),ml.insertStyleElement=A(),c()(hl.Z,ml),hl.Z&&hl.Z.locals&&hl.Z.locals;var Al=(0,I.Z)(fl,(function(){var t=this,e=t._self._c;return e("Content",{attrs:{"app-name":"mail"}},[e("Navigation"),t._v(" "),"outbox"===t.$route.name?e("Outbox"):t.activeAccount?e("MailboxThread",{attrs:{account:t.activeAccount,mailbox:t.activeMailbox}}):t._e(),t._v(" "),t.$store.getters.showMessageComposer?e("NewMessageModal",{on:{close:t.onCloseModal}}):t._e()],1)}),[],!1,null,"00c359ce",null).exports},52361:function(){},94616:function(){}}]);
//# sourceMappingURL=mail.96.b5e57237409bc12fe4d5.js.map